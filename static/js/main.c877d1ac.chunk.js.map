{"version":3,"sources":["components/log/log.ts","states/project/projectSlice.ts","components/toggle/toggle.tsx","components/versionInfo/versionInfo.tsx","components/view/view.tsx","pages/default/defaultPage.tsx","pages/drum/drumPage.tsx","pages/guitar/guitarPage.tsx","pages/harmony/harmonyPage.tsx","pages/print/printPage.tsx","components/contentLayout/contentLayout.tsx","components/sliderInput/sliderInput.tsx","util/ArrayUtil.ts","states/analysis/analysisSlice.ts","states/analysis/analysisUtil.ts","states/dialog/dialogsSlice.ts","states/audio/audioSlice.ts","components/measureSelect/measureSelect.tsx","styles/theme.ts","components/sectionSelect/sectionSelect.tsx","views/structure/structureView.tsx","components/sectionOverview/sectionOverview.tsx","views/structureNavigation/structureNavigationView.tsx","components/audioManagement/peaksConfig.ts","pages/structure/structurePage.tsx","views/wave/waveView.tsx","views/wave/waveContainer.tsx","components/app/logo.svg","components/app/app.tsx","api/persistenceApi.ts","components/fileInput/fileInput.tsx","components/audioManagement/audioPlayer.ts","components/audioManagement/audioManagement.tsx","components/modalDialog/modalDialog.tsx","states/store.ts","components/dialogManagement/dialogManagement.tsx","index.tsx"],"names":["Level","name","color","TRACE","INFO","WARN","ERROR","LoadingStatus","Page","Log","level","message","source","namespace","createDebug","debug","this","generateMessage","Toggle","className","props","show","classes","inline","invisible","children","Component","withStyles","createStyles","display","withTheme","VersionInfo","version","href","hash","description","React","View","theme","root","height","backgroundColor","view","background","header","headerBackground","padding","headerPadding","Card","raised","CardHeader","titleTypographyProps","variant","title","action","CardContent","body","DefaultPage","DrumPage","GuitarPage","HarmonyPage","PrintPage","ContentLayout","Grid","container","spacing","alignItems","item","xs","topLeft","topRight","bottom","SliderInput","width","FormControl","InputLabel","shrink","Box","mt","Slider","value","valueLabelDisplay","min","max","onChange","step","initialProjectState","status","NOT_INITIALIZED","currentPage","DEFAULT","audioUrl","syncFirstMeasureStart","projectSlice","createSlice","initialState","reducers","switchedPage","state","payload","createdProject","project","INITIALIZING","hotReloaded","initializedProject","INITIALIZED","enabledSyncFirstMeasureStart","actions","ArrayUtil","range","start","end","Array","fill","map","_","idx","toString","bordersOf","array","parseInt","last","length","TimeSignatureType","SectionType","toTimeSignatureType","type","FOUR_FOUR","THREE_FOUR","Error","replaceSections","sections","deleteCount","newSections","section","byId","allIds","ids","forEach","id","generateSectionId","push","splice","measures","distributeMeasures","timeSignatureType","bpm","firstMeasureStart","lengthOfOneMeasure","beatUnit","beatsPerMeasure","toTimeSignature","index","time","editable","labelText","DialogType","initialAnalysisState","audioDuration","audioSampleRate","timeSignature","analysisSlice","extraReducers","builder","addCase","analysis","undefinedSectionId","UNDEFINED","undefinedSection","addedSection","addSection","updatedSection","removeSection","before","after","removedSection","updatedRhythm","lastSection","undefined","newLastSection","removeSectionsAfterLastMeasure","lastMeasure","removalStart","removalStartMeasure","newSection","enclosingSection","allSections","newSectionStart","newSectionEnd","sectionCount","current","currentSectionEnd","position","enclosingSectionOf","mergedSections","embeddedSection","currentSectionStart","mergeSections","sectionId","indexOf","firstMeasure","removalCount","audioSlice","isPlaying","detune","playbackRate","isLooping","loopStart","loopEnd","triggeredPlay","triggeredPause","updatedPlaybackSettings","toggledLoop","updatedLoopSettings","initialDialogState","currentDialog","NONE","dialogsSlice","openedDialog","closedDialog","MeasureSelect","minWidth","measureSelect","event","newMeasure","target","disabled","MenuItem","key","createMuiTheme","palette","primary","blueGrey","default","logo","marginRight","popover","minHeight","margin","marginTop","formControl","marginBottom","sectionTypes","INTRO","VERSE","PRECHORUS","CHORUS","SOLO","OUTRO","BRIDGE","sectionSelect","waveform","pointMarkerColor","overrides","MuiListItemIcon","getColor","sectionType","result","SECTIONTYPE_TO_COLOR","get","Map","SectionSelect","colored","clsx","Object","values","style","StructureView","handleAddSection","handleUpdatedSection","info","JSON","stringify","handleRemoveSection","TableContainer","component","Paper","Table","size","TableHead","TableRow","TableCell","column1","column2","column3","column4","TableBody","scope","IconButton","onClick","measuresCount","measure","mapDispatchToProps","connect","SectionOverview","direction","Typography","toLowerCase","mainGrid","arr","res","i","slice","generateMatrix","row","ButtonGroup","orientation","measureId","nextMeasure","Number","Square","marginLeft","Button","StructureNavigationView","justify","alignContent","PeaksConfig","create","audioBuffer","mediaelement","document","getElementById","containers","zoomview","overview","mediaElement","webAudio","scale","multiChannel","keyboard","showPlayheadTime","zoomLevels","sectionsToSegment","timePerMeasure","segments","segment","startTime","endTime","measuresToPoints","points","point","PopoverType","WaveView","nextProps","url","WaveContainer","audioLoaded","CircularProgress","StructurePage","anchorEl","activePopover","handlePopoverOpen","currentTarget","setState","handlePopoverClose","WaveformControlButton","icon","e","RHYTHM","PLAYBACKRATE","DETUNE","Popover","open","onClose","anchorOrigin","vertical","horizontal","anchorPosition","top","left","transformOrigin","content","PopoverContent","STARTMEASURE","ADD_SECTION","button","Tooltip","StartMeasurePopover","RhythmPopover","isArray","fullWidth","NativeSelect","DetunePopover","toggleButton","Input","startAdornment","InputAdornment","ToggleButton","selected","PlaybackRatePopover","audio","loaded","_extends","assign","arguments","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","d","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref18","_ref19","_ref20","_ref21","_ref22","_ref23","_ref24","_ref25","_ref26","_ref","svgRef","x","y","viewBox","enableBackground","xmlSpace","ref","cx","cy","r","ForwardRef","forwardRef","App","AppBar","appBar","Toolbar","noWrap","NEW","OPEN","SAVE","Drawer","drawer","paper","drawerPaper","toolbar","List","menuItem","ListItem","STRUCTURE","ListItemIcon","ListItemText","HARMONY","GUITAR","DRUM","PRINT","footer","process","flexShrink","flexGrow","mixins","zIndex","PersistenceApi","zip","JSZip","loadAsync","archive","file","songFile","async","audioBlob","stateFile","json","parse","window","URL","revokeObjectURL","blob","createObjectURL","save","filename","options","a","fetch","audioFileUrl","response","generateAsync","then","saveAs","FileType","AudioPlayer","peaks","onSongComplete","player","pitchShift","shiftToSemitones","shift","Math","log2","destroy","Tone","dispose","AudioContext","play","getCurrentTime","emit","pause","isSeeking","toSeconds","getDuration","buffer","duration","seek","normalizedTime","seconds","TonejsPlayer","sync","PitchShift","toDestination","scheduleRepeat","stop","setDetune","pitch","AudioManagement","getPeaks","getPlayer","init","audioCtx","arrayBuffer","decodeAudioData","initPeaks","prevProps","revokeLocalFile","repaintWaveform","secondsPerMeasure","setPlaybackRate","setZoom","removeAll","add","Peaks","err","initPlayer","replacePlayer","on","sampleRate","views","getView","setStartTime","controls","hidden","src","computeSecondsPerMeasure","AUDIO","ZIP","FileInput","fileInput","handleChange","fileList","fileURL","getLocalFileUrl","callback","createRef","InputBase","input","placeholder","fileType","inputProps","readOnly","click","aria-label","iconButton","accept","files","flex","ModalDialog","Dialog","onCancel","maxWidth","DialogTitle","DialogContent","DialogContentText","subTitle","DialogActions","label","restoredPersistedState","createAction","sliceReducer","combineReducers","analysisReducer","audioReducer","dialog","dialogReducer","projectReducer","createRootReducer","match","createAppStore","configureStore","reducer","preloadedState","DialogManagement","onSubmit","zipUrl","store","getState","AddSectionDialog","maxMeasure","NewDialog","useState","fileUrl","setFileUrl","setTitle","TextField","InputProps","OpenDialog","setFile","setSectionType","setStart","setEnd","FormLabel","render","ThemeProvider","CssBaseline"],"mappings":"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","file":"static/js/main.c877d1ac.chunk.js","sourcesContent":["import debug from \"debug\";\n\nexport class Level {\n  public static readonly TRACE = new Level(\"trace\", \"lightblue\");\n  public static readonly INFO = new Level(\"info\", \"blue\");\n  public static readonly WARN = new Level(\"warn\", \"yellow\");\n  public static readonly ERROR = new Level(\"error\", \"red\");\n\n  private constructor(\n    public readonly name: string,\n    public readonly color: string\n  ) {}\n}\n\nclass Log {\n  private static generateMessage(\n    level: Level,\n    message: string,\n    source: string\n  ) {\n    const namespace = `transcribe:${level.name}`;\n    const createDebug = debug(namespace);\n\n    createDebug.color = level.color;\n\n    if (source) {\n      createDebug(source, message);\n    } else {\n      createDebug(message);\n    }\n  }\n\n  static trace(message: string, source: string) {\n    return this.generateMessage(Level.TRACE, message, source);\n  }\n\n  static info(message: string, source: string) {\n    return this.generateMessage(Level.INFO, message, source);\n  }\n\n  static warn(message: string, source: string) {\n    return this.generateMessage(Level.WARN, message, source);\n  }\n\n  static error(message: string, source: string) {\n    return this.generateMessage(Level.ERROR, message, source);\n  }\n}\n\nexport default Log;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { PersistedState } from \"states/store\";\n\nexport interface ProjectState {\n  readonly status: LoadingStatus;\n  readonly currentPage: Page;\n  readonly title: string;\n  readonly audioUrl: string;\n  readonly syncFirstMeasureStart: boolean;\n}\n\nexport enum LoadingStatus {\n  NOT_INITIALIZED = \"not_initialized\",\n  INITIALIZING = \"initializing\",\n  INITIALIZED = \"initialized\"\n}\n\nexport enum Page {\n  DEFAULT = \"default\",\n  STRUCTURE = \"structure\",\n  HARMONY = \"harmony\",\n  GUITAR = \"guitar\",\n  DRUM = \"drum\",\n  PRINT = \"print\"\n}\n\nexport const initialProjectState: ProjectState = {\n  status: LoadingStatus.NOT_INITIALIZED,\n  currentPage: Page.DEFAULT,\n  title: \"\",\n  audioUrl: \"\",\n  syncFirstMeasureStart: false\n};\n\nconst projectSlice = createSlice({\n  name: \"project\",\n  initialState: initialProjectState,\n  reducers: {\n    switchedPage(state, action: PayloadAction<Page>) {\n      state.currentPage = action.payload;\n    },\n    createdProject(state, action: PayloadAction<PersistedState>) {\n      return { ...action.payload.project, status: LoadingStatus.INITIALIZING };\n    },\n    hotReloaded(state) {\n      state.status = LoadingStatus.INITIALIZING;\n    },\n    initializedProject(\n      state,\n      // Add action payload to be used in another slice reducer\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      action: PayloadAction<{ audioDuration: number; audioSampleRate: number }>\n    ) {\n      state.status = LoadingStatus.INITIALIZED;\n    },\n    enabledSyncFirstMeasureStart(state, action: PayloadAction<boolean>) {\n      state.syncFirstMeasureStart = action.payload;\n    }\n  }\n});\n\nexport const {\n  switchedPage,\n  createdProject,\n  initializedProject,\n  hotReloaded,\n  enabledSyncFirstMeasureStart\n} = projectSlice.actions;\n\nexport default projectSlice.reducer;\n","import { createStyles, WithStyles, withStyles } from \"@material-ui/core\";\nimport React, { Component } from \"react\";\n\ninterface Props extends WithStyles<typeof stylesForToggle> {\n  show: boolean;\n}\n\nclass Toggle extends Component<Props> {\n  render() {\n    return (\n      <div\n        className={\n          this.props.show\n            ? this.props.classes.inline\n            : this.props.classes.invisible\n        }\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nconst stylesForToggle = () =>\n  createStyles({\n    inline: {\n      display: \"inline\"\n    },\n    invisible: {\n      display: \"none\"\n    }\n  });\n\nexport default withStyles(stylesForToggle, { withTheme: true })(Toggle);\n","import React from \"react\";\n\nclass VersionInfo extends React.Component<{\n  version: string;\n  hash: string;\n  description: string;\n}> {\n  render() {\n    return (\n      <>\n        {this.props.version} (\n        <a\n          href={\"https://github.com/tscz/transcribe/commit/\" + this.props.hash}\n        >\n          {this.props.hash} - {this.props.description}\n        </a>\n        )\n      </>\n    );\n  }\n}\n\nexport default VersionInfo;\n","import {\n  CardHeader,\n  createStyles,\n  Theme,\n  WithStyles,\n  withStyles\n} from \"@material-ui/core\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport React, { ReactElement } from \"react\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      height: \"100%\",\n      backgroundColor: theme.view.background\n    },\n    header: {\n      backgroundColor: theme.view.headerBackground,\n      padding: theme.view.headerPadding\n    }\n  });\n\ninterface Props {\n  body: ReactElement;\n  title: string;\n  action?: ReactElement;\n}\n\ntype PropsWithStyle = Props & WithStyles<typeof styles>;\n\nconst View = withStyles(styles)((props: PropsWithStyle) => {\n  return (\n    <Card className={props.classes.root} raised={false}>\n      <CardHeader\n        titleTypographyProps={{ variant: \"subtitle1\" }}\n        title={props.title}\n        className={props.classes.header}\n        action={props.action}\n      />\n      <CardContent>{props.body}</CardContent>\n    </Card>\n  );\n});\n\nexport default View;\n","import View from \"components/view/view\";\nimport React from \"react\";\n\nclass DefaultPage extends React.Component {\n  render() {\n    return (\n      <View\n        title=\"Info\"\n        body={\n          <>\n            <p>No Transcription started!!</p>\n            <p>Please create a new Transcription or open an existing one.</p>\n          </>\n        }\n      ></View>\n    );\n  }\n}\n\nexport default DefaultPage;\n","import View from \"components/view/view\";\nimport React from \"react\";\n\nclass DrumPage extends React.Component {\n  render() {\n    return (\n      <View\n        title=\"Drums View\"\n        body={\n          <p>\n            In this section you&apos;ll be able to transcribe the drum part.\n            Please come back later.\n          </p>\n        }\n      ></View>\n    );\n  }\n}\n\nexport default DrumPage;\n","import View from \"components/view/view\";\nimport React from \"react\";\n\nclass GuitarPage extends React.Component {\n  render() {\n    return (\n      <View\n        title=\"Guitar\"\n        body={\n          <p>\n            In this section you&apos;ll be able to transcribe the guitar part.\n            Please come back later.\n          </p>\n        }\n      ></View>\n    );\n  }\n}\n\nexport default GuitarPage;\n","import View from \"components/view/view\";\nimport React from \"react\";\n\nclass HarmonyPage extends React.Component {\n  render() {\n    return (\n      <View\n        title=\"Harmony\"\n        body={\n          <p>\n            In this section you&apos;ll be able to transcribe the harmony.\n            Please come back later.\n          </p>\n        }\n      ></View>\n    );\n  }\n}\n\nexport default HarmonyPage;\n","import View from \"components/view/view\";\nimport React from \"react\";\n\nclass PrintPage extends React.Component {\n  render() {\n    return (\n      <View\n        title=\"Print\"\n        body={\n          <p>\n            In this section you&apos;ll be able to print the leadsheet. Please\n            come back later.\n          </p>\n        }\n      ></View>\n    );\n  }\n}\n\nexport default PrintPage;\n","import Grid from \"@material-ui/core/Grid\";\nimport React, { ReactElement } from \"react\";\n\ninterface Props {\n  topLeft: ReactElement;\n  topRight: ReactElement;\n  bottom?: ReactElement;\n}\n\nclass ContentLayout extends React.Component<Props> {\n  render() {\n    return (\n      <Grid container spacing={2} alignItems=\"stretch\">\n        <Grid item xs={10}>\n          {this.props.topLeft}\n        </Grid>\n        <Grid item xs={2}>\n          {this.props.topRight}\n        </Grid>\n        <Grid item xs={12}>\n          {this.props.bottom}\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nexport default ContentLayout;\n","import {\n  Box,\n  createStyles,\n  FormControl,\n  InputLabel,\n  Slider,\n  WithStyles,\n  withStyles\n} from \"@material-ui/core\";\nimport React from \"react\";\n\nconst styles = () =>\n  createStyles({\n    root: {\n      width: \"100%\"\n    }\n  });\n\ninterface Props {\n  title: string;\n  min: number;\n  max: number;\n  step: number;\n  value: number;\n  onChange: (event: React.ChangeEvent<{}>, value: number | number[]) => void;\n}\n\ntype PropsWithStyle = Props & WithStyles<typeof styles>;\n\nconst SliderInput = withStyles(styles)((props: PropsWithStyle) => {\n  return (\n    <FormControl className={props.classes.root}>\n      <InputLabel shrink>{props.title}</InputLabel>\n      <Box mt={2}>\n        <Slider\n          value={props.value}\n          valueLabelDisplay=\"auto\"\n          min={props.min}\n          max={props.max}\n          onChange={props.onChange}\n          step={props.step}\n        />\n      </Box>\n    </FormControl>\n  );\n});\n\nexport default SliderInput;\n","class ArrayUtil {\n  static range: (start: number, end: number) => string[] = (start, end) => {\n    if (start > end) start = end;\n\n    return Array(end - start + 1)\n      .fill(start)\n      .map((_, idx) => (start + idx).toString());\n  };\n\n  static bordersOf: (array: Array<string>) => { start: number; end: number } = (\n    array\n  ) => {\n    return {\n      start: parseInt(array[0]),\n      end: parseInt(ArrayUtil.last(array))\n    };\n  };\n\n  static last: <T>(array: Array<T>) => T = (array) => {\n    return array[array.length - 1];\n  };\n}\n\nexport default ArrayUtil;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport {\n  createdProject,\n  initializedProject\n} from \"states/project/projectSlice\";\nimport { NormalizedObjects } from \"states/store\";\nimport ArrayUtil from \"util/ArrayUtil\";\n\nimport {\n  distributeMeasures,\n  enclosingSectionOf,\n  generateSectionId,\n  mergeSections,\n  replaceSections,\n  sectionInvalid,\n  undefinedSection\n} from \"./analysisUtil\";\n\nexport interface AnalysisState {\n  readonly sections: NormalizedObjects<Section>;\n  readonly audioDuration: number;\n  readonly audioSampleRate: number;\n  readonly firstMeasureStart: number;\n  readonly timeSignature: TimeSignatureType;\n  readonly bpm: number;\n  readonly measures: NormalizedObjects<Measure>;\n}\n\nexport interface Section {\n  type: SectionType;\n  measures: string[];\n}\n\nexport interface Measure {\n  time: number;\n  editable?: boolean;\n  color?: string;\n  labelText?: string;\n  id: string;\n}\n\nexport interface TimeSignature {\n  beatsPerMeasure: number;\n  beatUnit: number;\n}\n\nexport enum TimeSignatureType {\n  FOUR_FOUR = \"FOUR_FOUR\",\n  THREE_FOUR = \"THREE_FOUR\"\n}\n\nexport enum SectionType {\n  INTRO = \"INTRO\",\n  VERSE = \"VERSE\",\n  PRECHORUS = \"PRECHORUS\",\n  CHORUS = \"CHORUS\",\n  BRIDGE = \"BRIDGE\",\n  SOLO = \"SOLO\",\n  OUTRO = \"OUTRO\",\n  UNDEFINED = \"UNDEFINED\"\n}\n\nexport const initialAnalysisState: AnalysisState = {\n  sections: { allIds: [], byId: {} },\n  bpm: 120,\n  firstMeasureStart: 0,\n  audioDuration: 180,\n  audioSampleRate: 44400,\n  measures: { allIds: [], byId: {} },\n  timeSignature: TimeSignatureType.FOUR_FOUR\n};\n\nconst analysisSlice = createSlice({\n  name: \"analysis\",\n  initialState: initialAnalysisState,\n  extraReducers: (builder) =>\n    builder\n      .addCase(createdProject, (state, action) => {\n        return action.payload.analysis;\n      })\n      .addCase(initializedProject, (state, action) => {\n        state.audioDuration = action.payload.audioDuration;\n        state.audioSampleRate = action.payload.audioSampleRate;\n\n        state.measures = distributeMeasures(\n          state.timeSignature,\n          state.bpm,\n          state.firstMeasureStart,\n          state.audioDuration\n        );\n\n        if (state.sections.allIds.length === 0)\n          state.sections = undefinedSection(state.measures.allIds.length - 1);\n      }),\n  reducers: {\n    addedSection(state, action: PayloadAction<Section>) {\n      return addSection(state, action.payload);\n    },\n    updatedSection(\n      state,\n      action: PayloadAction<{ before: string; after: Section }>\n    ) {\n      removeSection(state, action.payload.before);\n      return addSection(state, action.payload.after);\n    },\n    removedSection(state, action: PayloadAction<string>) {\n      removeSection(state, action.payload);\n\n      return state;\n    },\n    updatedRhythm(\n      state,\n      action: PayloadAction<{\n        firstMeasureStart?: number;\n        bpm?: number;\n        timeSignatureType?: TimeSignatureType;\n      }>\n    ) {\n      state.bpm = action.payload.bpm ?? state.bpm;\n      state.firstMeasureStart =\n        action.payload.firstMeasureStart ?? state.firstMeasureStart;\n      state.timeSignature =\n        action.payload.timeSignatureType ?? state.timeSignature;\n\n      state.measures = distributeMeasures(\n        state.timeSignature,\n        state.bpm,\n        state.firstMeasureStart,\n        state.audioDuration\n      );\n\n      const lastSection =\n        state.sections.byId[\n          state.sections.allIds[state.sections.allIds.length - 1]\n        ];\n\n      if (lastSection === undefined) return state;\n\n      if (\n        parseInt(ArrayUtil.last(state.measures.allIds)) >\n        parseInt(lastSection.measures[lastSection.measures.length - 1])\n      ) {\n        const newLastSection: Section = {\n          type: lastSection.type,\n          measures: ArrayUtil.range(\n            parseInt(lastSection.measures[0]),\n            parseInt(ArrayUtil.last(state.measures.allIds))\n          )\n        };\n        const id = generateSectionId(newLastSection);\n        delete state.sections.byId[\n          state.sections.allIds[state.sections.allIds.length - 1]\n        ];\n        state.sections.allIds[state.sections.allIds.length - 1] = id;\n        state.sections.byId[id] = newLastSection;\n      }\n\n      removeSectionsAfterLastMeasure(state);\n\n      return state;\n    }\n  }\n});\n\nconst removeSectionsAfterLastMeasure: (state: AnalysisState) => void = (\n  state\n) => {\n  const lastMeasure = state.measures.allIds.length - 1;\n  let removalStart = -1;\n  let removalStartMeasure = -1;\n\n  for (let index = 0; index <= state.sections.allIds.length - 1; index++) {\n    const section = state.sections.byId[state.sections.allIds[index]];\n    const sectionEnd = parseInt(ArrayUtil.last(section.measures));\n\n    if (sectionEnd > lastMeasure) {\n      removalStart = index;\n      removalStartMeasure = parseInt(section.measures[0]);\n      break;\n    }\n  }\n\n  if (removalStart === -1) return; // No sections after last measure\n\n  replaceSections(\n    state.sections,\n    removalStart,\n    state.sections.allIds.length - removalStart,\n    [\n      {\n        measures: ArrayUtil.range(removalStartMeasure, lastMeasure),\n        type: SectionType.UNDEFINED\n      }\n    ]\n  );\n};\n\nconst addSection: (\n  state: AnalysisState,\n  newSection: Section\n) => AnalysisState = (state, newSection) => {\n  if (sectionInvalid(newSection)) return state;\n\n  const enclosingSection = enclosingSectionOf(newSection, state.sections);\n  if (\n    enclosingSection === undefined ||\n    enclosingSection.section.type !== SectionType.UNDEFINED\n  )\n    return state;\n\n  const mergedSections = mergeSections(enclosingSection.section, newSection);\n\n  replaceSections(state.sections, enclosingSection.position, 1, mergedSections);\n\n  return state;\n};\n\nconst removeSection: (state: AnalysisState, sectionId: string) => void = (\n  state,\n  sectionId\n) => {\n  const position = state.sections.allIds.indexOf(sectionId);\n  const section = state.sections.byId[sectionId];\n\n  const before = state.sections.allIds[position - 1];\n  const after = state.sections.allIds[position + 1];\n\n  let { start: firstMeasure, end: lastMeasure } = ArrayUtil.bordersOf(\n    section.measures\n  );\n  let removalStart = position;\n  let removalCount = 1;\n\n  if (\n    before !== undefined &&\n    state.sections.byId[before].type === SectionType.UNDEFINED\n  ) {\n    removalStart--;\n    removalCount++;\n    firstMeasure = parseInt(state.sections.byId[before].measures[0]);\n  }\n\n  if (\n    after !== undefined &&\n    state.sections.byId[after].type === SectionType.UNDEFINED\n  ) {\n    removalCount++;\n    lastMeasure = parseInt(ArrayUtil.last(state.sections.byId[after].measures));\n  }\n\n  replaceSections(state.sections, removalStart, removalCount, [\n    {\n      measures: ArrayUtil.range(firstMeasure, lastMeasure),\n      type: SectionType.UNDEFINED\n    }\n  ]);\n};\n\nexport const {\n  addedSection,\n  removedSection,\n  updatedRhythm,\n  updatedSection\n} = analysisSlice.actions;\n\nexport default analysisSlice.reducer;\n","import { NormalizedObjects } from \"states/store\";\nimport ArrayUtil from \"util/ArrayUtil\";\n\nimport {\n  Measure,\n  Section,\n  SectionType,\n  TimeSignatureType\n} from \"./analysisSlice\";\n\nexport const toTimeSignature = (type: TimeSignatureType) => {\n  switch (type) {\n    case TimeSignatureType.FOUR_FOUR:\n      return { beatUnit: 4, beatsPerMeasure: 4 };\n    case TimeSignatureType.THREE_FOUR:\n      return { beatUnit: 4, beatsPerMeasure: 3 };\n  }\n};\n\nexport const toTimeSignatureType = (type: string) => {\n  switch (type) {\n    case TimeSignatureType.FOUR_FOUR.toString():\n      return TimeSignatureType.FOUR_FOUR;\n    case TimeSignatureType.THREE_FOUR.toString():\n      return TimeSignatureType.THREE_FOUR;\n    default:\n      throw Error(\"Unknown time signature type: \" + type);\n  }\n};\n\nexport const undefinedSection = (length: number) => {\n  const undefinedSectionId = \"UNDEFINED_0_\" + length;\n  const sections: NormalizedObjects<Section> = {\n    allIds: [undefinedSectionId],\n    byId: {}\n  };\n\n  sections.byId[undefinedSectionId] = {\n    measures: ArrayUtil.range(0, length),\n    type: SectionType.UNDEFINED\n  };\n\n  return sections;\n};\n\nexport const sectionInvalid = (section: Section) => {\n  return (\n    parseInt(section.measures[0]) >\n    parseInt(section.measures[section.measures.length - 1])\n  );\n};\n\nexport const enclosingSectionOf = (\n  section: Section,\n  allSections: NormalizedObjects<Section>\n) => {\n  const { start: newSectionStart, end: newSectionEnd } = ArrayUtil.bordersOf(\n    section.measures\n  );\n\n  const sectionCount = allSections.allIds.length;\n\n  for (let current = 0; current <= sectionCount - 1; current++) {\n    const section = allSections.byId[allSections.allIds[current]];\n    const { end: currentSectionEnd } = ArrayUtil.bordersOf(section.measures);\n\n    //Go to next section if not included\n    if (newSectionStart >= currentSectionEnd) continue;\n\n    //Exit if new section overlaps current section's border\n    if (newSectionEnd > currentSectionEnd) return undefined;\n\n    return { position: current, section: section };\n  }\n};\n\nexport const mergeSections: (\n  enclosingSection: Section,\n  embeddedSection: Section\n) => Section[] = (enclosingSection, embeddedSection) => {\n  const newSections: Section[] = [];\n\n  const { start: newSectionStart, end: newSectionEnd } = ArrayUtil.bordersOf(\n    embeddedSection.measures\n  );\n\n  const {\n    start: currentSectionStart,\n    end: currentSectionEnd\n  } = ArrayUtil.bordersOf(enclosingSection.measures);\n\n  //Add a new undefined block before the new section\n  if (newSectionStart > currentSectionStart) {\n    const section: Section = {\n      measures: ArrayUtil.range(currentSectionStart, newSectionStart - 1),\n      type: SectionType.UNDEFINED\n    };\n    newSections.push(section);\n  }\n\n  //add new section\n  newSections.push(embeddedSection);\n\n  //Add a new undefined block after the new section\n  if (newSectionEnd < currentSectionEnd) {\n    const section: Section = {\n      measures: ArrayUtil.range(newSectionEnd + 1, currentSectionEnd),\n      type: SectionType.UNDEFINED\n    };\n    newSections.push(section);\n  }\n\n  return newSections;\n};\n\nexport const replaceSections = (\n  sections: NormalizedObjects<Section>,\n  start: number,\n  deleteCount: number,\n  newSections: Section[]\n) => {\n  for (let section = start; section < deleteCount; section++) {\n    delete sections.byId[sections.allIds[section]];\n  }\n\n  const ids: string[] = [];\n\n  newSections.forEach((section) => {\n    const id = generateSectionId(section);\n    ids.push(id);\n    sections.byId[id] = section;\n  });\n\n  sections.allIds.splice(start, deleteCount, ...ids);\n};\n\nexport const generateSectionId = (section: Section) =>\n  section.type +\n  \"_\" +\n  section.measures[0] +\n  \"_\" +\n  section.measures[section.measures.length - 1];\n\nexport const distributeMeasures = (\n  timeSignatureType: TimeSignatureType,\n  bpm: number,\n  firstMeasureStart: number,\n  length: number\n) => {\n  const timeSignature = toTimeSignature(timeSignatureType);\n  const lengthOfOneMeasure = (60 * timeSignature.beatsPerMeasure) / bpm;\n  const measures: NormalizedObjects<Measure> = { allIds: [], byId: {} };\n\n  let index = 0;\n  for (\n    let start = firstMeasureStart;\n    start < length;\n    start += lengthOfOneMeasure\n  ) {\n    measures.allIds.push(\"\" + index);\n    measures.byId[index] = {\n      time: start,\n      color: \"\",\n      editable: false,\n      id: \"\" + index,\n      labelText: \"\" + index\n    };\n    index++;\n  }\n\n  return measures;\n};\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\nexport interface DialogState {\n  readonly currentDialog: DialogType;\n}\n\nexport enum DialogType {\n  NONE = \"none\",\n  NEW = \"new\",\n  OPEN = \"open\",\n  SAVE = \"save\",\n  ADD_SECTION = \"add_section\"\n}\n\nconst initialDialogState: DialogState = {\n  currentDialog: DialogType.NONE\n};\n\nconst dialogsSlice = createSlice({\n  name: \"dialogs\",\n  initialState: initialDialogState,\n  reducers: {\n    openedDialog(state, action: PayloadAction<DialogType>) {\n      state.currentDialog = action.payload;\n    },\n    closedDialog(state) {\n      state.currentDialog = DialogType.NONE;\n    }\n  }\n});\n\nexport const { openedDialog, closedDialog } = dialogsSlice.actions;\n\nexport default dialogsSlice.reducer;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\nexport interface AudioState {\n  readonly isPlaying: boolean;\n  readonly detune: number;\n  readonly playbackRate: number;\n  readonly isLooping: boolean;\n  readonly loopStart: number;\n  readonly loopEnd: number;\n}\n\nexport interface PlaybackSettings {\n  readonly detune?: number;\n  readonly playbackRate?: number;\n}\n\nexport const initialAudioState: AudioState = {\n  isPlaying: false,\n  detune: 0,\n  playbackRate: 1,\n  isLooping: false,\n  loopStart: 0,\n  loopEnd: 0\n};\n\nconst audioSlice = createSlice({\n  name: \"audio\",\n  initialState: initialAudioState,\n  reducers: {\n    triggeredPlay(state) {\n      state.isPlaying = true;\n    },\n    triggeredPause(state) {\n      state.isPlaying = false;\n    },\n    updatedPlaybackSettings(\n      state,\n      action: PayloadAction<{ playbackRate?: number; detune?: number }>\n    ) {\n      if (action.payload.detune !== undefined)\n        state.detune = action.payload.detune;\n      if (action.payload.playbackRate !== undefined)\n        state.playbackRate = action.payload.playbackRate;\n    },\n    toggledLoop(state) {\n      state.isLooping = !state.isLooping;\n    },\n    updatedLoopSettings(\n      state,\n      action: PayloadAction<{ start?: number; end?: number }>\n    ) {\n      if (action.payload.start !== undefined)\n        state.loopStart = action.payload.start;\n      if (action.payload.end !== undefined) state.loopEnd = action.payload.end;\n    }\n  }\n});\n\nexport const {\n  triggeredPause,\n  triggeredPlay,\n  updatedPlaybackSettings,\n  toggledLoop,\n  updatedLoopSettings\n} = audioSlice.actions;\n\nexport default audioSlice.reducer;\n","import {\n  createStyles,\n  MenuItem,\n  Theme,\n  WithStyles,\n  withStyles\n} from \"@material-ui/core\";\nimport Select from \"@material-ui/core/Select/Select\";\nimport React from \"react\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      minWidth: theme.measureSelect.minWidth\n    }\n  });\n\ninterface Props extends WithStyles<typeof styles> {\n  value: number;\n  min: number;\n  max: number;\n  onChange: (value: number) => void;\n  disabled?: boolean;\n}\n\nconst MeasureSelect = withStyles(styles)((props: Props) => {\n  const handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n    const newMeasure = event.target.value as number;\n    props.onChange(newMeasure);\n  };\n\n  return (\n    <Select\n      value={props.value}\n      onChange={handleChange}\n      className={props.classes.root}\n      disabled={props.disabled}\n    >\n      {new Array<number>(props.max - props.min + 1)\n        .fill(0)\n        .map((_, idx: number) => {\n          return (\n            <MenuItem key={props.min + idx} value={props.min + idx}>\n              {props.min + idx}\n            </MenuItem>\n          );\n        })}\n    </Select>\n  );\n});\n\nexport default MeasureSelect;\n","import blueGrey from \"@material-ui/core/colors/blueGrey\";\nimport { createMuiTheme } from \"@material-ui/core/styles\";\nimport { Theme } from \"@material-ui/core/styles/createMuiTheme\";\nimport { SectionType } from \"states/analysis/analysisSlice\";\n\n// Extend Material UI theme type declaration\ndeclare module \"@material-ui/core/styles/createMuiTheme\" {\n  // add custom theme options\n  interface ThemeOptions {\n    logo: {\n      height: React.CSSProperties[\"height\"];\n      marginRight: React.CSSProperties[\"marginRight\"];\n    };\n    popover: {\n      width: React.CSSProperties[\"width\"];\n      minHeight: React.CSSProperties[\"minHeight\"];\n      margin: React.CSSProperties[\"margin\"];\n      marginTop: React.CSSProperties[\"marginTop\"];\n    };\n    measureSelect: {\n      minWidth: React.CSSProperties[\"minWidth\"];\n    };\n    formControl: {\n      marginBottom: React.CSSProperties[\"marginBottom\"];\n    };\n    sectionTypes: {\n      INTRO: React.CSSProperties[\"color\"];\n      VERSE: React.CSSProperties[\"color\"];\n      PRECHORUS: React.CSSProperties[\"color\"];\n      CHORUS: React.CSSProperties[\"color\"];\n      SOLO: React.CSSProperties[\"color\"];\n      OUTRO: React.CSSProperties[\"color\"];\n      BRIDGE: React.CSSProperties[\"color\"];\n      UNDEFINED: React.CSSProperties[\"color\"];\n    };\n    sectionSelect: {\n      minWidth: React.CSSProperties[\"minWidth\"];\n    };\n    view: {\n      background: React.CSSProperties[\"color\"];\n      headerBackground: React.CSSProperties[\"color\"];\n      headerPadding: React.CSSProperties[\"padding\"];\n    };\n    waveform: {\n      pointMarkerColor: React.CSSProperties[\"color\"];\n    };\n  }\n\n  // make custom theme options available in theme\n  interface Theme extends ThemeOptions {}\n}\n\n// A custom theme for this app\nconst theme = createMuiTheme({\n  palette: {\n    type: \"light\",\n    primary: blueGrey,\n    background: {\n      default: \"#d5d8da\"\n    }\n  },\n  logo: {\n    height: \"40px\",\n    marginRight: \"5px\"\n  },\n  popover: {\n    width: \"200px\",\n    minHeight: \"50px\",\n    margin: \"10px\",\n    marginTop: \"20px\"\n  },\n  measureSelect: {\n    minWidth: \"40px\"\n  },\n  formControl: {\n    marginBottom: \"20px\"\n  },\n  sectionTypes: {\n    INTRO: \"#FFCA28\",\n    VERSE: \"#FFA726\",\n    PRECHORUS: \"#FF7043\",\n    CHORUS: \"#9CCC65\",\n    SOLO: \"#26C6DA\",\n    OUTRO: \"#5C6BC0\",\n    BRIDGE: \"#EC407A\",\n    UNDEFINED: \"#f2f2f2\"\n  },\n  sectionSelect: {\n    minWidth: \"140px\"\n  },\n  view: {\n    background: \"#ffffff\",\n    headerBackground: \"#f1f4f6\",\n    headerPadding: \"4px\"\n  },\n  waveform: {\n    pointMarkerColor: \"#006eb0\"\n  },\n  overrides: {\n    MuiListItemIcon: {\n      root: {\n        color: \"#abb1b7\"\n      }\n    }\n  }\n});\n\nexport const getColor = (sectionType: SectionType) => {\n  const result = SECTIONTYPE_TO_COLOR.get(sectionType);\n\n  if (!result) throw Error(\"Unknown SectionType \" + sectionType);\n\n  return result;\n};\n\nconst SECTIONTYPE_TO_COLOR = new Map<SectionType, React.CSSProperties[\"color\"]>(\n  [\n    [SectionType.INTRO, theme.sectionTypes.INTRO],\n    [SectionType.VERSE, theme.sectionTypes.VERSE],\n    [SectionType.PRECHORUS, theme.sectionTypes.PRECHORUS],\n    [SectionType.CHORUS, theme.sectionTypes.CHORUS],\n    [SectionType.SOLO, theme.sectionTypes.SOLO],\n    [SectionType.OUTRO, theme.sectionTypes.OUTRO],\n    [SectionType.BRIDGE, theme.sectionTypes.BRIDGE],\n    [SectionType.UNDEFINED, theme.sectionTypes.UNDEFINED]\n  ]\n) as ReadonlyMap<SectionType, string>;\n\nexport default theme;\n","import {\n  createStyles,\n  MenuItem,\n  Theme,\n  WithStyles,\n  withStyles\n} from \"@material-ui/core\";\nimport Select from \"@material-ui/core/Select/Select\";\nimport clsx from \"clsx\";\nimport React from \"react\";\nimport { SectionType } from \"states/analysis/analysisSlice\";\nimport { getColor } from \"styles/theme\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      minWidth: theme.sectionSelect.minWidth\n    },\n    colored: {\n      backgroundColor: (props: Props) => getColor(props.value)\n    }\n  });\n\ninterface Props {\n  value: SectionType;\n  onChange: (sectionType: SectionType) => void;\n}\n\ntype PropsWithStyle = Props & WithStyles<typeof styles>;\n\nconst SectionSelect = withStyles(styles)((props: PropsWithStyle) => {\n  const handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n    const newSection = event.target.value as SectionType;\n    props.onChange(newSection);\n  };\n\n  return (\n    <Select\n      value={props.value}\n      onChange={handleChange}\n      className={clsx(props.classes.root, props.classes.colored)}\n    >\n      {Object.values(SectionType).map((sectionType) => {\n        return sectionType === SectionType.UNDEFINED ? undefined : (\n          <MenuItem\n            key={sectionType}\n            value={sectionType}\n            // eslint-disable-next-line react/forbid-component-props\n            style={{ backgroundColor: getColor(sectionType) }}\n          >\n            {sectionType}\n          </MenuItem>\n        );\n      })}\n    </Select>\n  );\n});\n\nexport default SectionSelect;\n","import {\n  createStyles,\n  IconButton,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  WithStyles,\n  withStyles\n} from \"@material-ui/core\";\nimport RemoveIcon from \"@material-ui/icons/Remove\";\nimport Log from \"components/log/log\";\nimport MeasureSelect from \"components/measureSelect/measureSelect\";\nimport SectionSelect from \"components/sectionSelect/sectionSelect\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  addedSection,\n  removedSection,\n  Section,\n  SectionType,\n  updatedSection\n} from \"states/analysis/analysisSlice\";\nimport { ApplicationState, NormalizedObjects } from \"states/store\";\nimport ArrayUtil from \"util/ArrayUtil\";\n\ninterface PropsFromState {\n  readonly sections: NormalizedObjects<Section>;\n  readonly measuresCount: number;\n}\n\ninterface PropsFromDispatch {\n  addedSection: typeof addedSection;\n  updatedSection: typeof updatedSection;\n  removedSection: typeof removedSection;\n}\n\ntype AllProps = PropsFromState & PropsFromDispatch & WithStyles<typeof styles>;\n\nclass StructureView extends Component<AllProps> {\n  handleAddSection = (section: Section) => {\n    this.props.addedSection(section);\n  };\n\n  handleUpdatedSection = (id: string, before: Section, after: Section) => {\n    Log.info(\n      \"Change section \" +\n        id +\n        \" from \" +\n        JSON.stringify(before) +\n        \" to \" +\n        JSON.stringify(after),\n      StructureView.name\n    );\n\n    if (\n      parseInt(after.measures[0]) >\n      parseInt(after.measures[after.measures.length - 1])\n    )\n      return;\n\n    this.props.updatedSection({ before: id, after });\n  };\n\n  handleRemoveSection = (id: string) => {\n    this.props.removedSection(id);\n  };\n\n  render() {\n    return (\n      <TableContainer component={Paper}>\n        <Table size=\"small\">\n          <TableHead>\n            <TableRow>\n              <TableCell className={this.props.classes.column1}></TableCell>\n              <TableCell className={this.props.classes.column2}>\n                Section\n              </TableCell>\n              <TableCell className={this.props.classes.column3}>\n                First Measure\n              </TableCell>\n              <TableCell className={this.props.classes.column4}>\n                Last Measure\n              </TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {this.props.sections.allIds.map((id: string) => {\n              const section = this.props.sections.byId[id];\n              return (\n                <TableRow key={id}>\n                  <TableCell component=\"th\" scope=\"row\">\n                    {section.type !== SectionType.UNDEFINED && (\n                      <IconButton\n                        onClick={() => this.handleRemoveSection(id)}\n                        size=\"small\"\n                      >\n                        <RemoveIcon></RemoveIcon>\n                      </IconButton>\n                    )}\n                  </TableCell>\n                  <TableCell>\n                    {section.type === SectionType.UNDEFINED ? (\n                      \"UNDEFINED\"\n                    ) : (\n                      <SectionSelect\n                        value={section.type}\n                        onChange={(sectionType) =>\n                          this.handleUpdatedSection(id, section, {\n                            ...section,\n                            type: sectionType\n                          })\n                        }\n                      ></SectionSelect>\n                    )}\n                  </TableCell>\n                  <TableCell>\n                    <MeasureSelect\n                      disabled={section.type === SectionType.UNDEFINED}\n                      value={parseInt(section.measures[0])}\n                      min={0}\n                      max={this.props.measuresCount - 1}\n                      onChange={(measure) =>\n                        this.handleUpdatedSection(id, section, {\n                          ...section,\n                          measures: ArrayUtil.range(\n                            measure,\n                            parseInt(\n                              section.measures[section.measures.length - 1]\n                            )\n                          )\n                        })\n                      }\n                    />\n                  </TableCell>\n                  <TableCell>\n                    <MeasureSelect\n                      disabled={section.type === SectionType.UNDEFINED}\n                      value={parseInt(\n                        section.measures[section.measures.length - 1]\n                      )}\n                      min={0}\n                      max={this.props.measuresCount - 1}\n                      onChange={(measure) =>\n                        this.handleUpdatedSection(id, section, {\n                          ...section,\n                          measures: ArrayUtil.range(\n                            parseInt(section.measures[0]),\n                            measure\n                          )\n                        })\n                      }\n                    />\n                  </TableCell>\n                </TableRow>\n              );\n            })}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    );\n  }\n}\n\nconst mapStateToProps = ({ analysis }: ApplicationState) => {\n  return {\n    sections: analysis.sections,\n    measuresCount: analysis.measures.allIds.length\n  };\n};\n\nconst mapDispatchToProps = {\n  addedSection,\n  updatedSection,\n  removedSection\n};\n\nconst styles = () =>\n  createStyles({\n    column1: {\n      width: \"10%\"\n    },\n    column2: {\n      width: \"30%\"\n    },\n    column3: {\n      width: \"30%\"\n    },\n    column4: {\n      width: \"30%\"\n    }\n  });\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withStyles(styles, { withTheme: true })(StructureView));\n","import {\n  Button,\n  ButtonGroup,\n  createStyles,\n  Grid,\n  Typography,\n  WithStyles,\n  withStyles\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Measure, Section, SectionType } from \"states/analysis/analysisSlice\";\nimport { updatedLoopSettings } from \"states/audio/audioSlice\";\nimport { ApplicationState, NormalizedObjects } from \"states/store\";\nimport { getColor } from \"styles/theme\";\n\ninterface PropsFromState {\n  sections: NormalizedObjects<Section>;\n  measures: NormalizedObjects<Measure>;\n}\n\ninterface PropsFromDispatch {\n  updatedLoopSettings: typeof updatedLoopSettings;\n}\n\ninterface Props {}\n\ntype AllProps = PropsFromState &\n  PropsFromDispatch &\n  Props &\n  WithStyles<typeof styles>;\n\nconst styles = () =>\n  createStyles({\n    mainGrid: {\n      marginBottom: \"5px\"\n    },\n    section: {}\n  });\n\nclass SectionOverview extends React.Component<AllProps> {\n  render() {\n    const { sections, measures } = this.props;\n\n    const generateMatrix = (arr: string[], size: number) => {\n      const res = [];\n      for (let i = 0; i < arr.length; i = i + size)\n        res.push(arr.slice(i, i + size));\n      return res;\n    };\n\n    return (\n      <>\n        <Grid container direction=\"column\">\n          {sections.allIds.map((sectionId) => (\n            <Grid item key={sectionId}>\n              <Grid container direction=\"column\">\n                <Grid item key={sectionId + \"_caption\"}>\n                  <Typography variant=\"caption\">\n                    {sections.byId[sectionId].type.toLowerCase()}\n                  </Typography>\n                </Grid>\n                <Grid item key={sectionId + \"_body\"}>\n                  <Grid\n                    container\n                    direction=\"column\"\n                    className={this.props.classes.mainGrid}\n                  >\n                    {generateMatrix(sections.byId[sectionId].measures, 8).map(\n                      (row) => (\n                        <ButtonGroup\n                          key={sectionId + \"_buttonGroup_\" + row[0]}\n                          orientation=\"horizontal\"\n                          size=\"small\"\n                          className={this.props.classes.section}\n                        >\n                          {row.map((measureId) => {\n                            const measure: Measure = measures.byId[measureId];\n                            const nextMeasure: Measure =\n                              measures.byId[Number(measureId) + 1];\n                            return (\n                              <Square\n                                key={measure.id}\n                                value={measure.id}\n                                sectionType={sections.byId[sectionId].type}\n                                onClick={() =>\n                                  this.props.updatedLoopSettings({\n                                    start: measure.time,\n                                    end: nextMeasure.time\n                                  })\n                                }\n                              ></Square>\n                            );\n                          })}\n                        </ButtonGroup>\n                      )\n                    )}\n                  </Grid>\n                </Grid>\n              </Grid>\n            </Grid>\n          ))}\n        </Grid>\n      </>\n    );\n  }\n}\n\nconst squareStyles = () =>\n  createStyles({\n    root: {\n      backgroundColor: (props: SquareProps) => getColor(props.sectionType),\n      minWidth: \"12%\",\n      minHeight: \"15px\",\n      padding: \"0px\",\n      marginLeft: \"2px\",\n      marginBottom: \"2px\"\n    }\n  });\n\ninterface SquareProps {\n  value: string;\n  sectionType: SectionType;\n  onClick: () => void;\n}\n\ntype SquarePropsWithStyle = SquareProps & WithStyles<typeof squareStyles>;\n\nconst Square = withStyles(squareStyles)((props: SquarePropsWithStyle) => {\n  return (\n    <Button\n      {...props}\n      onClick={() => props.onClick()}\n      className={props.classes.root}\n    >\n      {props.value}\n    </Button>\n  );\n});\n\nconst mapStateToProps = ({ analysis }: ApplicationState) => {\n  return {\n    sections: analysis.sections,\n    measures: analysis.measures\n  };\n};\n\nconst mapDispatchToProps = { updatedLoopSettings };\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withStyles(styles, { withTheme: true })(SectionOverview));\n","/* eslint-disable react/forbid-component-props */\nimport { Grid } from \"@material-ui/core\";\nimport SectionOverview from \"components/sectionOverview/sectionOverview\";\nimport React, { Component } from \"react\";\n\nclass StructureNavigationView extends Component<{}> {\n  render() {\n    return (\n      <Grid\n        container\n        direction=\"column\"\n        justify=\"center\"\n        alignItems=\"center\"\n        alignContent=\"stretch\"\n      >\n        <Grid style={{ width: \"100%\" }}>\n          <SectionOverview></SectionOverview>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nexport default StructureNavigationView;\n","import { PointAddOptions, SegmentAddOptions } from \"peaks.js\";\nimport { Measure, Section } from \"states/analysis/analysisSlice\";\nimport { NormalizedObjects } from \"states/store\";\nimport theme, { getColor } from \"styles/theme\";\n\nexport const AUDIO_DOM_ELEMENT = \"audio_dom_element\";\nexport const ZOOMVIEW_CONTAINER = \"zoomview-container\";\nexport const OVERVIEW_CONTAINER = \"overview-container\";\n\nclass PeaksConfig {\n  static create = (audioBuffer: AudioBuffer) => {\n    const mediaelement: HTMLAudioElement = document.getElementById(\n      AUDIO_DOM_ELEMENT\n    ) as HTMLAudioElement;\n\n    return {\n      containers: {\n        zoomview: document.getElementById(ZOOMVIEW_CONTAINER),\n        overview: document.getElementById(OVERVIEW_CONTAINER)\n      },\n      mediaElement: mediaelement,\n      webAudio: {\n        audioBuffer: audioBuffer,\n        scale: 128,\n        multiChannel: false\n      },\n      keyboard: true,\n      pointMarkerColor: theme.waveform.pointMarkerColor,\n      showPlayheadTime: true,\n      zoomLevels: [42] //TODO: Define good initial default\n    };\n  };\n\n  static sectionsToSegment = (\n    sections: NormalizedObjects<Section>,\n    measures: NormalizedObjects<Measure>,\n    timePerMeasure: number\n  ) => {\n    const segments: SegmentAddOptions[] = [];\n    sections.allIds.forEach((id) => {\n      const section = sections.byId[id];\n\n      const start = measures.byId[section.measures[0]].time;\n      const end =\n        measures.byId[section.measures[section.measures.length - 1]].time +\n        timePerMeasure;\n\n      const segment: SegmentAddOptions = {\n        id,\n        labelText: section.type,\n        startTime: start,\n        endTime: end,\n        color: getColor(section.type),\n        editable: false\n      };\n\n      segments.push(segment);\n    });\n\n    return segments;\n  };\n\n  static measuresToPoints = (measures: NormalizedObjects<Measure>) => {\n    const points: PointAddOptions[] = [];\n    measures.allIds.forEach((id) => {\n      const measure = measures.byId[id];\n\n      const point: PointAddOptions = measure;\n\n      points.push(point);\n    });\n\n    return points;\n  };\n}\n\nexport default PeaksConfig;\n","import {\n  createStyles,\n  FormControl,\n  IconButton,\n  Input,\n  InputAdornment,\n  InputLabel,\n  NativeSelect,\n  Popover,\n  Theme,\n  Tooltip,\n  WithStyles,\n  withStyles\n} from \"@material-ui/core\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport BorderLeftIcon from \"@material-ui/icons/BorderLeft\";\nimport LoopIcon from \"@material-ui/icons/Loop\";\nimport MusicNoteIcon from \"@material-ui/icons/MusicNote\";\nimport PauseIcon from \"@material-ui/icons/Pause\";\nimport PlayArrowIcon from \"@material-ui/icons/PlayArrow\";\nimport SpeedIcon from \"@material-ui/icons/Speed\";\nimport SyncAltIcon from \"@material-ui/icons/SyncAlt\";\nimport TimerIcon from \"@material-ui/icons/Timer\";\nimport ToggleButton from \"@material-ui/lab/ToggleButton\";\nimport ContentLayout from \"components/contentLayout/contentLayout\";\nimport Log from \"components/log/log\";\nimport SliderInput from \"components/sliderInput/sliderInput\";\nimport View from \"components/view/view\";\nimport React, { ReactElement } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  TimeSignatureType,\n  updatedRhythm\n} from \"states/analysis/analysisSlice\";\nimport { toTimeSignatureType } from \"states/analysis/analysisUtil\";\nimport {\n  triggeredPause,\n  triggeredPlay,\n  updatedPlaybackSettings\n} from \"states/audio/audioSlice\";\nimport { DialogType, openedDialog } from \"states/dialog/dialogsSlice\";\nimport {\n  enabledSyncFirstMeasureStart,\n  LoadingStatus\n} from \"states/project/projectSlice\";\nimport { ApplicationState } from \"states/store\";\nimport StructureView from \"views/structure/structureView\";\nimport StructureNavigationView from \"views/structureNavigation/structureNavigationView\";\nimport WaveContainer from \"views/wave/waveContainer\";\n\ninterface PropsFromState {\n  readonly loaded: boolean;\n  readonly isPlaying: boolean;\n  readonly syncFirstMeasureStart: boolean;\n  readonly firstMeasureStart: number;\n  readonly timeSignature: TimeSignatureType;\n  readonly bpm: number;\n  readonly detune: number;\n  readonly playbackRate: number;\n}\n\ninterface PropsFromDispatch {\n  triggeredPlay: typeof triggeredPlay;\n  triggeredPause: typeof triggeredPause;\n  enabledSyncFirstMeasureStart: typeof enabledSyncFirstMeasureStart;\n  updatedRhythm: typeof updatedRhythm;\n  updatedPlaybackSettings: typeof updatedPlaybackSettings;\n  openedDialog: typeof openedDialog;\n}\n\ninterface Props extends WithStyles<typeof popoverStyles> {}\n\ntype AllProps = PropsFromState & PropsFromDispatch & Props;\n\ninterface State {\n  anchorEl: HTMLButtonElement | null;\n  activePopover: PopoverType;\n}\n\nenum PopoverType {\n  RHYTHM,\n  PLAYBACKRATE,\n  DETUNE,\n  STARTMEASURE,\n  NONE\n}\n\nclass StructurePage extends React.Component<AllProps, State> {\n  state: State = {\n    anchorEl: null,\n    activePopover: PopoverType.NONE\n  };\n\n  handlePopoverOpen = (\n    event: React.MouseEvent<HTMLButtonElement> | undefined,\n    type: PopoverType\n  ) => {\n    if (event && event.currentTarget)\n      this.setState({ anchorEl: event.currentTarget, activePopover: type });\n  };\n\n  handlePopoverClose = () => {\n    this.setState({ anchorEl: null, activePopover: PopoverType.NONE });\n  };\n\n  render() {\n    Log.info(\"render\", StructurePage.name);\n    return (\n      <ContentLayout\n        topLeft={\n          <View\n            title=\"Song Overview\"\n            body={<WaveContainer />}\n            action={\n              <>\n                {this.props.isPlaying ? (\n                  <WaveformControlButton\n                    title=\"Pause\"\n                    icon={<PauseIcon />}\n                    onClick={() => this.props.triggeredPause()}\n                  />\n                ) : (\n                  <WaveformControlButton\n                    title=\"Play\"\n                    icon={<PlayArrowIcon />}\n                    onClick={() => this.props.triggeredPlay()}\n                  />\n                )}\n\n                <WaveformControlButton\n                  title=\"Loop\"\n                  icon={<LoopIcon />}\n                  disabled={true}\n                />\n                <WaveformControlButton\n                  title=\"Rhythm & Metronome\"\n                  icon={<TimerIcon />}\n                  onClick={(e) => this.handlePopoverOpen(e, PopoverType.RHYTHM)}\n                  disabled={false}\n                />\n                <WaveformControlButton\n                  title=\"Playback Rate\"\n                  icon={<SpeedIcon />}\n                  onClick={(e) =>\n                    this.handlePopoverOpen(e, PopoverType.PLAYBACKRATE)\n                  }\n                  disabled={false}\n                />\n                <WaveformControlButton\n                  title=\"Detune\"\n                  icon={<MusicNoteIcon />}\n                  onClick={(e) => this.handlePopoverOpen(e, PopoverType.DETUNE)}\n                  disabled={false}\n                />\n                <Popover\n                  className={this.props.classes.popover}\n                  open={this.state.activePopover !== PopoverType.NONE}\n                  anchorEl={this.state.anchorEl}\n                  onClose={() => this.handlePopoverClose()}\n                  anchorOrigin={{\n                    vertical: \"bottom\",\n                    horizontal: \"left\"\n                  }}\n                  anchorPosition={{ top: 50, left: 0 }}\n                  transformOrigin={{\n                    vertical: \"top\",\n                    horizontal: \"center\"\n                  }}\n                >\n                  {this.state.activePopover !== PopoverType.NONE && (\n                    <div className={this.props.classes.content}>\n                      {PopoverContent(this.state.activePopover, this.props)}\n                    </div>\n                  )}\n                </Popover>\n              </>\n            }\n          ></View>\n        }\n        topRight={\n          <View title=\"Song Measures\" body={<StructureNavigationView />}></View>\n        }\n        bottom={\n          <View\n            title=\"Song Structure\"\n            action={\n              <>\n                <WaveformControlButton\n                  title=\"Start Measure 0\"\n                  icon={<BorderLeftIcon />}\n                  onClick={(e) =>\n                    this.handlePopoverOpen(e, PopoverType.STARTMEASURE)\n                  }\n                  disabled={false}\n                />\n                <WaveformControlButton\n                  title=\"Add section\"\n                  icon={<AddIcon />}\n                  onClick={() =>\n                    this.props.openedDialog(DialogType.ADD_SECTION)\n                  }\n                />\n              </>\n            }\n            body={<StructureView />}\n          ></View>\n        }\n      ></ContentLayout>\n    );\n  }\n}\n\nconst popoverStyles = (theme: Theme) =>\n  createStyles({\n    content: {\n      width: theme.popover.width,\n      minHeight: theme.popover.minHeight,\n      margin: theme.popover.margin,\n      marginTop: theme.popover.marginTop\n    },\n    popover: {\n      height: \"400px\"\n    }\n  });\n\nconst waveformControlButtonStyles = () =>\n  createStyles({\n    root: {\n      marginTop: \"8px\",\n      marginRight: \"5px\"\n    }\n  });\n\ninterface WaveformControlButtonProps {\n  title: string;\n  icon: ReactElement;\n  disabled?: boolean;\n  onClick?: (e?: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n}\n\nconst WaveformControlButton = withStyles(waveformControlButtonStyles)(\n  (\n    props: WaveformControlButtonProps &\n      WithStyles<typeof waveformControlButtonStyles>\n  ) => {\n    const button = (\n      <IconButton\n        className={props.classes.root}\n        onClick={props.onClick}\n        size=\"small\"\n        disabled={props.disabled}\n      >\n        {props.icon}\n      </IconButton>\n    );\n\n    if (props.disabled) return button;\n\n    return <Tooltip title={props.title}>{button}</Tooltip>;\n  }\n);\n\nconst PopoverContent = (type: PopoverType, props: AllProps) => {\n  switch (type) {\n    case PopoverType.DETUNE:\n      return <DetunePopover {...props} />;\n    case PopoverType.PLAYBACKRATE:\n      return <PlaybackRatePopover {...props} />;\n    case PopoverType.RHYTHM:\n      return <RhythmPopover {...props} />;\n    case PopoverType.STARTMEASURE:\n      return <StartMeasurePopover {...props} />;\n    default:\n      throw Error(\"Popup type undefined: \" + type);\n  }\n};\n\nconst RhythmPopover = (props: AllProps) => (\n  <>\n    <SliderInput\n      title=\"Bpm\"\n      value={props.bpm}\n      min={40}\n      max={220}\n      step={1}\n      onChange={(e, bpm) => {\n        if (!Array.isArray(bpm)) {\n          props.updatedRhythm({ bpm: bpm });\n        }\n      }}\n    ></SliderInput>\n    <FormControl fullWidth={true}>\n      <InputLabel>Time Signature</InputLabel>\n      <NativeSelect\n        value={props.timeSignature}\n        onChange={(e) =>\n          props.updatedRhythm({\n            timeSignatureType: toTimeSignatureType(e.target.value)\n          })\n        }\n      >\n        <option value={TimeSignatureType.FOUR_FOUR}>4/4</option>\n        <option value={TimeSignatureType.THREE_FOUR}>3/4</option>\n      </NativeSelect>\n    </FormControl>\n  </>\n);\nconst DetunePopover = (props: AllProps) => (\n  <SliderInput\n    title=\"Detune\"\n    value={props.detune}\n    min={-12}\n    max={12}\n    step={0.5}\n    onChange={(e, detune) => {\n      if (!Array.isArray(detune) && detune !== props.detune) {\n        props.updatedPlaybackSettings({ detune: detune });\n      }\n    }}\n  ></SliderInput>\n);\n\nconst startMeasurePopoverStyles = () =>\n  createStyles({\n    toggleButton: {\n      width: \"15px\",\n      height: \"25px\"\n    }\n  });\n\ninterface StartMeasurePopoverProps {\n  firstMeasureStart: number;\n  syncFirstMeasureStart: boolean;\n  enabledSyncFirstMeasureStart: typeof enabledSyncFirstMeasureStart;\n}\n\nconst StartMeasurePopover = withStyles(startMeasurePopoverStyles)(\n  (\n    props: StartMeasurePopoverProps &\n      WithStyles<typeof startMeasurePopoverStyles>\n  ) => (\n    <FormControl fullWidth={true}>\n      <InputLabel>Start Measure 1</InputLabel>\n      <Input\n        type=\"text\"\n        id=\"startMeasure1\"\n        value={props.firstMeasureStart}\n        startAdornment={\n          <InputAdornment position=\"start\">\n            <Tooltip\n              title=\"Toggle sync with mouse click.\n          If enabled, clicking into the waveform will update the start of measure 0 to the selected position.\"\n            >\n              <ToggleButton\n                className={props.classes.toggleButton}\n                value=\"check\"\n                selected={props.syncFirstMeasureStart}\n                onChange={() => {\n                  props.enabledSyncFirstMeasureStart(\n                    !props.syncFirstMeasureStart\n                  );\n                }}\n              >\n                <SyncAltIcon />\n              </ToggleButton>\n            </Tooltip>\n          </InputAdornment>\n        }\n      />\n    </FormControl>\n  )\n);\n\nconst PlaybackRatePopover = (props: AllProps) => (\n  <SliderInput\n    title=\"Playback rate\"\n    value={props.playbackRate}\n    min={0.4}\n    max={1.2}\n    step={0.05}\n    onChange={(e, playbackRate) => {\n      if (!Array.isArray(playbackRate) && playbackRate !== props.playbackRate) {\n        props.updatedPlaybackSettings({ playbackRate: playbackRate });\n      }\n    }}\n  ></SliderInput>\n);\n\nconst mapStateToProps = ({ project, audio, analysis }: ApplicationState) => {\n  return {\n    loaded: project.status === LoadingStatus.INITIALIZED,\n    isPlaying: audio.isPlaying,\n    firstMeasureStart: analysis.firstMeasureStart,\n    syncFirstMeasureStart: project.syncFirstMeasureStart,\n    bpm: analysis.bpm,\n    timeSignature: analysis.timeSignature,\n    detune: audio.detune,\n    playbackRate: audio.playbackRate\n  };\n};\n\nconst mapDispatchToProps = {\n  triggeredPlay,\n  triggeredPause,\n  enabledSyncFirstMeasureStart,\n  updatedRhythm,\n  updatedPlaybackSettings,\n  openedDialog\n};\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withStyles(popoverStyles, { withTheme: true })(StructurePage));\n","import {\n  OVERVIEW_CONTAINER,\n  ZOOMVIEW_CONTAINER\n} from \"components/audioManagement/peaksConfig\";\nimport Log from \"components/log/log\";\nimport React, { Component } from \"react\";\n\ninterface Props {\n  url: string;\n}\n\nexport default class WaveView extends Component<Props> {\n  shouldComponentUpdate(nextProps: Props) {\n    return nextProps.url !== this.props.url;\n  }\n\n  render() {\n    Log.info(\"render with url=\" + this.props.url, WaveView.name);\n    return (\n      <div>\n        <div id=\"waveform-container\">\n          <div id={ZOOMVIEW_CONTAINER}></div>\n          <div id={OVERVIEW_CONTAINER}></div>\n        </div>\n      </div>\n    );\n  }\n}\n","import CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Log from \"components/log/log\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { hotReloaded, LoadingStatus } from \"states/project/projectSlice\";\nimport { ApplicationState } from \"states/store\";\n\nimport WaveView from \"./waveView\";\n\ninterface PropsFromState {\n  audioLoaded: LoadingStatus;\n  audioUrl: string;\n}\n\ninterface PropsFromDispatch {\n  hotReloaded: typeof hotReloaded;\n}\n\ninterface Props {}\n\ntype AllProps = PropsFromState & PropsFromDispatch & Props;\n\nclass WaveContainer extends Component<AllProps> {\n  constructor(props: AllProps) {\n    super(props);\n\n    if (process.env.NODE_ENV !== \"production\" && props.audioUrl) {\n      Log.info(\"Hot reload with url=\" + props.audioUrl, WaveContainer.name);\n      this.props.hotReloaded();\n    }\n  }\n\n  render() {\n    Log.info(\n      \"render with props=\" + JSON.stringify(this.props),\n      WaveContainer.name\n    );\n\n    return (\n      <div>\n        {this.props.audioLoaded !== LoadingStatus.INITIALIZED && (\n          <CircularProgress />\n        )}\n        <WaveView url={this.props.audioUrl} />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = ({ project }: ApplicationState) => {\n  return {\n    audioUrl: project.audioUrl,\n    audioLoaded: project.status\n  };\n};\n\nconst mapDispatchToProps = {\n  hotReloaded\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WaveContainer);\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M339.063,60.817H228.938c-7.628,0-13.834,6.206-13.834,13.834v99.816l0,0c-4.47-2.616-9.666-4.123-15.208-4.123 c-16.658,0-30.21,13.552-30.21,30.209s13.552,30.209,30.21,30.209c16.657,0,30.209-13.552,30.209-30.209v-86.423h107.95v60.338 c-4.47-2.616-9.666-4.123-15.208-4.123c-16.657,0-30.209,13.552-30.209,30.209s13.552,30.209,30.209,30.209 s30.209-13.552,30.209-30.209V74.81l0,0C353.056,67.093,346.778,60.817,339.063,60.817z M199.896,215.759 c-8.387,0-15.209-6.822-15.209-15.208s6.822-15.208,15.209-15.208c8.385,0,15.208,6.822,15.208,15.208 S208.282,215.759,199.896,215.759z M322.848,215.759c-8.385,0-15.208-6.822-15.208-15.208s6.822-15.208,15.208-15.208 c8.386,0,15.208,6.822,15.208,15.208S331.232,215.759,322.848,215.759z M338.055,99.127H230.105V75.818h107.95v23.309H338.055z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M254.433,317.548h-97.159c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5h97.159c4.143,0,7.5-3.358,7.5-7.5 S258.577,317.548,254.433,317.548z\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M254.433,355.124h-97.159c-4.143,0-7.5,3.358-7.5,7.5c0,4.142,3.357,7.5,7.5,7.5h97.159c4.143,0,7.5-3.358,7.5-7.5 C261.934,358.482,258.577,355.124,254.433,355.124z\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M254.433,392.698h-97.159c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5h97.159c4.143,0,7.5-3.358,7.5-7.5 S258.577,392.698,254.433,392.698z\"\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M387.082,317.548h-97.16c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5h97.16c4.143,0,7.5-3.358,7.5-7.5 S391.226,317.548,387.082,317.548z\"\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M329.632,274.728c0-4.142-3.357-7.5-7.5-7.5h-97.16c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5h97.16 C326.274,282.228,329.632,278.87,329.632,274.728z\"\n});\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M387.082,355.124h-97.16c-4.143,0-7.5,3.358-7.5,7.5c0,4.142,3.357,7.5,7.5,7.5h97.16c4.143,0,7.5-3.358,7.5-7.5 C394.583,358.482,391.226,355.124,387.082,355.124z\"\n});\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M254.433,430.273h-97.159c-4.143,0-7.5,3.358-7.5,7.5c0,4.142,3.357,7.5,7.5,7.5h97.159c4.143,0,7.5-3.358,7.5-7.5 C261.934,433.631,258.577,430.273,254.433,430.273z\"\n});\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M444.04,0H289.236c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5H444.04c4.444,0,8.061,3.616,8.061,8.06v215.437 c0,4.142,3.357,7.5,7.5,7.5s7.5-3.358,7.5-7.5V23.061C467.102,10.346,456.757,0,444.04,0z\"\n});\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M459.602,266c-4.143,0-7.5,3.358-7.5,7.5v119.197c-4.693,0-151.358,0-162.179,0c-4.143,0-7.5,3.358-7.5,7.5 s3.357,7.5,7.5,7.5h59.335c-0.939,2.51-1.457,5.226-1.457,8.06v14.514h-57.878c-4.143,0-7.5,3.358-7.5,7.5 c0,4.142,3.357,7.5,7.5,7.5H347.8v51.725H122.344c-4.444,0-8.061-3.616-8.061-8.06V23.061c0-4.444,3.616-8.06,8.061-8.06h131.889 c4.143,0,7.5-3.358,7.5-7.5s-3.357-7.5-7.5-7.5H67.959l0,0C55.243,0,44.898,10.346,44.898,23.061v465.877 c0,12.716,10.346,23.061,23.061,23.061l0,0h287.341c0.041,0,0.08-0.005,0.12-0.006c2.005-0.033,3.861-0.87,5.184-2.191 l104.301-104.3c1.333-1.332,2.196-3.245,2.196-5.303V273.502C467.102,269.358,463.744,266,459.602,266z M100.736,496.999H67.959 c-4.444,0-8.06-3.616-8.06-8.06V23.061c0-4.444,3.615-8.06,8.06-8.06h32.777c-0.901,2.496-1.453,5.115-1.453,8.06v465.877 C99.283,491.82,99.815,494.448,100.736,496.999z M362.801,486.391v-70.632c0-4.444,3.615-8.06,8.06-8.06c7.587,0,62.354,0,70.633,0 C433.153,416.039,371.141,478.051,362.801,486.391z\"\n});\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref18 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref19 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref20 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref21 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref22 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref23 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref24 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref25 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref26 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar SvgLogo = function SvgLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    style: {\n      enableBackground: \"new 0 0 512 512\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#EADCD6\"\n    },\n    d: \"M107.736,489.624V23.576c0-8.598,6.969-15.567,15.567-15.567H68.896 c-8.598,0-15.567,6.969-15.567,15.567v466.047c0,8.598,6.969,15.567,15.567,15.567h54.405 C114.704,505.191,107.736,498.221,107.736,489.624z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#DDCDC7\"\n    },\n    d: \"M73.331,489.624V23.576c0-8.598,6.969-15.567,15.566-15.567H68.896 c-8.598,0-15.566,6.969-15.566,15.567v466.047c0,8.598,6.969,15.567,15.566,15.567h20.001 C80.301,505.191,73.331,498.221,73.331,489.624z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#EADCD6\"\n    },\n    d: \"M444.015,8.01H122.202c-8.598,0-15.567,6.969-15.567,15.567v466.047 c0,8.598,6.969,15.567,15.567,15.567h233.041l104.339-104.339c0-3.762,0-370.62,0-377.275C459.582,14.98,452.612,8.01,444.015,8.01z \"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#DDCDC7\"\n    },\n    d: \"M127.051,489.624V23.577c0-8.598,6.969-15.567,15.567-15.567h-20.415 c-8.597,0-15.566,6.969-15.566,15.567v466.047c0,8.598,6.969,15.567,15.566,15.567h20.415 C134.02,505.191,127.051,498.221,127.051,489.624z\"\n  }), /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#F8BF00\"\n    },\n    d: \"M353.931,107.32H230.98V75.342c0-3.498,2.836-6.333,6.333-6.333h110.125 c3.586,0,6.492,2.907,6.492,6.492v31.819H353.931z\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    style: {\n      fill: \"#F8BF00\"\n    },\n    cx: 201.212,\n    cy: 201.242,\n    r: 22.708\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    style: {\n      fill: \"#F8BF00\"\n    },\n    cx: 331.22,\n    cy: 201.242,\n    r: 22.708\n  })), /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#EFA603\"\n    },\n    d: \"M257.315,69.008h-20.001c-3.498,0-6.333,2.836-6.333,6.333v31.977h20.001V75.342 C250.981,71.844,253.817,69.008,257.315,69.008z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#EFA603\"\n    },\n    d: \"M198.503,201.242c0-8.952,5.181-16.691,12.708-20.389c-3.018-1.483-6.411-2.319-10.001-2.319 c-12.542,0-22.708,10.167-22.708,22.708c0,12.542,10.167,22.708,22.708,22.708c3.589,0,6.982-0.836,10.001-2.319 C203.685,217.933,198.503,210.195,198.503,201.242z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#EFA603\"\n    },\n    d: \"M328.516,201.242c0-8.952,5.181-16.691,12.708-20.389c-3.018-1.483-6.411-2.319-10.001-2.319 c-12.542,0-22.708,10.167-22.708,22.708c0,12.542,10.167,22.708,22.708,22.708c3.589,0,6.982-0.836,10.001-2.319 C333.697,217.933,328.516,210.195,328.516,201.242z\"\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#DDCDC7\"\n    },\n    d: \"M459.582,400.852h-88.772c-8.598,0-15.567,6.969-15.567,15.567v88.772L459.582,400.852z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#C9BCB8\"\n    },\n    d: \"M375.245,416.418c0-8.598,6.969-15.567,15.567-15.567H370.81c-8.598,0-15.567,6.969-15.567,15.567 v88.772l20.001-20.001V416.418z\"\n  }), _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17, _ref18, _ref19, _ref20, _ref21, _ref22, _ref23, _ref24, _ref25, _ref26);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/logo.dd187a77.svg\";\nexport { ForwardRef as ReactComponent };","import { createStyles, Grid, Theme } from \"@material-ui/core\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Button from \"@material-ui/core/Button\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport { WithStyles, withStyles } from \"@material-ui/core/styles\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport AlbumIcon from \"@material-ui/icons/Album\";\nimport HomeIcon from \"@material-ui/icons/Home\";\nimport MusicVideoIcon from \"@material-ui/icons/MusicVideo\";\nimport PrintIcon from \"@material-ui/icons/Print\";\nimport RadioIcon from \"@material-ui/icons/Radio\";\nimport Log from \"components/log/log\";\nimport Toggle from \"components/toggle/toggle\";\nimport VersionInfo from \"components/versionInfo/versionInfo\";\nimport DefaultPage from \"pages/default/defaultPage\";\nimport DrumPage from \"pages/drum/drumPage\";\nimport GuitarPage from \"pages/guitar/guitarPage\";\nimport HarmonyPage from \"pages/harmony/harmonyPage\";\nimport PrintPage from \"pages/print/printPage\";\nimport StructurePage from \"pages/structure/structurePage\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { DialogType, openedDialog } from \"states/dialog/dialogsSlice\";\nimport { LoadingStatus, Page, switchedPage } from \"states/project/projectSlice\";\nimport { ApplicationState } from \"states/store\";\n\nimport { ReactComponent as Logo } from \"./logo.svg\";\n\ninterface PropsFromState {\n  currentPage: Page;\n  status: LoadingStatus;\n  title: string;\n}\n\ninterface PropsFromDispatch {\n  switchedPage: typeof switchedPage;\n  openedDialog: typeof openedDialog;\n}\n\ninterface Props extends WithStyles<typeof stylesForApp> {\n  theme: Theme;\n}\n\ntype AllProps = Props & PropsFromState & PropsFromDispatch;\n\nclass App extends React.Component<AllProps> {\n  render() {\n    Log.info(\"render\", App.name);\n    return (\n      <>\n        <div className={this.props.classes.root}>\n          <AppBar color=\"inherit\" className={this.props.classes.appBar}>\n            <Toolbar>\n              <Logo className={this.props.classes.logo}></Logo>\n              <Typography color=\"textPrimary\" variant=\"h4\" noWrap>\n                Transcribe\n              </Typography>\n              <Typography\n                color=\"textPrimary\"\n                variant=\"caption\"\n                noWrap\n                className={this.props.classes.title}\n              >\n                [{this.props.title !== \"\" ? this.props.title : \"no file loaded\"}\n                ]\n              </Typography>\n              <Button\n                onClick={() => this.props.openedDialog(DialogType.NEW)}\n                disabled={this.props.status === LoadingStatus.INITIALIZING}\n              >\n                New\n              </Button>\n              <Button\n                onClick={() => this.props.openedDialog(DialogType.OPEN)}\n                disabled={this.props.status === LoadingStatus.INITIALIZING}\n              >\n                Open\n              </Button>\n              <Button\n                onClick={() => this.props.openedDialog(DialogType.SAVE)}\n                disabled={this.props.status !== LoadingStatus.INITIALIZED}\n              >\n                Save\n              </Button>\n            </Toolbar>\n          </AppBar>\n          <Drawer\n            className={this.props.classes.drawer}\n            variant=\"permanent\"\n            classes={{\n              paper: this.props.classes.drawerPaper\n            }}\n          >\n            <div className={this.props.classes.toolbar} />\n            <List className={this.props.classes.menuItem}>\n              <ListItem\n                button\n                key=\"Structure\"\n                onClick={() => this.props.switchedPage(Page.STRUCTURE)}\n                disabled={this.props.status !== LoadingStatus.INITIALIZED}\n              >\n                <ListItemIcon>\n                  <HomeIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Structure\" />\n              </ListItem>\n              <ListItem\n                button\n                key=\"Harmony\"\n                onClick={() => this.props.switchedPage(Page.HARMONY)}\n                disabled={this.props.status !== LoadingStatus.INITIALIZED}\n              >\n                <ListItemIcon>\n                  <MusicVideoIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Harmony\" />\n              </ListItem>\n              <ListItem\n                button\n                key=\"Guitar\"\n                onClick={() => this.props.switchedPage(Page.GUITAR)}\n                disabled={this.props.status !== LoadingStatus.INITIALIZED}\n              >\n                <ListItemIcon>\n                  <RadioIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Guitar\" />\n              </ListItem>\n              <ListItem\n                button\n                key=\"Drum\"\n                onClick={() => this.props.switchedPage(Page.DRUM)}\n                disabled={this.props.status !== LoadingStatus.INITIALIZED}\n              >\n                <ListItemIcon>\n                  <AlbumIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Drum\" />\n              </ListItem>\n              <ListItem\n                button\n                key=\"Print\"\n                onClick={() => this.props.switchedPage(Page.PRINT)}\n                disabled={this.props.status !== LoadingStatus.INITIALIZED}\n              >\n                <ListItemIcon>\n                  <PrintIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Print\" />\n              </ListItem>\n            </List>\n          </Drawer>\n          <main className={this.props.classes.content}>\n            <div className={this.props.classes.toolbar} />\n            <Toggle show={this.props.currentPage === Page.DEFAULT}>\n              <DefaultPage />\n            </Toggle>\n            <Toggle show={this.props.currentPage === Page.STRUCTURE}>\n              <StructurePage />\n            </Toggle>\n            <Toggle show={this.props.currentPage === Page.HARMONY}>\n              <HarmonyPage />\n            </Toggle>\n            <Toggle show={this.props.currentPage === Page.GUITAR}>\n              <GuitarPage />\n            </Toggle>\n            <Toggle show={this.props.currentPage === Page.DRUM}>\n              <DrumPage />\n            </Toggle>\n            <Toggle show={this.props.currentPage === Page.PRINT}>\n              <PrintPage />\n            </Toggle>\n            <Grid\n              container\n              direction=\"column\"\n              justify=\"flex-end\"\n              alignItems=\"flex-end\"\n              className={this.props.classes.footer}\n            >\n              <Grid item>\n                App version:{\" \"}\n                <VersionInfo\n                  version={process.env.REACT_APP_VERSION ?? \"\"}\n                  hash={process.env.REACT_APP_VERSION_HASH ?? \"\"}\n                  description={process.env.REACT_APP_VERSION_DESCRIPTION ?? \"\"}\n                />\n              </Grid>\n            </Grid>\n          </main>\n        </div>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = ({ project }: ApplicationState) => {\n  return {\n    currentPage: project.currentPage,\n    status: project.status,\n    title: project.title\n  };\n};\n\nconst mapDispatchToProps = {\n  switchedPage,\n  openedDialog\n};\n\nconst drawerWidth = 190;\n\nexport const stylesForApp = (theme: Theme) =>\n  createStyles({\n    root: {\n      display: \"flex\",\n      backgroundColor: theme.palette.background.default\n    },\n    drawer: {\n      width: drawerWidth,\n      flexShrink: 0\n    },\n    drawerPaper: {\n      width: drawerWidth,\n      backgroundColor: \"#202a2f\"\n    },\n    content: {\n      flexGrow: 1,\n      padding: theme.spacing(3)\n    },\n    title: {\n      flexGrow: 1,\n      marginLeft: \"50px\"\n    },\n    toolbar: {\n      ...theme.mixins.toolbar\n    },\n    menuItem: {\n      color: \"#abb1b7\"\n    },\n    logo: {\n      height: theme.logo.height,\n      marginRight: theme.logo.marginRight\n    },\n    footer: {\n      marginTop: \"20px\"\n    },\n    appBar: {\n      zIndex: theme.zIndex.drawer + 1\n    }\n  });\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withStyles(stylesForApp, { withTheme: true })(App));\n","import { saveAs } from \"file-saver\";\nimport JSZip from \"jszip\";\nimport { PersistedState } from \"states/store\";\n\ninterface SaveOptions {\n  audioFileUrl: string;\n  state: PersistedState;\n}\n\nclass PersistenceApi {\n  private constructor() {\n    //not instanciable\n  }\n\n  private static songFile = \"song.blob\";\n  private static stateFile = \"state.json\";\n\n  static save = async (filename: string, options: SaveOptions) => {\n    const zip = new JSZip();\n    zip.file(PersistenceApi.stateFile, JSON.stringify(options.state));\n\n    const response = await fetch(options.audioFileUrl);\n    const audioBlob: Blob = await response.blob();\n    zip.file(PersistenceApi.songFile, audioBlob);\n\n    await zip.generateAsync({ type: \"blob\" }).then((file) => {\n      saveAs(file, filename);\n    });\n  };\n\n  static async open(\n    zip: File\n  ): Promise<{ audioBlob: Blob; state: PersistedState }> {\n    const archive = await JSZip.loadAsync(zip);\n    const audioBlob = await archive.file(PersistenceApi.songFile).async(\"blob\");\n\n    const json = await archive.file(PersistenceApi.stateFile).async(\"text\");\n    const state: PersistedState = JSON.parse(json);\n\n    return { audioBlob, state };\n  }\n\n  static revokeLocalFile(url: string) {\n    window.URL.revokeObjectURL(url);\n  }\n\n  static getLocalFileUrl(blob: Blob) {\n    return window.URL.createObjectURL(blob);\n  }\n}\n\nexport default PersistenceApi;\n","import {\n  createStyles,\n  InputBase,\n  Theme,\n  WithStyles,\n  withStyles\n} from \"@material-ui/core\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Paper from \"@material-ui/core/Paper\";\nimport MenuIcon from \"@material-ui/icons/OpenInBrowser\";\nimport PersistenceApi from \"api/persistenceApi\";\nimport React from \"react\";\n\nexport enum FileType {\n  AUDIO = \"audio/*\",\n  ZIP = \".zip\"\n}\n\nconst toString = (type: FileType) => {\n  switch (type) {\n    case FileType.AUDIO:\n      return \"Audio File\";\n    case FileType.ZIP:\n      return \"Project Zip File\";\n  }\n};\n\ninterface Props extends WithStyles<typeof stylesForFileInput> {\n  id: string;\n  fileType: FileType;\n  callback: (file: File, fileUrl: string) => void;\n}\n\ninterface State {\n  display: string;\n}\n\nconst stylesForFileInput = (theme: Theme) =>\n  createStyles({\n    root: {\n      padding: \"4px 0px\",\n      display: \"flex\",\n      alignItems: \"center\",\n      width: \"100%\"\n    },\n    input: {\n      marginLeft: theme.spacing(1),\n      flex: 1\n    },\n    iconButton: {\n      padding: 10\n    }\n  });\n\nclass FileInput extends React.Component<Props, State> {\n  state: State = {\n    display: \"\"\n  };\n\n  fileInput: React.RefObject<HTMLInputElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.fileInput = React.createRef();\n  }\n\n  handleChange = (fileList: FileList | null) => {\n    if (fileList === null) return;\n\n    const file = fileList[0];\n    const fileURL = PersistenceApi.getLocalFileUrl(file);\n\n    this.setState({ display: file.name });\n    this.props.callback(file, fileURL);\n  };\n\n  render() {\n    return (\n      <>\n        <Paper component=\"form\" className={this.props.classes.root}>\n          <InputBase\n            className={this.props.classes.input}\n            placeholder={\"Choose \" + toString(this.props.fileType) + \" ...\"}\n            inputProps={{\n              \"aria-label\": \"Choose \" + toString(this.props.fileType)\n            }}\n            value={this.state.display}\n            readOnly={true}\n            onClick={() => this.fileInput.current?.click()}\n          />\n          <IconButton\n            aria-label=\"menu\"\n            onClick={() => this.fileInput.current?.click()}\n            className={this.props.classes.iconButton}\n          >\n            <MenuIcon />{\" \"}\n          </IconButton>\n        </Paper>\n        <input\n          hidden={true}\n          id={this.props.id}\n          type=\"file\"\n          accept={this.props.fileType}\n          ref={this.fileInput}\n          onChange={(e) => this.handleChange(e.target.files)}\n        ></input>\n      </>\n    );\n  }\n}\n\nexport default withStyles(stylesForFileInput, { withTheme: true })(FileInput);\n","import { PeaksInstance } from \"peaks.js\";\nimport * as Tone from \"tone\";\nimport { PitchShift, Player as TonejsPlayer } from \"tone\";\n\ninterface Player {\n  destroy: () => void;\n  play: () => void;\n  pause: () => void;\n  isPlaying: () => boolean;\n  isSeeking: () => boolean;\n  getCurrentTime: () => number;\n  getDuration: () => number;\n  seek: (time: number) => void;\n  setPlaybackRate: (playbackRate: number) => void;\n  setDetune: (pitch: number) => void;\n}\n\ninterface EmitAware {\n  emit: (id: string, value: unknown) => void;\n}\n\nexport interface PeaksInstanceEmitAware extends PeaksInstance, EmitAware {}\n\n/**\n * Tone.js Player replacement for the <audio>-element based Peaks.js player\n */\nclass AudioPlayer implements Player {\n  peaks: PeaksInstanceEmitAware;\n  player: TonejsPlayer;\n  pitchShift: PitchShift;\n  detune: number;\n\n  constructor(\n    peaks: PeaksInstance,\n    audioBuffer: AudioBuffer,\n    onSongComplete: () => void\n  ) {\n    this.peaks = peaks as PeaksInstanceEmitAware;\n\n    this.player = new TonejsPlayer(audioBuffer);\n    this.player.sync();\n    this.player.start();\n\n    this.pitchShift = new PitchShift();\n    this.detune = 0;\n\n    this.player.connect(this.pitchShift);\n    this.pitchShift.toDestination();\n\n    Tone.Transport.scheduleRepeat(() => {\n      this.peaks.emit(\"player_time_update\", this.getCurrentTime());\n      if (this.getCurrentTime() >= this.getDuration()) {\n        Tone.Transport.stop();\n        onSongComplete();\n      }\n    }, 0.03);\n\n    this.peaks.emit(\"player_canplay\", this);\n  }\n\n  shiftToSemitones = (shift: number) => 12 * Math.log2(1 / shift);\n\n  setPlaybackRate(playbackRate: number) {\n    this.player.playbackRate = playbackRate;\n\n    // Detune to keep consistent pitch, even if the playback speed changed\n    this.setDetune(this.detune);\n\n    // Adjust playback to new playbackrate\n    if (this.isPlaying()) {\n      this.seek(this.getCurrentTime());\n    }\n  }\n\n  setDetune(detune: number) {\n    this.detune = detune;\n\n    this.pitchShift.pitch =\n      this.shiftToSemitones(this.player.playbackRate) + detune;\n  }\n\n  destroy = () => {\n    Tone.context.dispose();\n    Tone.setContext(new AudioContext());\n  };\n\n  play = () => {\n    Tone.Transport.start(\n      Tone.now(),\n      this.getCurrentTime() / this.player.playbackRate\n    );\n    this.peaks.emit(\n      \"player_play\",\n      this.getCurrentTime() / this.player.playbackRate\n    );\n  };\n\n  pause = () => {\n    Tone.Transport.pause();\n    this.peaks.emit(\"player_pause\", this.getCurrentTime());\n  };\n\n  isPlaying = () => {\n    return Tone.Transport.state === \"started\";\n  };\n\n  isSeeking = () => {\n    return false;\n  };\n\n  getCurrentTime = () => {\n    return (\n      this.player.toSeconds(Tone.Transport.position) * this.player.playbackRate\n    );\n  };\n\n  getDuration = () => {\n    return this.player.buffer.duration;\n  };\n\n  seek = (time: number) => {\n    const normalizedTime = time / this.player.playbackRate;\n\n    Tone.Transport.seconds = normalizedTime;\n\n    this.peaks.emit(\"player_time_update\", time);\n    this.peaks.emit(\"player_seek\", time);\n  };\n}\n\nexport default AudioPlayer;\n","import PersistenceApi from \"api/persistenceApi\";\nimport Log from \"components/log/log\";\nimport Peaks, { PeaksInstance } from \"peaks.js\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Measure, Section, updatedRhythm } from \"states/analysis/analysisSlice\";\nimport { triggeredPause } from \"states/audio/audioSlice\";\nimport { initializedProject, LoadingStatus } from \"states/project/projectSlice\";\nimport { ApplicationState, NormalizedObjects } from \"states/store\";\nimport * as Tone from \"tone\";\n\nimport AudioPlayer from \"./audioPlayer\";\nimport PeaksConfig, { AUDIO_DOM_ELEMENT } from \"./peaksConfig\";\n\ninterface PropsFromState {\n  audioUrl: string;\n  status: LoadingStatus;\n  sections: NormalizedObjects<Section>;\n  measures: NormalizedObjects<Measure>;\n  syncFirstMeasureStart: boolean;\n  isPlaying: boolean;\n  detune: number;\n  playbackRate: number;\n  secondsPerMeasure: number;\n  audioSampleRate: number;\n  isLooping: boolean;\n  loopStart: number;\n  loopEnd: number;\n}\n\ninterface PropsFromDispatch {\n  initializedProject: typeof initializedProject;\n  updatedRhythm: typeof updatedRhythm;\n  triggeredPause: typeof triggeredPause;\n}\n\ninterface Props {}\n\ntype AllProps = PropsFromState & PropsFromDispatch & Props;\n\nclass AudioManagement extends React.Component<AllProps> {\n  peaks: Peaks.PeaksInstance | undefined;\n  player: AudioPlayer | undefined;\n\n  private getPeaks: () => PeaksInstance = () => {\n    if (!this.peaks) throw new Error(\"peaks undefined\");\n    return this.peaks;\n  };\n  private getPlayer = () => {\n    if (!this.player) throw new Error(\"player undefined\");\n    return this.player;\n  };\n\n  componentDidUpdate(prevProps: AllProps) {\n    Log.info(\n      \"componentDidUpdate with status \" +\n        prevProps.status +\n        \" -> \" +\n        this.props.status,\n      AudioManagement.name\n    );\n\n    // Early return if there is no audio file initialized yet.\n    if (this.props.status === LoadingStatus.NOT_INITIALIZED) return;\n\n    // Early return if an initialization is still in progress\n    if (\n      prevProps.status === this.props.status &&\n      this.props.status === LoadingStatus.INITIALIZING\n    )\n      return;\n\n    // Initialize audio management if status changed to init\n    if (\n      prevProps.status !== this.props.status &&\n      this.props.status === LoadingStatus.INITIALIZING\n    ) {\n      Log.info(\"initialize audio engine\", AudioManagement.name);\n      if (prevProps.audioUrl !== this.props.audioUrl) {\n        Log.info(\n          \"switch from \" + prevProps.audioUrl + \" to \" + this.props.audioUrl,\n          AudioManagement.name\n        );\n        PersistenceApi.revokeLocalFile(prevProps.audioUrl);\n      }\n      this.init();\n      return;\n    }\n\n    if (\n      prevProps.status !== this.props.status &&\n      this.props.status === LoadingStatus.INITIALIZED\n    ) {\n      this.repaintWaveform(\n        this.props.sections,\n        this.props.measures,\n        this.props.secondsPerMeasure\n      );\n    }\n\n    if (\n      prevProps.sections !== this.props.sections ||\n      prevProps.measures !== this.props.measures\n    ) {\n      this.repaintWaveform(\n        this.props.sections,\n        this.props.measures,\n        this.props.secondsPerMeasure\n      );\n    }\n\n    if (prevProps.playbackRate !== this.props.playbackRate) {\n      this.getPlayer().setPlaybackRate(this.props.playbackRate);\n    }\n\n    if (prevProps.detune !== this.props.detune) {\n      this.getPlayer().setDetune(this.props.detune);\n    }\n\n    if (prevProps.isPlaying !== this.props.isPlaying) {\n      if (this.props.isPlaying) {\n        this.getPlayer().play();\n      } else {\n        this.getPlayer().pause();\n      }\n    }\n\n    if (\n      prevProps.loopStart !== this.props.loopStart ||\n      prevProps.loopEnd !== this.props.loopEnd\n    ) {\n      this.getPlayer().seek(this.props.loopStart);\n      this.setZoom(this.props.loopStart, this.props.loopEnd);\n    }\n  }\n\n  private repaintWaveform(\n    sections: NormalizedObjects<Section>,\n    measures: NormalizedObjects<Measure>,\n    timePerMeasure: number\n  ) {\n    this.getPeaks().segments.removeAll();\n    this.getPeaks().segments.add(\n      PeaksConfig.sectionsToSegment(sections, measures, timePerMeasure)\n    );\n    this.getPeaks().points.removeAll();\n    this.getPeaks().points.add(PeaksConfig.measuresToPoints(measures));\n  }\n\n  private init = () => {\n    const audioCtx: Tone.BaseContext = Tone.context;\n\n    try {\n      const peaks = this.getPeaks();\n      peaks.destroy();\n    } catch {}\n\n    // Load audioFile into audio buffer\n    fetch(this.props.audioUrl)\n      .then((response) => response.arrayBuffer())\n      .then((buffer) => audioCtx.decodeAudioData(buffer))\n      .then((audioBuffer) => this.initPeaks(audioBuffer));\n  };\n\n  private initPeaks(audioBuffer: AudioBuffer) {\n    Log.info(\"init peaks\", AudioManagement.name);\n\n    Peaks.init(PeaksConfig.create(audioBuffer), (err, peaks) => {\n      if (err) throw err;\n      if (peaks === undefined)\n        throw new Error(\"Peaks instance is not correctly initialized.\");\n\n      initPlayer(peaks, audioBuffer);\n      replacePlayer(peaks);\n\n      peaks.on(\"player_seek\", (time: number) => {\n        if (this.props.syncFirstMeasureStart)\n          this.props.updatedRhythm({ firstMeasureStart: time });\n      });\n\n      this.peaks = peaks;\n\n      this.props.initializedProject({\n        audioDuration: audioBuffer.duration,\n        audioSampleRate: audioBuffer.sampleRate\n      });\n    });\n\n    const initPlayer = (\n      peaks: Peaks.PeaksInstance,\n      audioBuffer: AudioBuffer\n    ) => {\n      this.player = new AudioPlayer(peaks, audioBuffer, () =>\n        this.props.triggeredPause()\n      );\n    };\n\n    const replacePlayer = (peaks: Peaks.PeaksInstance) => {\n      ((peaks.player as unknown) as { destroy: () => void }).destroy();\n      peaks.player = (this.player as unknown) as PeaksInstance[\"player\"];\n    };\n  }\n\n  private setZoom(start: number, end: number) {\n    const zoomview: Peaks.WaveformView | null = this.getPeaks().views.getView(\n      \"zoomview\"\n    );\n\n    if (zoomview === null) throw new Error(\"zoomview does not exist\");\n\n    const duration = end - start;\n    zoomview.setZoom({ seconds: duration });\n    zoomview.setStartTime(start);\n  }\n\n  render() {\n    return (\n      <audio id={AUDIO_DOM_ELEMENT} controls hidden>\n        {this.props.audioUrl ? (\n          <source src={this.props.audioUrl} type=\"audio/mpeg\" />\n        ) : null}\n        Your browser does not support the audio element.\n      </audio>\n    );\n  }\n}\n\nconst mapStateToProps = ({ project, analysis, audio }: ApplicationState) => {\n  return {\n    audioUrl: project.audioUrl,\n    sections: analysis.sections,\n    measures: analysis.measures,\n    status: project.status,\n    syncFirstMeasureStart: project.syncFirstMeasureStart,\n    isPlaying: audio.isPlaying,\n    detune: audio.detune,\n    playbackRate: audio.playbackRate,\n    secondsPerMeasure: computeSecondsPerMeasure(analysis.measures),\n    audioSampleRate: analysis.audioSampleRate,\n    isLooping: audio.isLooping,\n    loopStart: audio.loopStart,\n    loopEnd: audio.loopEnd\n  };\n};\n\nconst computeSecondsPerMeasure = (measures: NormalizedObjects<Measure>) => {\n  if (!measures || !measures.byId[\"1\"] || !measures.byId[\"0\"]) return 0;\n  return measures.byId[\"1\"].time - measures.byId[\"0\"].time;\n};\n\nconst mapDispatchToProps = {\n  initializedProject,\n  updatedRhythm,\n  triggeredPause\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(AudioManagement);\n","import {\n  DialogActions,\n  DialogContent,\n  DialogContentText\n} from \"@material-ui/core\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport React, { Component } from \"react\";\n\nexport interface DialogAction {\n  label: string;\n  onClick: () => void;\n  disabled?: boolean;\n}\n\ninterface ModalDialogProps {\n  title: string;\n  subTitle?: string;\n  onCancel: () => void;\n  actions?: DialogAction[];\n}\n\nclass ModalDialog extends Component<ModalDialogProps> {\n  render() {\n    return (\n      <Dialog\n        onClose={this.props.onCancel}\n        open={true}\n        fullWidth={true}\n        maxWidth={\"sm\"}\n      >\n        <DialogTitle>{this.props.title}</DialogTitle>\n        <DialogContent>\n          <DialogContentText>{this.props.subTitle}</DialogContentText>\n          {this.props.children}\n        </DialogContent>\n        <DialogActions>\n          {this.props.actions?.map((value) => (\n            <Button\n              key={value.label}\n              onClick={value.onClick}\n              color=\"primary\"\n              disabled={value.disabled ?? false}\n            >\n              {value.label}\n            </Button>\n          ))}\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n\nexport default ModalDialog;\n","import { configureStore, createAction } from \"@reduxjs/toolkit\";\nimport { AnyAction, combineReducers, Reducer } from \"redux\";\n\nimport analysisReducer, { AnalysisState } from \"./analysis/analysisSlice\";\nimport audioReducer, { AudioState } from \"./audio/audioSlice\";\nimport dialogReducer, { DialogState } from \"./dialog/dialogsSlice\";\nimport projectReducer, { ProjectState } from \"./project/projectSlice\";\n\n/** The top-level application state object. */\nexport interface ApplicationState {\n  analysis: AnalysisState;\n  audio: AudioState;\n  dialog: DialogState;\n  project: ProjectState;\n}\n\nexport interface PersistedState {\n  analysis: AnalysisState;\n  project: ProjectState;\n}\n\nexport interface NormalizedObjects<T> {\n  byId: { [id: string]: T };\n  allIds: string[];\n}\n\nexport const restoredPersistedState = createAction<PersistedState>(\n  \"restoredPersistedState\"\n);\n\nexport const sliceReducer = combineReducers({\n  analysis: analysisReducer,\n  audio: audioReducer,\n  dialog: dialogReducer,\n  project: projectReducer\n});\n\nexport const createRootReducer: Reducer<ApplicationState, AnyAction> = (\n  state,\n  action\n) => {\n  state = sliceReducer(state, action);\n\n  if (restoredPersistedState.match(action)) {\n    return state;\n  }\n\n  return state;\n};\n\nconst createAppStore = () => {\n  const store = configureStore({\n    reducer: createRootReducer,\n    preloadedState: undefined\n  });\n\n  if (process.env.NODE_ENV !== \"production\" && module.hot) {\n    module.hot.accept(\"./store\", () => store.replaceReducer(createRootReducer));\n  }\n  return store;\n};\n\nexport default createAppStore();\n","import {\n  createStyles,\n  FormLabel,\n  Theme,\n  WithStyles,\n  withStyles\n} from \"@material-ui/core\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport TextField from \"@material-ui/core/TextField\";\nimport PersistenceApi from \"api/persistenceApi\";\nimport FileInput, { FileType } from \"components/fileInput/fileInput\";\nimport MeasureSelect from \"components/measureSelect/measureSelect\";\nimport ModalDialog, { DialogAction } from \"components/modalDialog/modalDialog\";\nimport SectionSelect from \"components/sectionSelect/sectionSelect\";\nimport React, { Component, FunctionComponent, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  addedSection,\n  initialAnalysisState,\n  SectionType\n} from \"states/analysis/analysisSlice\";\nimport { closedDialog, DialogType } from \"states/dialog/dialogsSlice\";\nimport {\n  createdProject,\n  initialProjectState,\n  Page,\n  switchedPage\n} from \"states/project/projectSlice\";\nimport store, { ApplicationState } from \"states/store\";\nimport ArrayUtil from \"util/ArrayUtil\";\n\ninterface PropsFromState {\n  type: DialogType;\n  audioUrl: string;\n  maxMeasure: number;\n}\n\ninterface PropsFromDispatch {\n  switchedPage: typeof switchedPage;\n  closedDialog: typeof closedDialog;\n  createdProject: typeof createdProject;\n  addedSection: typeof addedSection;\n}\n\ntype AllProps = PropsFromState & PropsFromDispatch;\n\nclass DialogManagement extends Component<AllProps> {\n  render() {\n    switch (this.props.type) {\n      case DialogType.NONE:\n        return null;\n      case DialogType.NEW:\n        return (\n          <NewDialog\n            onCancel={() => this.props.closedDialog()}\n            onSubmit={(title: string, audioUrl: string) => {\n              this.props.createdProject({\n                analysis: initialAnalysisState,\n                project: { ...initialProjectState, audioUrl, title }\n              });\n              this.props.switchedPage(Page.STRUCTURE);\n              this.props.closedDialog();\n            }}\n          ></NewDialog>\n        );\n      case DialogType.OPEN:\n        return (\n          <OpenDialog\n            onCancel={() => this.props.closedDialog()}\n            onSubmit={(zip: File, zipUrl: string) => {\n              PersistenceApi.open(zip).then(({ audioBlob, state }) => {\n                const audioUrl = PersistenceApi.getLocalFileUrl(audioBlob);\n                PersistenceApi.revokeLocalFile(zipUrl);\n\n                this.props.createdProject({\n                  analysis: state.analysis,\n                  project: { ...state.project, audioUrl }\n                });\n                this.props.switchedPage(Page.STRUCTURE);\n                this.props.closedDialog();\n              });\n            }}\n          ></OpenDialog>\n        );\n      case DialogType.SAVE:\n        return (\n          <ModalDialog\n            title=\"Save Transcription\"\n            subTitle=\"Please click on 'save' to generate a transcription.zip file. It contains the transcription and the source audio file.\"\n            onCancel={() => this.props.closedDialog()}\n            actions={[\n              {\n                label: \"Cancel\",\n                onClick: () => this.props.closedDialog()\n              },\n              {\n                label: \"Save\",\n                onClick: () => {\n                  PersistenceApi.save(\"transcription.zip\", {\n                    audioFileUrl: this.props.audioUrl,\n                    state: store.getState()\n                  });\n                  this.props.closedDialog();\n                }\n              }\n            ]}\n          ></ModalDialog>\n        );\n      case DialogType.ADD_SECTION:\n        return (\n          <AddSectionDialog\n            maxMeasure={this.props.maxMeasure}\n            onCancel={() => this.props.closedDialog()}\n            onSubmit={(sectionType, start, end) => {\n              this.props.addedSection({\n                measures: ArrayUtil.range(start, end),\n                type: sectionType\n              });\n              this.props.closedDialog();\n            }}\n          ></AddSectionDialog>\n        );\n      default:\n        throw Error();\n    }\n  }\n}\n\nconst NewDialog: FunctionComponent<{\n  onSubmit: (title: string, fileUrl: string) => void;\n  onCancel: () => void;\n}> = (props) => {\n  const [fileUrl, setFileUrl] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const actions: () => DialogAction[] = () => {\n    return [\n      {\n        label: \"Cancel\",\n        onClick: () => props.onCancel()\n      },\n      {\n        label: \"Create\",\n        onClick: () => props.onSubmit(title, fileUrl),\n        disabled: fileUrl === \"\" || title === \"\"\n      }\n    ];\n  };\n\n  const handleTitleChange = (event: React.ChangeEvent<HTMLInputElement>) =>\n    setTitle(event.target.value);\n\n  return (\n    <ModalDialog\n      title=\"Create new Transcription\"\n      subTitle=\"Please add a project title and select an audio file from your hard disk below.\"\n      actions={actions()}\n      onCancel={props.onCancel}\n    >\n      <FormControl fullWidth>\n        <TextField\n          id=\"title\"\n          label=\"Project title\"\n          margin=\"normal\"\n          InputProps={{\n            readOnly: false\n          }}\n          variant=\"outlined\"\n          onChange={handleTitleChange}\n        />\n        <FileInput\n          fileType={FileType.AUDIO}\n          id=\"audio_file\"\n          callback={(file, fileUrl) => {\n            setFileUrl(fileUrl);\n          }}\n        ></FileInput>\n      </FormControl>\n    </ModalDialog>\n  );\n};\n\nconst OpenDialog: FunctionComponent<{\n  onSubmit: (file: File, fileUrl: string) => void;\n  onCancel: () => void;\n}> = (props) => {\n  const [fileUrl, setFileUrl] = useState(\"\");\n  const [file, setFile] = useState<File>();\n  const actions: () => DialogAction[] = () => {\n    return [\n      {\n        label: \"Cancel\",\n        onClick: () => props.onCancel()\n      },\n      {\n        label: \"Open\",\n        onClick: () => {\n          if (!file) throw Error(\"file undefined\");\n\n          props.onSubmit(file, fileUrl);\n        },\n        disabled: fileUrl === \"\"\n      }\n    ];\n  };\n\n  return (\n    <ModalDialog\n      title=\"Open Transcription\"\n      subTitle=\"Please select a project zip file from your hard disk below.\"\n      onCancel={props.onCancel}\n      actions={actions()}\n    >\n      <FormControl fullWidth>\n        <FileInput\n          fileType={FileType.ZIP}\n          id=\"zip_file\"\n          callback={(file, fileUrl) => {\n            setFileUrl(fileUrl);\n            setFile(file);\n          }}\n        ></FileInput>\n      </FormControl>\n    </ModalDialog>\n  );\n};\n\nconst addSectionDialogStyles = (theme: Theme) =>\n  createStyles({\n    formControl: {\n      marginBottom: theme.formControl.marginBottom\n    }\n  });\n\ninterface AddSectionDialogProps\n  extends WithStyles<typeof addSectionDialogStyles> {\n  maxMeasure: number;\n  onSubmit: (sectionType: SectionType, start: number, end: number) => void;\n  onCancel: () => void;\n}\n\nconst AddSectionDialog = withStyles(addSectionDialogStyles)(\n  (props: AddSectionDialogProps) => {\n    const [sectionType, setSectionType] = useState(SectionType.INTRO);\n    const [start, setStart] = useState(0);\n    const [end, setEnd] = useState(0);\n    const actions: () => DialogAction[] = () => {\n      return [\n        {\n          label: \"Cancel\",\n          onClick: () => props.onCancel()\n        },\n        {\n          label: \"Add\",\n          onClick: () => props.onSubmit(sectionType, start, end),\n          disabled: sectionType === SectionType.UNDEFINED || start > end\n        }\n      ];\n    };\n\n    return (\n      <ModalDialog\n        title=\"Add new Section\"\n        subTitle=\"Please define section and add it to the song structure.\"\n        actions={actions()}\n        onCancel={props.onCancel}\n      >\n        <FormControl fullWidth className={props.classes.formControl}>\n          <FormLabel component=\"legend\">Section Type</FormLabel>\n          <SectionSelect\n            value={sectionType}\n            onChange={(sectionType) => setSectionType(sectionType)}\n          ></SectionSelect>\n        </FormControl>\n        <FormControl fullWidth className={props.classes.formControl}>\n          <FormLabel component=\"legend\">First Measure</FormLabel>\n          <MeasureSelect\n            value={start}\n            min={0}\n            max={props.maxMeasure}\n            onChange={(value) => setStart(value)}\n          />\n        </FormControl>\n        <FormControl fullWidth className={props.classes.formControl}>\n          <FormLabel component=\"legend\">Last Measure</FormLabel>\n          <MeasureSelect\n            value={end}\n            min={0}\n            max={props.maxMeasure}\n            onChange={(value) => setEnd(value)}\n          />\n        </FormControl>\n      </ModalDialog>\n    );\n  }\n);\n\nconst mapStateToProps = ({ dialog, project, analysis }: ApplicationState) => {\n  return {\n    type: dialog.currentDialog,\n    audioUrl: project.audioUrl,\n    maxMeasure: analysis.measures.allIds.length - 1\n  };\n};\n\nconst mapDispatchToProps = {\n  closedDialog,\n  switchedPage,\n  createdProject,\n  addedSection\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DialogManagement);\n","import \"typeface-roboto\";\n\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { ThemeProvider } from \"@material-ui/core/styles\";\nimport React from \"react\";\nimport { render } from \"react-dom\";\nimport { Provider } from \"react-redux\";\n\nimport App from \"./components/app/app\";\nimport AudioManagement from \"./components/audioManagement/audioManagement\";\nimport DialogManagement from \"./components/dialogManagement/dialogManagement\";\nimport store from \"./states/store\";\nimport theme from \"./styles/theme\";\n\nconst renderApp = () =>\n  render(\n    <Provider store={store}>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <AudioManagement />\n        <DialogManagement />\n        <App />\n      </ThemeProvider>\n    </Provider>,\n    document.getElementById(\"root\")\n  );\n\n/** Enable logger in dev mode */\nif (process.env.NODE_ENV !== \"production\") {\n  localStorage.setItem(\"debug\", \"transcribe:*\");\n}\n\n/** Enable hot reload while development */\nif (process.env.NODE_ENV !== \"production\" && module.hot) {\n  module.hot.accept(\"./components/app/app\", renderApp);\n}\n\nrenderApp();\n"],"sourceRoot":""}