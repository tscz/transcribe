{"version":3,"sources":["util/ArrayUtil.ts","model/model.ts","styles/theme.ts","states/middleware/peaksConfig.ts","components/log/log.ts","states/project/projectSlice.ts","components/toggle/toggle.tsx","components/versionInfo/versionInfo.tsx","components/view/view.tsx","pages/default/defaultPage.tsx","pages/drum/drumPage.tsx","pages/guitar/guitarPage.tsx","pages/harmony/harmonyPage.tsx","pages/print/printPage.tsx","components/contentLayout/contentLayout.tsx","components/sliderInput/sliderInput.tsx","states/dialog/dialogsSlice.ts","states/analysis/analysisSlice.ts","states/audio/audioSlice.ts","components/sectionOverview/sectionOverview.tsx","views/properties/propertiesView.tsx","components/measureSelect/measureSelect.tsx","components/sectionSelect/sectionSelect.tsx","views/structure/structureView.tsx","views/structureNavigation/structureNavigationView.tsx","api/persistenceApi.ts","pages/structure/structurePage.tsx","states/middleware/audioPlayer.ts","states/middleware/audioMiddleware.ts","views/wave/waveView.tsx","views/wave/waveContainer.tsx","components/app/logo.svg","components/fileInput/fileInput.tsx","components/app/app.tsx","components/modalDialog/modalDialog.tsx","states/store.ts","components/dialogManagement/dialogManagement.tsx","index.tsx"],"names":["ArrayUtil","range","start","end","Array","fill","map","_","idx","toString","bordersOf","array","parseInt","last","length","TimeSignatureType","SectionType","toTimeSignatureType","type","FOUR_FOUR","THREE_FOUR","Error","replaceSections","sections","deleteCount","newSections","section","byId","allIds","ids","forEach","id","generateSectionId","push","splice","measures","getMeasureEnd","position","time","distributeMeasures","timeSignatureType","bpm","firstMeasureStart","lengthOfOneMeasure","beatUnit","beatsPerMeasure","toTimeSignature","index","color","editable","labelText","theme","createTheme","palette","primary","blueGrey","background","default","logo","height","marginRight","popover","width","minHeight","margin","marginTop","measureSelect","minWidth","formControl","marginBottom","sectionTypes","INTRO","VERSE","PRECHORUS","CHORUS","SOLO","OUTRO","BRIDGE","UNDEFINED","sectionSelect","view","headerBackground","headerPadding","waveform","pointMarkerColor","overrides","MuiListItemIcon","root","getColor","sectionType","result","SECTIONTYPE_TO_COLOR","get","Map","AUDIO_DOM_ELEMENT","ZOOMVIEW_CONTAINER","OVERVIEW_CONTAINER","PeaksConfig","audioBuffer","audioPlayer","mediaelement","document","getElementById","containers","zoomview","overview","mediaElement","webAudio","scale","multiChannel","keyboard","showPlayheadTime","zoomLevels","player","timePerMeasure","segments","segment","startTime","endTime","points","point","Level","name","TRACE","INFO","WARN","ERROR","LoadingStatus","Page","Log","level","message","source","namespace","createDebug","debug","this","generateMessage","Toggle","className","props","show","classes","inline","invisible","children","Component","withStyles","createStyles","display","withTheme","VersionInfo","version","href","hash","description","React","View","backgroundColor","header","padding","Card","raised","CardHeader","titleTypographyProps","variant","title","action","CardContent","body","DefaultPage","DrumPage","GuitarPage","HarmonyPage","PrintPage","ContentLayout","Grid","container","spacing","alignItems","item","xs","topLeft","bottomLeft","bottomRight","topRight","SliderInput","FormControl","InputLabel","shrink","Box","mt","Slider","value","valueLabelDisplay","min","max","onChange","step","DialogType","initialProjectState","status","NOT_INITIALIZED","currentPage","DEFAULT","audioUrl","syncFirstMeasureStart","projectSlice","createSlice","initialState","reducers","switchedPage","state","payload","createdProject","project","INITIALIZING","hotReloaded","initializedProject","INITIALIZED","enabledSyncFirstMeasureStart","actions","initialAnalysisState","duration","timeSignature","analysisSlice","extraReducers","builder","addCase","analysis","addedSection","addSection","updatedSection","removeSection","before","after","removedSection","updatedRhythm","undefinedSectionId","undefinedSection","lastSection","undefined","newLastSection","removeSectionsAfterLastMeasure","lastMeasure","removalStart","removalStartMeasure","newSection","enclosingSection","allSections","newSectionStart","newSectionEnd","sectionCount","current","currentSectionEnd","enclosingSectionOf","mergedSections","embeddedSection","currentSectionStart","mergeSections","sectionId","indexOf","firstMeasure","removalCount","audioSlice","isPlaying","detune","playbackRate","isLooping","loopStart","loopEnd","triggeredPlay","triggeredPause","updatedPlaybackSettings","toggledLoop","updatedLoopSettings","Area","initialDialogState","currentDialog","NONE","dialogsSlice","openedDialog","closedDialog","PropertiesView","_e","isArray","fullWidth","NativeSelect","e","target","mapDispatchToProps","connect","MeasureSelect","event","newMeasure","disabled","MenuItem","SectionSelect","colored","clsx","Object","values","StructureView","handleAddSection","handleUpdatedSection","info","JSON","stringify","handleRemoveSection","TableContainer","Table","size","TableHead","TableRow","TableCell","column1","column2","column3","column4","TableBody","component","scope","IconButton","onClick","measuresCount","measure","SectionOverview","OUTSIDE","LEFT_AND_RIGHT","LEFT","RIGHT","INSIDE","generateMatrix","arr","res","i","slice","direction","Typography","toLowerCase","mainGrid","row","ButtonGroup","orientation","measureId","Number","Square","sectiontype","setState","getArea","getCssClass","selected","selectedLeft","selectedRight","marginLeft","opacity","borderTopColor","borderBottomColor","borderLeftWidth","borderLeftColor","borderRightWidth","borderRightColor","other","Button","StructureNavigationView","justifyContent","alignContent","style","PersistenceApi","filename","options","zip","JSZip","file","stateFile","fetch","audioFileUrl","response","blob","audioBlob","songFile","generateAsync","then","saveAs","loadAsync","archive","async","json","parse","url","window","URL","revokeObjectURL","createObjectURL","PopoverType","AudioPlayer","onSongComplete","shouldLoop","pitchShift","eventEmitter","init","Transport","scheduleRepeat","emit","getCurrentTime","seek","getDuration","stop","shiftToSemitones","shift","Math","log2","destroy","dispose","cancel","play","now","Promise","resolve","playSegment","pause","isSeeking","toSeconds","buffer","normalizedTime","seconds","TonejsPlayer","PitchShift","sync","toDestination","setDetune","pitch","switchAudioFile","createAction","updateWaveform","AudioMiddleware","peaks","getPlayer","createMiddleware","dispatch","next","match","initAudioContext","repaintWaveform","setPlaybackRate","toggleLoop","getState","audio","setLoop","setZoom","computeSecondsPerMeasure","revokeLocalFile","cleanupPreviousInit","arrayBuffer","Tone","decodeAudioData","initTonejsAndPeaksjs","Peaks","create","err","on","removeAll","add","sectionsToSegment","measuresToPoints","views","getView","setStartTime","WaveView","maxHeight","WaveContainer","prevProps","CircularProgress","StructurePage","anchorEl","activePopover","handlePopoverOpen","currentTarget","handlePopoverClose","loopHintText","loopButtonColor","WaveformControlButton","icon","PLAYBACKRATE","DETUNE","Popover","open","onClose","anchorOrigin","vertical","horizontal","anchorPosition","top","left","transformOrigin","content","PopoverContent","STARTMEASURE","ADD_SECTION","button","Tooltip","StartMeasurePopover","DetunePopover","toggleButton","Input","startAdornment","InputAdornment","ToggleButton","PlaybackRatePopover","loaded","_extends","assign","arguments","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","d","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref18","_ref19","_ref20","_ref21","_ref22","_ref23","_ref24","_ref25","_ref26","SvgLogo","_ref","svgRef","titleId","xmlns","xmlnsXlink","x","y","viewBox","enableBackground","xmlSpace","ref","cx","cy","r","FileType","ForwardRef","App","AppBar","appBar","Toolbar","noWrap","NEW","OPEN","SAVE","Drawer","drawer","paper","drawerPaper","toolbar","List","menuItem","ListItem","STRUCTURE","ListItemIcon","ListItemText","HARMONY","GUITAR","DRUM","PRINT","footer","process","flexShrink","flexGrow","mixins","zIndex","AUDIO","ZIP","FileInput","fileInput","handleChange","fileList","fileURL","getLocalFileUrl","callback","createRef","Paper","InputBase","input","placeholder","fileType","inputProps","readOnly","click","aria-label","iconButton","hidden","accept","files","flex","ModalDialog","Dialog","onCancel","maxWidth","DialogTitle","DialogContent","DialogContentText","subTitle","DialogActions","label","restoredPersistedState","sliceReducer","combineReducers","analysisReducer","audioReducer","dialog","dialogReducer","projectReducer","createRootReducer","createAppStore","configureStore","reducer","preloadedState","middleware","DialogManagement","onSubmit","zipUrl","save","store","AddSectionDialog","maxMeasure","NewDialog","useState","fileUrl","setFileUrl","setTitle","TextField","InputProps","OpenDialog","setFile","setSectionType","setStart","setEnd","FormLabel","MediaElement","controls","render","ThemeProvider","CssBaseline"],"mappings":"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","file":"static/js/main.d90913b0.chunk.js","sourcesContent":["class ArrayUtil {\n  static range: (start: number, end: number) => string[] = (start, end) => {\n    if (start > end) start = end;\n\n    return Array(end - start + 1)\n      .fill(start)\n      .map((_, idx) => (start + idx).toString());\n  };\n\n  static bordersOf: (array: Array<string>) => { start: number; end: number } = (\n    array\n  ) => {\n    return {\n      start: parseInt(array[0]),\n      end: parseInt(ArrayUtil.last(array))\n    };\n  };\n\n  static last: <T>(array: Array<T>) => T = (array) => {\n    return array[array.length - 1];\n  };\n}\n\nexport default ArrayUtil;\n","import ArrayUtil from \"util/ArrayUtil\";\n\n/** A section if a song counted in measures. */\nexport interface Section {\n  type: SectionType;\n  measures: string[];\n}\n/** Set of all sections of a song. */\nexport type Sections = NormalizedObjects<Section>;\n\n/** A measure within a song. */\nexport interface Measure {\n  time: number;\n  editable?: boolean;\n  color?: string;\n  labelText?: string;\n  id: string;\n}\n\n/** Set of measures. */\nexport type Measures = NormalizedObjects<Measure>;\n\n/** Time signature within a song. */\nexport interface TimeSignature {\n  beatsPerMeasure: number;\n  beatUnit: number;\n}\n\n/** Enum of available time Signature types. */\nexport enum TimeSignatureType {\n  FOUR_FOUR = \"FOUR_FOUR\",\n  THREE_FOUR = \"THREE_FOUR\"\n}\n\n/** Available Section types. */\nexport enum SectionType {\n  INTRO = \"INTRO\",\n  VERSE = \"VERSE\",\n  PRECHORUS = \"PRECHORUS\",\n  CHORUS = \"CHORUS\",\n  BRIDGE = \"BRIDGE\",\n  SOLO = \"SOLO\",\n  OUTRO = \"OUTRO\",\n  UNDEFINED = \"UNDEFINED\"\n}\n/**\n * Normalized Datastructure for collection of objects.\n * @see https://redux.js.org/recipes/structuring-reducers/normalizing-state-shape.\n */\ninterface NormalizedObjects<T> {\n  byId: { [id: string]: T };\n  allIds: string[];\n}\n\nexport function mergeSections(\n  enclosingSection: Section,\n  embeddedSection: Section\n): Section[] {\n  const newSections: Section[] = [];\n  const { start: newSectionStart, end: newSectionEnd } = ArrayUtil.bordersOf(\n    embeddedSection.measures\n  );\n  const { start: currentSectionStart, end: currentSectionEnd } =\n    ArrayUtil.bordersOf(enclosingSection.measures);\n  //Add a new undefined block before the new section\n  if (newSectionStart > currentSectionStart) {\n    const section: Section = {\n      measures: ArrayUtil.range(currentSectionStart, newSectionStart - 1),\n      type: SectionType.UNDEFINED\n    };\n    newSections.push(section);\n  }\n  //add new section\n  newSections.push(embeddedSection);\n  //Add a new undefined block after the new section\n  if (newSectionEnd < currentSectionEnd) {\n    const section: Section = {\n      measures: ArrayUtil.range(newSectionEnd + 1, currentSectionEnd),\n      type: SectionType.UNDEFINED\n    };\n    newSections.push(section);\n  }\n  return newSections;\n}\n\nexport function toTimeSignature(type: TimeSignatureType): TimeSignature {\n  switch (type) {\n    case TimeSignatureType.FOUR_FOUR:\n      return { beatUnit: 4, beatsPerMeasure: 4 };\n    case TimeSignatureType.THREE_FOUR:\n      return { beatUnit: 4, beatsPerMeasure: 3 };\n  }\n}\n\nexport function toTimeSignatureType(type: string): TimeSignatureType {\n  switch (type) {\n    case TimeSignatureType.FOUR_FOUR.toString():\n      return TimeSignatureType.FOUR_FOUR;\n    case TimeSignatureType.THREE_FOUR.toString():\n      return TimeSignatureType.THREE_FOUR;\n    default:\n      throw Error(\"Unknown time signature type: \" + type);\n  }\n}\n\nexport function undefinedSection(length: number): Sections {\n  const undefinedSectionId = \"UNDEFINED_0_\" + length;\n  const sections: Sections = {\n    allIds: [undefinedSectionId],\n    byId: {}\n  };\n\n  sections.byId[undefinedSectionId] = {\n    measures: ArrayUtil.range(0, length),\n    type: SectionType.UNDEFINED\n  };\n\n  return sections;\n}\n\nexport function sectionInvalid(section: Section): boolean {\n  return (\n    parseInt(section.measures[0]) >\n    parseInt(section.measures[section.measures.length - 1])\n  );\n}\n\nexport function enclosingSectionOf(\n  section: Section,\n  allSections: Sections\n): { position: number; section: Section } | undefined {\n  const { start: newSectionStart, end: newSectionEnd } = ArrayUtil.bordersOf(\n    section.measures\n  );\n\n  const sectionCount = allSections.allIds.length;\n\n  for (let current = 0; current <= sectionCount - 1; current++) {\n    const section = allSections.byId[allSections.allIds[current]];\n    const { end: currentSectionEnd } = ArrayUtil.bordersOf(section.measures);\n\n    //Go to next section if not included\n    if (newSectionStart >= currentSectionEnd) continue;\n\n    //Exit if new section overlaps current section's border\n    if (newSectionEnd > currentSectionEnd) return undefined;\n\n    return { position: current, section: section };\n  }\n}\n\nexport function replaceSections(\n  sections: Sections,\n  start: number,\n  deleteCount: number,\n  newSections: Section[]\n): void {\n  for (let section = start; section < deleteCount; section++) {\n    delete sections.byId[sections.allIds[section]];\n  }\n\n  const ids: string[] = [];\n\n  newSections.forEach((section) => {\n    const id = generateSectionId(section);\n    ids.push(id);\n    sections.byId[id] = section;\n  });\n\n  sections.allIds.splice(start, deleteCount, ...ids);\n}\n\nexport function generateSectionId(section: Section): string {\n  return (\n    section.type +\n    \"_\" +\n    section.measures[0] +\n    \"_\" +\n    section.measures[section.measures.length - 1]\n  );\n}\n\nexport function getMeasureEnd(position: number, measures: Measures): number {\n  if (measures.allIds.length - 1 > position)\n    return measures.byId[position + 1].time;\n  else {\n    return 2 * measures.byId[position].time - measures.byId[position - 1].time;\n  }\n}\n\nexport function distributeMeasures(\n  timeSignatureType: TimeSignatureType,\n  bpm: number,\n  firstMeasureStart: number,\n  length: number\n): Measures {\n  const timeSignature = toTimeSignature(timeSignatureType);\n  const lengthOfOneMeasure = (60 * timeSignature.beatsPerMeasure) / bpm;\n  const measures: Measures = { allIds: [], byId: {} };\n\n  let index = 0;\n  for (\n    let start = firstMeasureStart;\n    start < length;\n    start += lengthOfOneMeasure\n  ) {\n    measures.allIds.push(\"\" + index);\n    measures.byId[index] = {\n      time: start,\n      color: \"\",\n      editable: false,\n      id: \"\" + index,\n      labelText: \"\" + index\n    };\n    index++;\n  }\n\n  return measures;\n}\n","import blueGrey from \"@material-ui/core/colors/blueGrey\";\nimport { createTheme } from \"@material-ui/core/styles\";\nimport { SectionType } from \"model/model\";\n\n// Extend Material UI theme type declaration\ndeclare module \"@material-ui/core/styles/createTheme\" {\n  // add custom theme options\n  interface ThemeOptions {\n    logo: {\n      height: React.CSSProperties[\"height\"];\n      marginRight: React.CSSProperties[\"marginRight\"];\n    };\n    popover: {\n      width: React.CSSProperties[\"width\"];\n      minHeight: React.CSSProperties[\"minHeight\"];\n      margin: React.CSSProperties[\"margin\"];\n      marginTop: React.CSSProperties[\"marginTop\"];\n    };\n    measureSelect: {\n      minWidth: React.CSSProperties[\"minWidth\"];\n    };\n    formControl: {\n      marginBottom: React.CSSProperties[\"marginBottom\"];\n    };\n    sectionTypes: {\n      INTRO: React.CSSProperties[\"color\"];\n      VERSE: React.CSSProperties[\"color\"];\n      PRECHORUS: React.CSSProperties[\"color\"];\n      CHORUS: React.CSSProperties[\"color\"];\n      SOLO: React.CSSProperties[\"color\"];\n      OUTRO: React.CSSProperties[\"color\"];\n      BRIDGE: React.CSSProperties[\"color\"];\n      UNDEFINED: React.CSSProperties[\"color\"];\n    };\n    sectionSelect: {\n      minWidth: React.CSSProperties[\"minWidth\"];\n    };\n    view: {\n      background: React.CSSProperties[\"color\"];\n      headerBackground: React.CSSProperties[\"color\"];\n      headerPadding: React.CSSProperties[\"padding\"];\n    };\n    waveform: {\n      pointMarkerColor: React.CSSProperties[\"color\"];\n    };\n  }\n\n  // make custom theme options available in theme\n  interface Theme extends ThemeOptions {}\n}\n\n// A custom theme for this app\nconst theme = createTheme({\n  palette: {\n    type: \"light\",\n    primary: blueGrey,\n    background: {\n      default: \"#d5d8da\"\n    }\n  },\n  logo: {\n    height: \"40px\",\n    marginRight: \"5px\"\n  },\n  popover: {\n    width: \"200px\",\n    minHeight: \"50px\",\n    margin: \"10px\",\n    marginTop: \"20px\"\n  },\n  measureSelect: {\n    minWidth: \"40px\"\n  },\n  formControl: {\n    marginBottom: \"20px\"\n  },\n  sectionTypes: {\n    INTRO: \"#FFCA28\",\n    VERSE: \"#FFA726\",\n    PRECHORUS: \"#FF7043\",\n    CHORUS: \"#9CCC65\",\n    SOLO: \"#26C6DA\",\n    OUTRO: \"#5C6BC0\",\n    BRIDGE: \"#EC407A\",\n    UNDEFINED: \"#f2f2f2\"\n  },\n  sectionSelect: {\n    minWidth: \"140px\"\n  },\n  view: {\n    background: \"#ffffff\",\n    headerBackground: \"#f1f4f6\",\n    headerPadding: \"4px\"\n  },\n  waveform: {\n    pointMarkerColor: \"#006eb0\"\n  },\n  overrides: {\n    MuiListItemIcon: {\n      root: {\n        color: \"#abb1b7\"\n      }\n    }\n  }\n});\n\nexport function getColor(sectionType: SectionType): string {\n  const result = SECTIONTYPE_TO_COLOR.get(sectionType);\n\n  if (!result) throw Error(\"Unknown SectionType \" + sectionType);\n\n  return result;\n}\n\nconst SECTIONTYPE_TO_COLOR = new Map<SectionType, React.CSSProperties[\"color\"]>(\n  [\n    [SectionType.INTRO, theme.sectionTypes.INTRO],\n    [SectionType.VERSE, theme.sectionTypes.VERSE],\n    [SectionType.PRECHORUS, theme.sectionTypes.PRECHORUS],\n    [SectionType.CHORUS, theme.sectionTypes.CHORUS],\n    [SectionType.SOLO, theme.sectionTypes.SOLO],\n    [SectionType.OUTRO, theme.sectionTypes.OUTRO],\n    [SectionType.BRIDGE, theme.sectionTypes.BRIDGE],\n    [SectionType.UNDEFINED, theme.sectionTypes.UNDEFINED]\n  ]\n) as ReadonlyMap<SectionType, string>;\n\nexport default theme;\n","import { Measures, Sections } from \"model/model\";\nimport { PeaksOptions, PointAddOptions, SegmentAddOptions } from \"peaks.js\";\nimport theme, { getColor } from \"styles/theme\";\n\nimport AudioPlayer from \"./audioPlayer\";\n\nexport const AUDIO_DOM_ELEMENT = \"audio_dom_element\";\nexport const ZOOMVIEW_CONTAINER = \"zoomview-container\";\nexport const OVERVIEW_CONTAINER = \"overview-container\";\n\nclass PeaksConfig {\n  static create(\n    audioBuffer: AudioBuffer,\n    audioPlayer: AudioPlayer\n  ): PeaksOptions {\n    const mediaelement: HTMLAudioElement = document.getElementById(\n      AUDIO_DOM_ELEMENT\n    ) as HTMLAudioElement;\n\n    return {\n      containers: {\n        zoomview: document.getElementById(ZOOMVIEW_CONTAINER),\n        overview: document.getElementById(OVERVIEW_CONTAINER)\n      },\n      mediaElement: mediaelement,\n      webAudio: {\n        audioBuffer: audioBuffer,\n        scale: 128,\n        multiChannel: false\n      },\n      keyboard: true,\n      pointMarkerColor: theme.waveform.pointMarkerColor,\n      showPlayheadTime: true,\n      zoomLevels: [42], //TODO: Define good initial default\n      player: audioPlayer\n    };\n  }\n\n  static sectionsToSegment(\n    sections: Sections,\n    measures: Measures,\n    timePerMeasure: number\n  ): SegmentAddOptions[] {\n    const segments: SegmentAddOptions[] = [];\n    sections.allIds.forEach((id) => {\n      const section = sections.byId[id];\n\n      const start = measures.byId[section.measures[0]].time;\n      const end =\n        measures.byId[section.measures[section.measures.length - 1]].time +\n        timePerMeasure;\n\n      const segment: SegmentAddOptions = {\n        id,\n        labelText: section.type,\n        startTime: start,\n        endTime: end,\n        color: getColor(section.type),\n        editable: false\n      };\n\n      segments.push(segment);\n    });\n\n    return segments;\n  }\n\n  static measuresToPoints(measures: Measures): PointAddOptions[] {\n    const points: PointAddOptions[] = [];\n    measures.allIds.forEach((id) => {\n      const measure = measures.byId[id];\n\n      const point = measure as PointAddOptions;\n\n      points.push(point);\n    });\n\n    return points;\n  }\n}\n\nexport default PeaksConfig;\n","import debug from \"debug\";\n\nexport class Level {\n  public static readonly TRACE = new Level(\"trace\", \"lightblue\");\n  public static readonly INFO = new Level(\"info\", \"blue\");\n  public static readonly WARN = new Level(\"warn\", \"yellow\");\n  public static readonly ERROR = new Level(\"error\", \"red\");\n\n  private constructor(\n    public readonly name: string,\n    public readonly color: string\n  ) {}\n}\n\nclass Log {\n  private static generateMessage(\n    level: Level,\n    message: string,\n    source: string\n  ) {\n    const namespace = `transcribe:${level.name}`;\n    const createDebug = debug(namespace);\n\n    createDebug.color = level.color;\n\n    if (source) {\n      createDebug(source, message);\n    } else {\n      createDebug(message);\n    }\n  }\n\n  static trace(message: string, source: string): void {\n    this.generateMessage(Level.TRACE, message, source);\n  }\n\n  static info(message: string, source: string): void {\n    this.generateMessage(Level.INFO, message, source);\n  }\n\n  static warn(message: string, source: string): void {\n    this.generateMessage(Level.WARN, message, source);\n  }\n\n  static error(message: string, source: string): void {\n    this.generateMessage(Level.ERROR, message, source);\n  }\n}\n\nexport default Log;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { PersistedState } from \"states/store\";\n\nexport interface ProjectState {\n  readonly status: LoadingStatus;\n  readonly currentPage: Page;\n  readonly title: string;\n  readonly audioUrl: string;\n  readonly syncFirstMeasureStart: boolean;\n}\n\nexport enum LoadingStatus {\n  NOT_INITIALIZED = \"not_initialized\",\n  INITIALIZING = \"initializing\",\n  INITIALIZED = \"initialized\"\n}\n\nexport enum Page {\n  DEFAULT = \"default\",\n  STRUCTURE = \"structure\",\n  HARMONY = \"harmony\",\n  GUITAR = \"guitar\",\n  DRUM = \"drum\",\n  PRINT = \"print\"\n}\n\nexport const initialProjectState: ProjectState = {\n  status: LoadingStatus.NOT_INITIALIZED,\n  currentPage: Page.DEFAULT,\n  title: \"\",\n  audioUrl: \"\",\n  syncFirstMeasureStart: false\n};\n\nconst projectSlice = createSlice({\n  name: \"project\",\n  initialState: initialProjectState,\n  reducers: {\n    switchedPage(state, action: PayloadAction<Page>) {\n      state.currentPage = action.payload;\n    },\n    createdProject(state, action: PayloadAction<PersistedState>) {\n      return { ...action.payload.project, status: LoadingStatus.INITIALIZING };\n    },\n    hotReloaded(state) {\n      state.status = LoadingStatus.INITIALIZING;\n    },\n    initializedProject(state) {\n      state.status = LoadingStatus.INITIALIZED;\n    },\n    enabledSyncFirstMeasureStart(state, action: PayloadAction<boolean>) {\n      state.syncFirstMeasureStart = action.payload;\n    }\n  }\n});\n\nexport const {\n  switchedPage,\n  createdProject,\n  initializedProject,\n  hotReloaded,\n  enabledSyncFirstMeasureStart\n} = projectSlice.actions;\n\nexport default projectSlice.reducer;\n","import { createStyles, WithStyles, withStyles } from \"@material-ui/core\";\nimport React, { Component } from \"react\";\n\ninterface Props extends WithStyles<typeof stylesForToggle> {\n  show: boolean;\n}\n\nclass Toggle extends Component<Props> {\n  render() {\n    return (\n      <div\n        className={\n          this.props.show\n            ? this.props.classes.inline\n            : this.props.classes.invisible\n        }\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nconst stylesForToggle = () =>\n  createStyles({\n    inline: {\n      display: \"inline\"\n    },\n    invisible: {\n      display: \"none\"\n    }\n  });\n\nexport default withStyles(stylesForToggle, { withTheme: true })(Toggle);\n","import React from \"react\";\n\nclass VersionInfo extends React.Component<{\n  version: string;\n  hash: string;\n  description: string;\n}> {\n  render(): JSX.Element {\n    return (\n      <>\n        {this.props.version} (\n        <a\n          href={\"https://github.com/tscz/transcribe/commit/\" + this.props.hash}\n        >\n          {this.props.hash} - {this.props.description}\n        </a>\n        )\n      </>\n    );\n  }\n}\n\nexport default VersionInfo;\n","import {\n  CardHeader,\n  createStyles,\n  Theme,\n  WithStyles,\n  withStyles\n} from \"@material-ui/core\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport React, { ReactElement } from \"react\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      height: \"100%\",\n      backgroundColor: theme.view.background\n    },\n    header: {\n      backgroundColor: theme.view.headerBackground,\n      padding: theme.view.headerPadding\n    }\n  });\n\ninterface Props {\n  body: ReactElement;\n  title: string;\n  action?: ReactElement;\n}\n\ntype PropsWithStyle = Props & WithStyles<typeof styles>;\n\nconst View = withStyles(styles)((props: PropsWithStyle) => {\n  return (\n    <Card className={props.classes.root} raised={false}>\n      <CardHeader\n        titleTypographyProps={{ variant: \"subtitle1\" }}\n        title={props.title}\n        className={props.classes.header}\n        action={props.action}\n      />\n      <CardContent>{props.body}</CardContent>\n    </Card>\n  );\n});\n\nexport default View;\n","import View from \"components/view/view\";\nimport React, { Component } from \"react\";\n\nclass DefaultPage extends Component {\n  render(): JSX.Element {\n    return (\n      <View\n        title=\"Info\"\n        body={\n          <>\n            <p>No Transcription started!!</p>\n            <p>Please create a new Transcription or open an existing one.</p>\n          </>\n        }\n      ></View>\n    );\n  }\n}\n\nexport default DefaultPage;\n","import View from \"components/view/view\";\nimport React from \"react\";\n\nclass DrumPage extends React.Component {\n  render(): JSX.Element {\n    return (\n      <View\n        title=\"Drums View\"\n        body={\n          <p>\n            In this section you&apos;ll be able to transcribe the drum part.\n            Please come back later.\n          </p>\n        }\n      ></View>\n    );\n  }\n}\n\nexport default DrumPage;\n","import View from \"components/view/view\";\nimport React from \"react\";\n\nclass GuitarPage extends React.Component {\n  render(): JSX.Element {\n    return (\n      <View\n        title=\"Guitar\"\n        body={\n          <p>\n            In this section you&apos;ll be able to transcribe the guitar part.\n            Please come back later.\n          </p>\n        }\n      ></View>\n    );\n  }\n}\n\nexport default GuitarPage;\n","import View from \"components/view/view\";\nimport React from \"react\";\n\nclass HarmonyPage extends React.Component {\n  render(): JSX.Element {\n    return (\n      <View\n        title=\"Harmony\"\n        body={\n          <p>\n            In this section you&apos;ll be able to transcribe the harmony.\n            Please come back later.\n          </p>\n        }\n      ></View>\n    );\n  }\n}\n\nexport default HarmonyPage;\n","import View from \"components/view/view\";\nimport React from \"react\";\n\nclass PrintPage extends React.Component {\n  render(): JSX.Element {\n    return (\n      <View\n        title=\"Print\"\n        body={\n          <p>\n            In this section you&apos;ll be able to print the leadsheet. Please\n            come back later.\n          </p>\n        }\n      ></View>\n    );\n  }\n}\n\nexport default PrintPage;\n","import Grid from \"@material-ui/core/Grid\";\nimport React, { Component, ReactElement } from \"react\";\n\ninterface Props {\n  topLeft: ReactElement;\n  topRight: ReactElement;\n  bottomLeft: ReactElement;\n  bottomRight: ReactElement;\n}\n\nclass ContentLayout extends Component<Props> {\n  render(): JSX.Element {\n    return (\n      <Grid container spacing={2} alignItems=\"stretch\">\n        <Grid item xs={10}>\n          <Grid container spacing={2} alignItems=\"stretch\">\n            <Grid item xs={12}>\n              {this.props.topLeft}\n            </Grid>\n            <Grid item xs={12}>\n              <Grid container spacing={2} alignItems=\"stretch\">\n                <Grid item xs={10}>\n                  {this.props.bottomLeft}\n                </Grid>\n                <Grid item xs={2}>\n                  {this.props.bottomRight}\n                </Grid>\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n        <Grid item xs={2}>\n          {this.props.topRight}\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nexport default ContentLayout;\n","import {\n  Box,\n  createStyles,\n  FormControl,\n  InputLabel,\n  Slider,\n  WithStyles,\n  withStyles\n} from \"@material-ui/core\";\nimport React from \"react\";\n\nconst styles = () =>\n  createStyles({\n    root: {\n      width: \"100%\"\n    }\n  });\n\ninterface Props {\n  title: string;\n  min: number;\n  max: number;\n  step: number;\n  value: number;\n  onChange: (\n    event: React.ChangeEvent<Record<string, unknown>>,\n    value: number | number[]\n  ) => void;\n}\n\ntype PropsWithStyle = Props & WithStyles<typeof styles>;\n\nconst SliderInput = withStyles(styles)((props: PropsWithStyle) => {\n  return (\n    <FormControl className={props.classes.root}>\n      <InputLabel shrink>{props.title}</InputLabel>\n      <Box mt={2}>\n        <Slider\n          value={props.value}\n          valueLabelDisplay=\"auto\"\n          min={props.min}\n          max={props.max}\n          onChange={props.onChange}\n          step={props.step}\n        />\n      </Box>\n    </FormControl>\n  );\n});\n\nexport default SliderInput;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\nexport interface DialogState {\n  readonly currentDialog: DialogType;\n}\n\nexport enum DialogType {\n  NONE = \"none\",\n  NEW = \"new\",\n  OPEN = \"open\",\n  SAVE = \"save\",\n  ADD_SECTION = \"add_section\"\n}\n\nconst initialDialogState: DialogState = {\n  currentDialog: DialogType.NONE\n};\n\nconst dialogsSlice = createSlice({\n  name: \"dialogs\",\n  initialState: initialDialogState,\n  reducers: {\n    openedDialog(state, action: PayloadAction<DialogType>) {\n      state.currentDialog = action.payload;\n    },\n    closedDialog(state) {\n      state.currentDialog = DialogType.NONE;\n    }\n  }\n});\n\nexport const { openedDialog, closedDialog } = dialogsSlice.actions;\n\nexport default dialogsSlice.reducer;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport {\n  distributeMeasures,\n  enclosingSectionOf,\n  generateSectionId,\n  Measures,\n  mergeSections,\n  replaceSections,\n  Section,\n  sectionInvalid,\n  Sections,\n  SectionType,\n  TimeSignatureType,\n  undefinedSection\n} from \"model/model\";\nimport { createdProject } from \"states/project/projectSlice\";\nimport ArrayUtil from \"util/ArrayUtil\";\n\nexport interface AnalysisState {\n  readonly sections: Sections;\n  readonly duration: number;\n  readonly firstMeasureStart: number;\n  readonly timeSignature: TimeSignatureType;\n  readonly bpm: number;\n  readonly measures: Measures;\n}\n\nexport const initialAnalysisState: AnalysisState = {\n  sections: { allIds: [], byId: {} },\n  bpm: 120,\n  firstMeasureStart: 0,\n  duration: 180,\n  measures: { allIds: [], byId: {} },\n  timeSignature: TimeSignatureType.FOUR_FOUR\n};\n\nconst analysisSlice = createSlice({\n  name: \"analysis\",\n  initialState: initialAnalysisState,\n  extraReducers: (builder) =>\n    builder.addCase(createdProject, (state, action) => {\n      return action.payload.analysis;\n    }),\n  reducers: {\n    addedSection(state, action: PayloadAction<Section>) {\n      return addSection(state, action.payload);\n    },\n    updatedSection(\n      state,\n      action: PayloadAction<{ before: string; after: Section }>\n    ) {\n      removeSection(state, action.payload.before);\n      return addSection(state, action.payload.after);\n    },\n    removedSection(state, action: PayloadAction<string>) {\n      removeSection(state, action.payload);\n\n      return state;\n    },\n    updatedRhythm(\n      state,\n      action: PayloadAction<{\n        firstMeasureStart?: number;\n        bpm?: number;\n        timeSignatureType?: TimeSignatureType;\n        duration?: number;\n      }>\n    ) {\n      state.duration = action.payload.duration ?? state.duration;\n      state.bpm = action.payload.bpm ?? state.bpm;\n      state.firstMeasureStart =\n        action.payload.firstMeasureStart ?? state.firstMeasureStart;\n      state.timeSignature =\n        action.payload.timeSignatureType ?? state.timeSignature;\n\n      state.measures = distributeMeasures(\n        state.timeSignature,\n        state.bpm,\n        state.firstMeasureStart,\n        state.duration\n      );\n\n      if (state.sections.allIds.length === 0) {\n        state.sections = undefinedSection(state.measures.allIds.length - 1);\n        return state;\n      }\n\n      const lastSection =\n        state.sections.byId[\n          state.sections.allIds[state.sections.allIds.length - 1]\n        ];\n\n      if (lastSection === undefined) return state;\n\n      if (\n        parseInt(ArrayUtil.last(state.measures.allIds)) >\n        parseInt(lastSection.measures[lastSection.measures.length - 1])\n      ) {\n        const newLastSection: Section = {\n          type: lastSection.type,\n          measures: ArrayUtil.range(\n            parseInt(lastSection.measures[0]),\n            parseInt(ArrayUtil.last(state.measures.allIds))\n          )\n        };\n        const id = generateSectionId(newLastSection);\n        delete state.sections.byId[\n          state.sections.allIds[state.sections.allIds.length - 1]\n        ];\n        state.sections.allIds[state.sections.allIds.length - 1] = id;\n        state.sections.byId[id] = newLastSection;\n      }\n\n      removeSectionsAfterLastMeasure(state);\n\n      return state;\n    }\n  }\n});\n\nconst removeSectionsAfterLastMeasure: (state: AnalysisState) => void = (\n  state\n) => {\n  const lastMeasure = state.measures.allIds.length - 1;\n  let removalStart = -1;\n  let removalStartMeasure = -1;\n\n  for (let index = 0; index <= state.sections.allIds.length - 1; index++) {\n    const section = state.sections.byId[state.sections.allIds[index]];\n    const sectionEnd = parseInt(ArrayUtil.last(section.measures));\n\n    if (sectionEnd > lastMeasure) {\n      removalStart = index;\n      removalStartMeasure = parseInt(section.measures[0]);\n      break;\n    }\n  }\n\n  if (removalStart === -1) return; // No sections after last measure\n\n  replaceSections(\n    state.sections,\n    removalStart,\n    state.sections.allIds.length - removalStart,\n    [\n      {\n        measures: ArrayUtil.range(removalStartMeasure, lastMeasure),\n        type: SectionType.UNDEFINED\n      }\n    ]\n  );\n};\n\nconst addSection: (state: AnalysisState, newSection: Section) => AnalysisState =\n  (state, newSection) => {\n    if (sectionInvalid(newSection)) return state;\n\n    const enclosingSection = enclosingSectionOf(newSection, state.sections);\n    if (\n      enclosingSection === undefined ||\n      enclosingSection.section.type !== SectionType.UNDEFINED\n    )\n      return state;\n\n    const mergedSections = mergeSections(enclosingSection.section, newSection);\n\n    replaceSections(\n      state.sections,\n      enclosingSection.position,\n      1,\n      mergedSections\n    );\n\n    return state;\n  };\n\nconst removeSection: (state: AnalysisState, sectionId: string) => void = (\n  state,\n  sectionId\n) => {\n  const position = state.sections.allIds.indexOf(sectionId);\n  const section = state.sections.byId[sectionId];\n\n  const before = state.sections.allIds[position - 1];\n  const after = state.sections.allIds[position + 1];\n\n  let { start: firstMeasure, end: lastMeasure } = ArrayUtil.bordersOf(\n    section.measures\n  );\n  let removalStart = position;\n  let removalCount = 1;\n\n  if (\n    before !== undefined &&\n    state.sections.byId[before].type === SectionType.UNDEFINED\n  ) {\n    removalStart--;\n    removalCount++;\n    firstMeasure = parseInt(state.sections.byId[before].measures[0]);\n  }\n\n  if (\n    after !== undefined &&\n    state.sections.byId[after].type === SectionType.UNDEFINED\n  ) {\n    removalCount++;\n    lastMeasure = parseInt(ArrayUtil.last(state.sections.byId[after].measures));\n  }\n\n  replaceSections(state.sections, removalStart, removalCount, [\n    {\n      measures: ArrayUtil.range(firstMeasure, lastMeasure),\n      type: SectionType.UNDEFINED\n    }\n  ]);\n};\n\nexport const { addedSection, removedSection, updatedRhythm, updatedSection } =\n  analysisSlice.actions;\n\nexport default analysisSlice.reducer;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\nexport interface AudioState {\n  readonly isPlaying: boolean;\n  readonly detune: number;\n  readonly playbackRate: number;\n  readonly isLooping: boolean;\n  readonly loopStart: number;\n  readonly loopEnd: number;\n}\n\nexport interface PlaybackSettings {\n  readonly detune?: number;\n  readonly playbackRate?: number;\n}\n\nexport const initialAudioState: AudioState = {\n  isPlaying: false,\n  detune: 0,\n  playbackRate: 1,\n  isLooping: false,\n  loopStart: 0,\n  loopEnd: 0\n};\n\nconst audioSlice = createSlice({\n  name: \"audio\",\n  initialState: initialAudioState,\n  reducers: {\n    triggeredPlay(state) {\n      state.isPlaying = true;\n    },\n    triggeredPause(state) {\n      state.isPlaying = false;\n    },\n    updatedPlaybackSettings(\n      state,\n      action: PayloadAction<{ playbackRate?: number; detune?: number }>\n    ) {\n      if (action.payload.detune !== undefined)\n        state.detune = action.payload.detune;\n      if (action.payload.playbackRate !== undefined)\n        state.playbackRate = action.payload.playbackRate;\n    },\n    toggledLoop(state) {\n      state.isLooping = !state.isLooping;\n    },\n    updatedLoopSettings(\n      state,\n      action: PayloadAction<{ start?: number; end?: number }>\n    ) {\n      if (action.payload.start !== undefined)\n        state.loopStart = action.payload.start;\n      if (action.payload.end !== undefined) state.loopEnd = action.payload.end;\n    }\n  }\n});\n\nexport const {\n  triggeredPause,\n  triggeredPlay,\n  updatedPlaybackSettings,\n  toggledLoop,\n  updatedLoopSettings\n} = audioSlice.actions;\n\nexport default audioSlice.reducer;\n","import {\n  Button,\n  ButtonGroup,\n  createStyles,\n  Grid,\n  Typography,\n  WithStyles,\n  withStyles\n} from \"@material-ui/core\";\nimport clsx from \"clsx\";\nimport {\n  getMeasureEnd,\n  Measure,\n  Measures,\n  Sections,\n  SectionType\n} from \"model/model\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { updatedLoopSettings } from \"states/audio/audioSlice\";\nimport { ApplicationState } from \"states/store\";\nimport { getColor } from \"styles/theme\";\n\nenum Area {\n  OUTSIDE,\n  LEFT,\n  RIGHT,\n  INSIDE,\n  LEFT_AND_RIGHT\n}\n\ninterface PropsFromState {\n  sections: Sections;\n  measures: Measures;\n}\n\ninterface PropsFromDispatch {\n  updatedLoopSettings: typeof updatedLoopSettings;\n}\n\ntype AllProps = PropsFromState & PropsFromDispatch & WithStyles<typeof styles>;\n\ninterface State {\n  start: number;\n  end: number;\n}\n\nconst styles = () =>\n  createStyles({\n    mainGrid: {\n      marginBottom: \"5px\"\n    },\n    section: {}\n  });\n\nclass SectionOverview extends React.Component<AllProps, State> {\n  state: State = {\n    start: 0,\n    end: 0\n  };\n\n  getArea(measure: number) {\n    if (this.state.start > measure || this.state.end < measure)\n      return Area.OUTSIDE;\n\n    if (measure === this.state.start && measure === this.state.end)\n      return Area.LEFT_AND_RIGHT;\n\n    if (measure === this.state.start) return Area.LEFT;\n\n    if (measure === this.state.end) return Area.RIGHT;\n\n    return Area.INSIDE;\n  }\n\n  render() {\n    const { sections, measures } = this.props;\n\n    const generateMatrix = (arr: string[], size: number) => {\n      const res = [];\n      for (let i = 0; i < arr.length; i = i + size)\n        res.push(arr.slice(i, i + size));\n      return res;\n    };\n\n    return (\n      <>\n        <Grid container direction=\"column\">\n          {sections.allIds.map((sectionId) => (\n            <Grid item key={sectionId}>\n              <Grid container direction=\"column\">\n                <Grid item key={sectionId + \"_caption\"}>\n                  <Typography variant=\"caption\">\n                    {sections.byId[sectionId].type.toLowerCase()}\n                  </Typography>\n                </Grid>\n                <Grid item key={sectionId + \"_body\"}>\n                  <Grid\n                    container\n                    direction=\"column\"\n                    className={this.props.classes.mainGrid}\n                  >\n                    {generateMatrix(sections.byId[sectionId].measures, 8).map(\n                      (row) => (\n                        <ButtonGroup\n                          key={sectionId + \"_buttonGroup_\" + row[0]}\n                          orientation=\"horizontal\"\n                          size=\"small\"\n                          className={this.props.classes.section}\n                        >\n                          {row.map((measureId) => {\n                            const measure: Measure = measures.byId[measureId];\n                            const position = Number(measureId);\n\n                            if (!measure) return <div>?</div>;\n\n                            return (\n                              <Square\n                                key={measure.id}\n                                value={measure.id}\n                                sectiontype={sections.byId[sectionId].type}\n                                onClick={() => {\n                                  if (position <= this.state.end) {\n                                    this.setState(() => ({\n                                      start: position,\n                                      end: position\n                                    }));\n                                    this.props.updatedLoopSettings({\n                                      start: measures.byId[position].time,\n                                      end: getMeasureEnd(position, measures)\n                                    });\n                                  } else {\n                                    this.setState(() => ({\n                                      end: position\n                                    }));\n                                    this.props.updatedLoopSettings({\n                                      end: getMeasureEnd(position, measures)\n                                    });\n                                  }\n                                }}\n                                position={this.getArea(position)}\n                              ></Square>\n                            );\n                          })}\n                        </ButtonGroup>\n                      )\n                    )}\n                  </Grid>\n                </Grid>\n              </Grid>\n            </Grid>\n          ))}\n        </Grid>\n      </>\n    );\n  }\n}\n\nconst squareStyles = () =>\n  createStyles({\n    root: {\n      backgroundColor: (props: SquareProps) => getColor(props.sectiontype),\n      minWidth: \"12%\",\n      minHeight: \"15px\",\n      padding: \"0px\",\n      marginLeft: \"2px\",\n      marginBottom: \"2px\",\n      opacity: \"0.7\"\n    },\n    selected: {\n      opacity: \"1\",\n      borderTopColor: \"#000000\",\n      borderBottomColor: \"#000000\"\n    },\n    selectedLeft: {\n      borderLeftWidth: \"4px\",\n      borderLeftColor: \"#000000\"\n    },\n    selectedRight: {\n      borderRightWidth: \"4px\",\n      borderRightColor: \"#000000\"\n    }\n  });\n\ninterface SquareProps {\n  value: string;\n  sectiontype: SectionType;\n  onClick: () => void;\n  position: Area;\n}\n\ntype SquarePropsWithStyle = SquareProps & WithStyles<typeof squareStyles>;\n\nconst getCssClass = (props: SquarePropsWithStyle) => {\n  switch (props.position) {\n    case Area.OUTSIDE:\n      return clsx(props.classes.root);\n    case Area.INSIDE:\n      return clsx(props.classes.root, props.classes.selected);\n    case Area.LEFT:\n      return clsx(\n        props.classes.root,\n        props.classes.selected,\n        props.classes.selectedLeft\n      );\n    case Area.RIGHT:\n      return clsx(\n        props.classes.root,\n        props.classes.selected,\n        props.classes.selectedRight\n      );\n    case Area.LEFT_AND_RIGHT:\n      return clsx(\n        props.classes.root,\n        props.classes.selected,\n        props.classes.selectedLeft,\n        props.classes.selectedRight\n      );\n  }\n};\n\nconst Square = withStyles(squareStyles)((props: SquarePropsWithStyle) => {\n  // Do not override the css classes from parent element\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const { classes, ...other } = props;\n\n  return (\n    <Button\n      {...other}\n      onClick={() => props.onClick()}\n      className={getCssClass(props)}\n    >\n      {props.value}\n    </Button>\n  );\n});\n\nconst mapStateToProps = ({ analysis }: ApplicationState) => {\n  return {\n    sections: analysis.sections,\n    measures: analysis.measures\n  };\n};\n\nconst mapDispatchToProps = { updatedLoopSettings };\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withStyles(styles, { withTheme: true })(SectionOverview));\n","import { FormControl, InputLabel, NativeSelect } from \"@material-ui/core\";\nimport SliderInput from \"components/sliderInput/sliderInput\";\nimport { TimeSignatureType, toTimeSignatureType } from \"model/model\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { updatedRhythm } from \"states/analysis/analysisSlice\";\nimport { ApplicationState } from \"states/store\";\n\ninterface PropsFromState {\n  readonly timeSignature: TimeSignatureType;\n  readonly bpm: number;\n}\n\ninterface PropsFromDispatch {\n  updatedRhythm: typeof updatedRhythm;\n}\n\ntype AllProps = PropsFromState & PropsFromDispatch;\n\nclass PropertiesView extends Component<AllProps> {\n  render() {\n    return (\n      <>\n        <SliderInput\n          title=\"Bpm\"\n          value={this.props.bpm}\n          min={40}\n          max={220}\n          step={1}\n          onChange={(_e, bpm) => {\n            if (!Array.isArray(bpm)) {\n              this.props.updatedRhythm({ bpm: bpm });\n            }\n          }}\n        ></SliderInput>\n        <FormControl fullWidth={true}>\n          <InputLabel>Time Signature</InputLabel>\n          <NativeSelect\n            value={this.props.timeSignature}\n            onChange={(e) =>\n              this.props.updatedRhythm({\n                timeSignatureType: toTimeSignatureType(e.target.value)\n              })\n            }\n          >\n            <option value={TimeSignatureType.FOUR_FOUR}>4/4</option>\n            <option value={TimeSignatureType.THREE_FOUR}>3/4</option>\n          </NativeSelect>\n        </FormControl>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = ({ analysis }: ApplicationState) => {\n  return {\n    bpm: analysis.bpm,\n    timeSignature: analysis.timeSignature\n  };\n};\n\nconst mapDispatchToProps = {\n  updatedRhythm\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PropertiesView);\n","import {\n  createStyles,\n  MenuItem,\n  Theme,\n  WithStyles,\n  withStyles\n} from \"@material-ui/core\";\nimport Select from \"@material-ui/core/Select/Select\";\nimport React from \"react\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      minWidth: theme.measureSelect.minWidth\n    }\n  });\n\ninterface Props extends WithStyles<typeof styles> {\n  value: number;\n  min: number;\n  max: number;\n  onChange: (value: number) => void;\n  disabled?: boolean;\n}\n\nconst MeasureSelect = withStyles(styles)((props: Props) => {\n  const handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n    const newMeasure = event.target.value as number;\n    props.onChange(newMeasure);\n  };\n\n  return (\n    <Select\n      value={props.value}\n      onChange={handleChange}\n      className={props.classes.root}\n      disabled={props.disabled}\n    >\n      {new Array<number>(props.max - props.min + 1)\n        .fill(0)\n        .map((_, idx: number) => {\n          return (\n            <MenuItem key={props.min + idx} value={props.min + idx}>\n              {props.min + idx}\n            </MenuItem>\n          );\n        })}\n    </Select>\n  );\n});\n\nexport default MeasureSelect;\n","import {\n  createStyles,\n  MenuItem,\n  Theme,\n  WithStyles,\n  withStyles\n} from \"@material-ui/core\";\nimport Select from \"@material-ui/core/Select/Select\";\nimport clsx from \"clsx\";\nimport { SectionType } from \"model/model\";\nimport React from \"react\";\nimport { getColor } from \"styles/theme\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      minWidth: theme.sectionSelect.minWidth\n    },\n    colored: {\n      backgroundColor: (props: Props) => getColor(props.value)\n    }\n  });\n\ninterface Props {\n  value: SectionType;\n  onChange: (sectionType: SectionType) => void;\n}\n\ntype PropsWithStyle = Props & WithStyles<typeof styles>;\n\nconst SectionSelect = withStyles(styles)((props: PropsWithStyle) => {\n  const handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n    const newSection = event.target.value as SectionType;\n    props.onChange(newSection);\n  };\n\n  return (\n    <Select\n      value={props.value}\n      onChange={handleChange}\n      className={clsx(props.classes.root)}\n    >\n      {Object.values(SectionType).map((sectionType) => {\n        return sectionType === SectionType.UNDEFINED ? undefined : (\n          <MenuItem key={sectionType} value={sectionType}>\n            {sectionType}\n          </MenuItem>\n        );\n      })}\n    </Select>\n  );\n});\n\nexport default SectionSelect;\n","import {\n  createStyles,\n  IconButton,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  WithStyles,\n  withStyles\n} from \"@material-ui/core\";\nimport RemoveIcon from \"@material-ui/icons/Remove\";\nimport Log from \"components/log/log\";\nimport MeasureSelect from \"components/measureSelect/measureSelect\";\nimport SectionSelect from \"components/sectionSelect/sectionSelect\";\nimport { Section, Sections, SectionType } from \"model/model\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  addedSection,\n  removedSection,\n  updatedSection\n} from \"states/analysis/analysisSlice\";\nimport { ApplicationState } from \"states/store\";\nimport ArrayUtil from \"util/ArrayUtil\";\n\ninterface PropsFromState {\n  readonly sections: Sections;\n  readonly measuresCount: number;\n}\n\ninterface PropsFromDispatch {\n  addedSection: typeof addedSection;\n  updatedSection: typeof updatedSection;\n  removedSection: typeof removedSection;\n}\n\ntype AllProps = PropsFromState & PropsFromDispatch & WithStyles<typeof styles>;\n\nclass StructureView extends Component<AllProps> {\n  handleAddSection = (section: Section) => {\n    this.props.addedSection(section);\n  };\n\n  handleUpdatedSection = (id: string, before: Section, after: Section) => {\n    Log.info(\n      \"Change section \" +\n        id +\n        \" from \" +\n        JSON.stringify(before) +\n        \" to \" +\n        JSON.stringify(after),\n      StructureView.name\n    );\n\n    if (\n      parseInt(after.measures[0]) >\n      parseInt(after.measures[after.measures.length - 1])\n    )\n      return;\n\n    this.props.updatedSection({ before: id, after });\n  };\n\n  handleRemoveSection = (id: string) => {\n    this.props.removedSection(id);\n  };\n\n  render() {\n    return (\n      <TableContainer>\n        <Table size=\"small\">\n          <TableHead>\n            <TableRow>\n              <TableCell className={this.props.classes.column1}></TableCell>\n              <TableCell className={this.props.classes.column2}>\n                Section\n              </TableCell>\n              <TableCell className={this.props.classes.column3}>\n                First Measure\n              </TableCell>\n              <TableCell className={this.props.classes.column4}>\n                Last Measure\n              </TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {this.props.sections.allIds.map((id: string) => {\n              const section = this.props.sections.byId[id];\n              return (\n                <TableRow key={id}>\n                  <TableCell component=\"th\" scope=\"row\">\n                    {section.type !== SectionType.UNDEFINED && (\n                      <IconButton\n                        onClick={() => this.handleRemoveSection(id)}\n                        size=\"small\"\n                      >\n                        <RemoveIcon></RemoveIcon>\n                      </IconButton>\n                    )}\n                  </TableCell>\n                  <TableCell>\n                    {section.type === SectionType.UNDEFINED ? (\n                      \"UNDEFINED\"\n                    ) : (\n                      <SectionSelect\n                        value={section.type}\n                        onChange={(sectionType) =>\n                          this.handleUpdatedSection(id, section, {\n                            ...section,\n                            type: sectionType\n                          })\n                        }\n                      ></SectionSelect>\n                    )}\n                  </TableCell>\n                  <TableCell>\n                    <MeasureSelect\n                      disabled={section.type === SectionType.UNDEFINED}\n                      value={parseInt(section.measures[0])}\n                      min={0}\n                      max={this.props.measuresCount - 1}\n                      onChange={(measure) =>\n                        this.handleUpdatedSection(id, section, {\n                          ...section,\n                          measures: ArrayUtil.range(\n                            measure,\n                            parseInt(\n                              section.measures[section.measures.length - 1]\n                            )\n                          )\n                        })\n                      }\n                    />\n                  </TableCell>\n                  <TableCell>\n                    <MeasureSelect\n                      disabled={section.type === SectionType.UNDEFINED}\n                      value={parseInt(\n                        section.measures[section.measures.length - 1]\n                      )}\n                      min={0}\n                      max={this.props.measuresCount - 1}\n                      onChange={(measure) =>\n                        this.handleUpdatedSection(id, section, {\n                          ...section,\n                          measures: ArrayUtil.range(\n                            parseInt(section.measures[0]),\n                            measure\n                          )\n                        })\n                      }\n                    />\n                  </TableCell>\n                </TableRow>\n              );\n            })}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    );\n  }\n}\n\nconst mapStateToProps = ({ analysis }: ApplicationState) => {\n  return {\n    sections: analysis.sections,\n    measuresCount: analysis.measures.allIds.length\n  };\n};\n\nconst mapDispatchToProps = {\n  addedSection,\n  updatedSection,\n  removedSection\n};\n\nconst styles = () =>\n  createStyles({\n    column1: {\n      width: \"10%\"\n    },\n    column2: {\n      width: \"30%\"\n    },\n    column3: {\n      width: \"30%\"\n    },\n    column4: {\n      width: \"30%\"\n    }\n  });\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withStyles(styles, { withTheme: true })(StructureView));\n","/* eslint-disable react/forbid-component-props */\nimport { Grid } from \"@material-ui/core\";\nimport SectionOverview from \"components/sectionOverview/sectionOverview\";\nimport React, { Component } from \"react\";\n\nclass StructureNavigationView extends Component {\n  public render(): JSX.Element {\n    return (\n      <Grid\n        container\n        direction=\"column\"\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        alignContent=\"stretch\"\n      >\n        <Grid style={{ width: \"100%\" }}>\n          <SectionOverview></SectionOverview>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nexport default StructureNavigationView;\n","import { saveAs } from \"file-saver\";\nimport JSZip from \"jszip\";\nimport { PersistedState } from \"states/store\";\n\ninterface SaveOptions {\n  audioFileUrl: string;\n  state: PersistedState;\n}\n\nclass PersistenceApi {\n  private constructor() {\n    //not instanciable\n  }\n\n  private static songFile = \"song.blob\";\n  private static stateFile = \"state.json\";\n\n  static async save(filename: string, options: SaveOptions): Promise<void> {\n    const zip = new JSZip();\n    zip.file(PersistenceApi.stateFile, JSON.stringify(options.state));\n\n    const response = await fetch(options.audioFileUrl);\n    const audioBlob: Blob = await response.blob();\n    zip.file(PersistenceApi.songFile, audioBlob);\n\n    await zip.generateAsync({ type: \"blob\" }).then((file) => {\n      saveAs(file, filename);\n    });\n  }\n\n  static async open(\n    zip: File\n  ): Promise<{ audioBlob: Blob; state: PersistedState }> {\n    const archive = await JSZip.loadAsync(zip);\n\n    const songFile = archive.file(PersistenceApi.songFile);\n    if (songFile === null)\n      throw new Error(\n        \"Project must contain an audio file \" + PersistenceApi.songFile\n      );\n\n    const stateFile = archive.file(PersistenceApi.stateFile);\n    if (stateFile === null)\n      throw new Error(\n        \"Project must contain a project config/state file \" +\n          PersistenceApi.stateFile\n      );\n\n    const audioBlob = await songFile.async(\"blob\");\n\n    const json = await stateFile.async(\"text\");\n    const state: PersistedState = JSON.parse(json);\n\n    return { audioBlob, state };\n  }\n\n  static revokeLocalFile(url: string): void {\n    window.URL.revokeObjectURL(url);\n  }\n\n  static getLocalFileUrl(blob: Blob): string {\n    return window.URL.createObjectURL(blob);\n  }\n}\n\nexport default PersistenceApi;\n","import {\n  createStyles,\n  FormControl,\n  IconButton,\n  Input,\n  InputAdornment,\n  InputLabel,\n  Popover,\n  Theme,\n  Tooltip,\n  WithStyles,\n  withStyles\n} from \"@material-ui/core\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport BorderLeftIcon from \"@material-ui/icons/BorderLeft\";\nimport LoopIcon from \"@material-ui/icons/Loop\";\nimport MusicNoteIcon from \"@material-ui/icons/MusicNote\";\nimport PauseIcon from \"@material-ui/icons/Pause\";\nimport PlayArrowIcon from \"@material-ui/icons/PlayArrow\";\nimport SpeedIcon from \"@material-ui/icons/Speed\";\nimport SyncAltIcon from \"@material-ui/icons/SyncAlt\";\nimport ToggleButton from \"@material-ui/lab/ToggleButton\";\nimport ContentLayout from \"components/contentLayout/contentLayout\";\nimport Log from \"components/log/log\";\nimport SliderInput from \"components/sliderInput/sliderInput\";\nimport View from \"components/view/view\";\nimport React, { ReactElement } from \"react\";\nimport { connect } from \"react-redux\";\nimport { updatedRhythm } from \"states/analysis/analysisSlice\";\nimport {\n  toggledLoop,\n  triggeredPause,\n  triggeredPlay,\n  updatedPlaybackSettings\n} from \"states/audio/audioSlice\";\nimport { DialogType, openedDialog } from \"states/dialog/dialogsSlice\";\nimport {\n  enabledSyncFirstMeasureStart,\n  LoadingStatus\n} from \"states/project/projectSlice\";\nimport { ApplicationState } from \"states/store\";\nimport PropertiesView from \"views/properties/propertiesView\";\nimport StructureView from \"views/structure/structureView\";\nimport StructureNavigationView from \"views/structureNavigation/structureNavigationView\";\nimport WaveContainer from \"views/wave/waveContainer\";\n\ninterface PropsFromState {\n  readonly loaded: boolean;\n  readonly isPlaying: boolean;\n  readonly syncFirstMeasureStart: boolean;\n  readonly firstMeasureStart: number;\n  readonly detune: number;\n  readonly playbackRate: number;\n  readonly shouldLoop: boolean;\n}\n\ninterface PropsFromDispatch {\n  triggeredPlay: typeof triggeredPlay;\n  triggeredPause: typeof triggeredPause;\n  enabledSyncFirstMeasureStart: typeof enabledSyncFirstMeasureStart;\n  updatedRhythm: typeof updatedRhythm;\n  updatedPlaybackSettings: typeof updatedPlaybackSettings;\n  openedDialog: typeof openedDialog;\n  toggledLoop: typeof toggledLoop;\n}\n\ninterface Props extends WithStyles<typeof popoverStyles> {}\n\ntype AllProps = PropsFromState & PropsFromDispatch & Props;\n\ninterface State {\n  anchorEl: HTMLButtonElement | null;\n  activePopover: PopoverType;\n}\n\nenum PopoverType {\n  RHYTHM,\n  PLAYBACKRATE,\n  DETUNE,\n  STARTMEASURE,\n  NONE\n}\n\nclass StructurePage extends React.Component<AllProps, State> {\n  state: State = {\n    anchorEl: null,\n    activePopover: PopoverType.NONE\n  };\n\n  handlePopoverOpen = (\n    event: React.MouseEvent<HTMLButtonElement> | undefined,\n    type: PopoverType\n  ) => {\n    if (event && event.currentTarget)\n      this.setState({ anchorEl: event.currentTarget, activePopover: type });\n  };\n\n  handlePopoverClose = () => {\n    this.setState({ anchorEl: null, activePopover: PopoverType.NONE });\n  };\n\n  render() {\n    Log.info(\"render\", StructurePage.name);\n\n    const loopHintText = this.props.shouldLoop\n      ? \"Turn Loop off\"\n      : \"Turn Loop on\";\n    const loopButtonColor = this.props.shouldLoop ? \"secondary\" : \"primary\";\n    return (\n      <ContentLayout\n        topLeft={\n          <View\n            title=\"Song Overview\"\n            body={<WaveContainer />}\n            action={\n              <>\n                {this.props.isPlaying ? (\n                  <WaveformControlButton\n                    title=\"Pause\"\n                    icon={<PauseIcon />}\n                    onClick={() => this.props.triggeredPause()}\n                  />\n                ) : (\n                  <WaveformControlButton\n                    title=\"Play\"\n                    icon={<PlayArrowIcon />}\n                    onClick={() => this.props.triggeredPlay()}\n                  />\n                )}\n\n                <WaveformControlButton\n                  title={loopHintText}\n                  icon={<LoopIcon />}\n                  onClick={() => this.props.toggledLoop()}\n                  disabled={false}\n                  color={loopButtonColor}\n                />\n                <WaveformControlButton\n                  title=\"Playback Rate\"\n                  icon={<SpeedIcon />}\n                  onClick={(e) =>\n                    this.handlePopoverOpen(e, PopoverType.PLAYBACKRATE)\n                  }\n                  disabled={false}\n                />\n                <WaveformControlButton\n                  title=\"Detune\"\n                  icon={<MusicNoteIcon />}\n                  onClick={(e) => this.handlePopoverOpen(e, PopoverType.DETUNE)}\n                  disabled={false}\n                />\n                <Popover\n                  className={this.props.classes.popover}\n                  open={this.state.activePopover !== PopoverType.NONE}\n                  anchorEl={this.state.anchorEl}\n                  onClose={() => this.handlePopoverClose()}\n                  anchorOrigin={{\n                    vertical: \"bottom\",\n                    horizontal: \"left\"\n                  }}\n                  anchorPosition={{ top: 50, left: 0 }}\n                  transformOrigin={{\n                    vertical: \"top\",\n                    horizontal: \"center\"\n                  }}\n                >\n                  {this.state.activePopover !== PopoverType.NONE && (\n                    <div className={this.props.classes.content}>\n                      {PopoverContent(this.state.activePopover, this.props)}\n                    </div>\n                  )}\n                </Popover>\n              </>\n            }\n          ></View>\n        }\n        topRight={\n          <View title=\"Song Measures\" body={<StructureNavigationView />}></View>\n        }\n        bottomLeft={\n          <View\n            title=\"Song Sections\"\n            action={\n              <>\n                <WaveformControlButton\n                  title=\"Start Measure 0\"\n                  icon={<BorderLeftIcon />}\n                  onClick={(e) =>\n                    this.handlePopoverOpen(e, PopoverType.STARTMEASURE)\n                  }\n                  disabled={false}\n                />\n                <WaveformControlButton\n                  title=\"Add section\"\n                  icon={<AddIcon />}\n                  onClick={() =>\n                    this.props.openedDialog(DialogType.ADD_SECTION)\n                  }\n                />\n              </>\n            }\n            body={<StructureView />}\n          ></View>\n        }\n        bottomRight={\n          <View title=\"Song Properties\" body={<PropertiesView />}></View>\n        }\n      ></ContentLayout>\n    );\n  }\n}\n\nconst popoverStyles = (theme: Theme) =>\n  createStyles({\n    content: {\n      width: theme.popover.width,\n      minHeight: theme.popover.minHeight,\n      margin: theme.popover.margin,\n      marginTop: theme.popover.marginTop\n    },\n    popover: {\n      height: \"400px\"\n    }\n  });\n\nconst waveformControlButtonStyles = () =>\n  createStyles({\n    root: {\n      marginTop: \"8px\",\n      marginRight: \"5px\"\n    }\n  });\n\ninterface WaveformControlButtonProps {\n  title: string;\n  icon: ReactElement;\n  disabled?: boolean;\n  onClick?: (e?: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n  color?: \"primary\" | \"secondary\";\n}\n\nconst WaveformControlButton = withStyles(waveformControlButtonStyles)(\n  (\n    props: WaveformControlButtonProps &\n      WithStyles<typeof waveformControlButtonStyles>\n  ) => {\n    const button = (\n      <IconButton\n        className={props.classes.root}\n        onClick={props.onClick}\n        size=\"small\"\n        disabled={props.disabled}\n        color={props.color}\n      >\n        {props.icon}\n      </IconButton>\n    );\n\n    if (props.disabled) return button;\n\n    return <Tooltip title={props.title}>{button}</Tooltip>;\n  }\n);\n\nconst PopoverContent = (type: PopoverType, props: AllProps) => {\n  switch (type) {\n    case PopoverType.DETUNE:\n      return <DetunePopover {...props} />;\n    case PopoverType.PLAYBACKRATE:\n      return <PlaybackRatePopover {...props} />;\n    case PopoverType.STARTMEASURE:\n      return <StartMeasurePopover {...props} />;\n    default:\n      throw Error(\"Popup type undefined: \" + type);\n  }\n};\n\nconst DetunePopover = (props: AllProps) => (\n  <SliderInput\n    title=\"Detune\"\n    value={props.detune}\n    min={-12}\n    max={12}\n    step={0.5}\n    onChange={(e, detune) => {\n      if (!Array.isArray(detune) && detune !== props.detune) {\n        props.updatedPlaybackSettings({ detune: detune });\n      }\n    }}\n  ></SliderInput>\n);\n\nconst startMeasurePopoverStyles = () =>\n  createStyles({\n    toggleButton: {\n      width: \"15px\",\n      height: \"25px\"\n    }\n  });\n\ninterface StartMeasurePopoverProps {\n  firstMeasureStart: number;\n  syncFirstMeasureStart: boolean;\n  enabledSyncFirstMeasureStart: typeof enabledSyncFirstMeasureStart;\n}\n\nconst StartMeasurePopover = withStyles(startMeasurePopoverStyles)(\n  (\n    props: StartMeasurePopoverProps &\n      WithStyles<typeof startMeasurePopoverStyles>\n  ) => (\n    <FormControl fullWidth={true}>\n      <InputLabel>Start Measure 1</InputLabel>\n      <Input\n        type=\"text\"\n        id=\"startMeasure1\"\n        value={props.firstMeasureStart}\n        startAdornment={\n          <InputAdornment position=\"start\">\n            <Tooltip\n              title=\"Toggle sync with mouse click.\n          If enabled, clicking into the waveform will update the start of measure 0 to the selected position.\"\n            >\n              <ToggleButton\n                className={props.classes.toggleButton}\n                value=\"check\"\n                selected={props.syncFirstMeasureStart}\n                onChange={() => {\n                  props.enabledSyncFirstMeasureStart(\n                    !props.syncFirstMeasureStart\n                  );\n                }}\n              >\n                <SyncAltIcon />\n              </ToggleButton>\n            </Tooltip>\n          </InputAdornment>\n        }\n      />\n    </FormControl>\n  )\n);\n\nconst PlaybackRatePopover = (props: AllProps) => (\n  <SliderInput\n    title=\"Playback rate\"\n    value={props.playbackRate}\n    min={0.4}\n    max={1.2}\n    step={0.05}\n    onChange={(e, playbackRate) => {\n      if (!Array.isArray(playbackRate) && playbackRate !== props.playbackRate) {\n        props.updatedPlaybackSettings({ playbackRate: playbackRate });\n      }\n    }}\n  ></SliderInput>\n);\n\nconst mapStateToProps = ({ project, audio, analysis }: ApplicationState) => {\n  return {\n    loaded: project.status === LoadingStatus.INITIALIZED,\n    isPlaying: audio.isPlaying,\n    firstMeasureStart: analysis.firstMeasureStart,\n    syncFirstMeasureStart: project.syncFirstMeasureStart,\n    detune: audio.detune,\n    playbackRate: audio.playbackRate,\n    shouldLoop: audio.isLooping\n  };\n};\n\nconst mapDispatchToProps = {\n  triggeredPlay,\n  triggeredPause,\n  enabledSyncFirstMeasureStart,\n  updatedRhythm,\n  updatedPlaybackSettings,\n  openedDialog,\n  toggledLoop\n};\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withStyles(popoverStyles, { withTheme: true })(StructurePage));\n","import Log from \"components/log/log\";\nimport { EventEmitterForPlayerEvents, PlayerAdapter, Segment } from \"peaks.js\";\nimport { now, PitchShift, Player as TonejsPlayer, Transport } from \"tone\";\n\n/**\n * External Tone.js based Player for Peaks.js\n */\nclass AudioPlayer implements PlayerAdapter {\n  shouldLoop: boolean;\n  player: TonejsPlayer;\n  pitchShift: PitchShift;\n  detune: number;\n  eventEmitter: EventEmitterForPlayerEvents | undefined;\n  loopStart: number;\n  loopEnd: number;\n\n  constructor(\n    private audioBuffer: AudioBuffer,\n    private onSongComplete: () => void\n  ) {\n    this.player = new TonejsPlayer(this.audioBuffer);\n    this.pitchShift = new PitchShift();\n    this.detune = 0;\n    this.shouldLoop = false;\n    this.loopStart = 0;\n    this.loopEnd = 0;\n\n    this.player.sync();\n    this.player.start();\n\n    this.player.connect(this.pitchShift);\n    this.pitchShift.toDestination();\n  }\n\n  init = (eventEmitter: EventEmitterForPlayerEvents): void => {\n    Log.info(\"init\", AudioPlayer.name);\n\n    this.eventEmitter = eventEmitter;\n\n    Transport.scheduleRepeat(() => {\n      eventEmitter.emit(\"player.timeupdate\", this.getCurrentTime());\n\n      if (\n        this.shouldLoop &&\n        (this.getCurrentTime() >= this.loopEnd ||\n          this.getCurrentTime() <= this.loopStart)\n      ) {\n        this.seek(this.loopStart);\n      }\n\n      if (this.getCurrentTime() >= this.getDuration()) {\n        Transport.stop();\n        this.onSongComplete();\n      }\n    }, 0.25);\n\n    eventEmitter.emit(\"player.canplay\");\n  };\n\n  shiftToSemitones = (shift: number): number => 12 * Math.log2(1 / shift);\n\n  setPlaybackRate(playbackRate: number): void {\n    this.player.playbackRate = playbackRate;\n\n    // Detune to keep consistent pitch, even if the playback speed changed\n    this.setDetune(this.detune);\n\n    // Adjust playback to new playbackrate\n    if (this.isPlaying()) {\n      this.seek(this.getCurrentTime());\n    }\n  }\n\n  setDetune(detune: number): void {\n    this.detune = detune;\n\n    this.pitchShift.pitch =\n      this.shiftToSemitones(this.player.playbackRate) + detune;\n  }\n\n  toggleLoop(): void {\n    this.shouldLoop = !this.shouldLoop;\n  }\n\n  setLoop(start: number, end: number): void {\n    if (this.loopStart < 0 || this.loopStart > this.getDuration())\n      throw new Error(\n        \"Loop start invalid. Must be a millisecond between 0 and \" +\n          this.getDuration()\n      );\n    if (this.loopEnd < this.loopStart || this.loopEnd > this.getDuration())\n      throw new Error(\n        \"Loop start invalid. Must be a millisecond between \" +\n          this.loopStart +\n          \" and \" +\n          this.getDuration()\n      );\n\n    this.loopStart = start;\n    this.loopEnd = end;\n  }\n\n  destroy = (): void => {\n    Log.info(\"destroy\", AudioPlayer.name);\n\n    this.player.dispose();\n    this.pitchShift.dispose();\n    Transport.cancel();\n    Transport.position = 0;\n  };\n\n  play = (): Promise<void> => {\n    Transport.start(now(), this.getCurrentTime() / this.player.playbackRate);\n    this.eventEmitter?.emit(\n      \"player.play\",\n      this.getCurrentTime() / this.player.playbackRate\n    );\n\n    return Promise.resolve();\n  };\n\n  playSegment = (segment: Segment): void => {\n    Transport.start(now(), segment.startTime / this.player.playbackRate);\n    this.eventEmitter?.emit(\n      \"player.play\",\n      this.getCurrentTime() / this.player.playbackRate\n    );\n  };\n\n  pause = (): void => {\n    Transport.pause();\n    this.eventEmitter?.emit(\"player.pause\", this.getCurrentTime());\n  };\n\n  isPlaying = (): boolean => {\n    return Transport.state === \"started\";\n  };\n\n  isSeeking = (): boolean => {\n    return false;\n  };\n\n  getCurrentTime = (): number => {\n    return this.player.toSeconds(Transport.position) * this.player.playbackRate;\n  };\n\n  getDuration = (): number => {\n    return this.player.buffer.duration;\n  };\n\n  seek = (time: number): void => {\n    const normalizedTime = time / this.player.playbackRate;\n\n    Transport.seconds = normalizedTime;\n    this.eventEmitter?.emit(\"player.seeked\", this.getCurrentTime());\n    this.eventEmitter?.emit(\"player.timeupdate\", this.getCurrentTime());\n  };\n}\n\nexport default AudioPlayer;\n","import { createAction } from \"@reduxjs/toolkit\";\nimport PersistenceApi from \"api/persistenceApi\";\nimport Log from \"components/log/log\";\nimport { Measures, Sections } from \"model/model\";\nimport Peaks, { PeaksInstance } from \"peaks.js\";\nimport { Action, AnyAction, Dispatch, Middleware, MiddlewareAPI } from \"redux\";\nimport { updatedRhythm } from \"states/analysis/analysisSlice\";\nimport {\n  toggledLoop,\n  triggeredPause,\n  triggeredPlay,\n  updatedLoopSettings,\n  updatedPlaybackSettings\n} from \"states/audio/audioSlice\";\nimport AudioPlayer from \"states/middleware/audioPlayer\";\nimport PeaksConfig from \"states/middleware/peaksConfig\";\nimport {\n  createdProject,\n  hotReloaded,\n  initializedProject\n} from \"states/project/projectSlice\";\nimport { ApplicationState } from \"states/store\";\nimport * as Tone from \"tone\";\n\nexport const switchAudioFile = createAction<{ url: string }>(\"switchAudioFile\");\nexport const updateWaveform = createAction<{\n  sections: Sections;\n  measures: Measures;\n}>(\"updateWaveform\");\n\n/**\n * Redux Middleware for handling audio related actions (sync and async).\n *\n * This middleware is basically the glue code between internal app state changes\n * and the major 3rd party libraries Peaks.js (the audio waveform) and Tone.js (the audio player).\n *\n */\nclass AudioMiddleware {\n  peaks: PeaksInstance | undefined;\n  player: AudioPlayer | undefined;\n  url: string | undefined;\n\n  private getPlayer = () => {\n    if (!this.player) throw new Error(\"player undefined\");\n    return this.player;\n  };\n\n  /**\n   * Redux Middleware function. Intercepts all audio related actions.\n   */\n  createMiddleware: Middleware<Dispatch, ApplicationState> =\n    (dispatch) =>\n    (next: Dispatch<AnyAction>) =>\n    (action: Action<string>): AnyAction => {\n      Log.info(\"action \" + action.type, AudioMiddleware.name);\n\n      //Case: Audio file changed and Peaks.js and Tone.js should be initialized\n      if (createdProject.match(action)) {\n        this.initAudioContext(action.payload.project.audioUrl, dispatch);\n\n        return next(action);\n      }\n\n      //Case: Application hot reloaded during development\n      if (hotReloaded.match(action)) {\n        //TODO: support Hot reload for audio files https://github.com/tscz/transcribe/issues/39\n        //this.initAudioContext(dispatch.getState().project.audioUrl, dispatch);\n\n        return next(action);\n      }\n\n      // Case: Play was triggered\n      if (triggeredPlay.match(action)) {\n        this.getPlayer().play();\n        return next(action);\n      }\n\n      // Case: Pause was triggered\n      if (triggeredPause.match(action)) {\n        this.getPlayer().pause();\n        return next(action);\n      }\n\n      // Case: Waveform needs to be updated\n      if (updateWaveform.match(action)) {\n        this.repaintWaveform(action.payload.sections, action.payload.measures);\n\n        return next(action);\n      }\n\n      // Case: playback settings need to be updated\n      if (updatedPlaybackSettings.match(action)) {\n        if (action.payload.playbackRate)\n          this.getPlayer().setPlaybackRate(action.payload.playbackRate);\n\n        if (action.payload.detune)\n          this.getPlayer().setDetune(action.payload.detune);\n\n        return next(action);\n      }\n\n      // Case: Looping needs to be toggled\n      if (toggledLoop.match(action)) {\n        this.getPlayer().toggleLoop();\n\n        return next(action);\n      }\n\n      // Case: Looping settings should be updated\n      if (updatedLoopSettings.match(action)) {\n        const start =\n          action.payload.start ?? dispatch.getState().audio.loopStart;\n        const end = action.payload.end ?? dispatch.getState().audio.loopEnd;\n\n        this.getPlayer().seek(start);\n        this.getPlayer().setLoop(start, end);\n        this.setZoom(start, end);\n\n        return next(action);\n      }\n\n      // Case: given action does not trigger audio related side effects\n      return next(action);\n    };\n\n  private cleanupPreviousInit() {\n    this.peaks?.destroy();\n    this.player?.destroy();\n\n    if (this.url) PersistenceApi.revokeLocalFile(this.url);\n  }\n\n  private initAudioContext(\n    url: string,\n    dispatch: MiddlewareAPI<Dispatch<AnyAction>, ApplicationState>\n  ) {\n    this.cleanupPreviousInit();\n\n    // Read local audio file url into an audiobuffer\n    this.url = url;\n\n    Log.info(\n      \"start fetch audio file into audiobuffer from \" + this.url,\n      AudioMiddleware.name\n    );\n    fetch(this.url)\n      .then((response) => response.arrayBuffer())\n      .then((buffer) => Tone.context.decodeAudioData(buffer))\n      .then((audioBuffer) => {\n        Log.info(\"audiobuffer loaded from \" + this.url, AudioMiddleware.name);\n        initTonejsAndPeaksjs(audioBuffer);\n      });\n\n    const initTonejsAndPeaksjs = (audioBuffer: AudioBuffer) => {\n      Log.info(\"init peaks start\", AudioMiddleware.name);\n\n      this.player = new AudioPlayer(audioBuffer, () => {});\n\n      Peaks.init(PeaksConfig.create(audioBuffer, this.player), (err, peaks) => {\n        if (err) throw new Error(\"Peaks could not be initialized: \" + err);\n\n        if (!peaks)\n          throw new Error(\"Peaks instance is not correctly initialized.\");\n\n        Log.info(\"init peaks end\", AudioMiddleware.name);\n\n        peaks.on(\"player.seeked\", (time: number) => {\n          if (dispatch.getState().project.syncFirstMeasureStart)\n            dispatch.dispatch(updatedRhythm({ firstMeasureStart: time }));\n        });\n\n        this.peaks = peaks;\n\n        dispatch.dispatch(initializedProject());\n        dispatch.dispatch(updatedRhythm({ duration: audioBuffer.duration }));\n      });\n    };\n  }\n\n  private repaintWaveform(sections: Sections, measures: Measures) {\n    const timePerMeasure = this.computeSecondsPerMeasure(measures);\n\n    this.peaks?.segments.removeAll();\n    this.peaks?.segments.add(\n      PeaksConfig.sectionsToSegment(sections, measures, timePerMeasure)\n    );\n    this.peaks?.points.removeAll();\n    this.peaks?.points.add(PeaksConfig.measuresToPoints(measures));\n  }\n\n  private computeSecondsPerMeasure = (measures: Measures) => {\n    if (!measures || !measures.byId[\"1\"] || !measures.byId[\"0\"]) return 0;\n    return measures.byId[\"1\"].time - measures.byId[\"0\"].time;\n  };\n\n  private setZoom(start: number, end: number) {\n    const zoomview: Peaks.WaveformZoomView | null | undefined =\n      this.peaks?.views.getView(\"zoomview\");\n\n    if (zoomview) {\n      const duration = end - start;\n      zoomview.setZoom({ seconds: duration });\n      zoomview.setStartTime(start);\n    }\n  }\n}\n\nexport default AudioMiddleware;\n","import { createStyles, WithStyles, withStyles } from \"@material-ui/core\";\nimport Log from \"components/log/log\";\nimport React, { Component } from \"react\";\nimport {\n  OVERVIEW_CONTAINER,\n  ZOOMVIEW_CONTAINER\n} from \"states/middleware/peaksConfig\";\n\nconst styles = () =>\n  createStyles({\n    zoomview: {\n      maxHeight: \"400px\"\n    },\n    overview: {\n      marginTop: \"30px\",\n      height: \"50px\"\n    }\n  });\n\nclass WaveView extends Component<WithStyles<typeof styles>> {\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  render() {\n    Log.info(\"render\", WaveView.name);\n    return (\n      <div>\n        <div id=\"waveform-container\">\n          <div\n            id={ZOOMVIEW_CONTAINER}\n            className={this.props.classes.zoomview}\n          ></div>\n          <div\n            id={OVERVIEW_CONTAINER}\n            className={this.props.classes.overview}\n          ></div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(WaveView);\n","import CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Log from \"components/log/log\";\nimport { Measures, Sections } from \"model/model\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { updateWaveform } from \"states/middleware/audioMiddleware\";\nimport { hotReloaded, LoadingStatus } from \"states/project/projectSlice\";\nimport { ApplicationState } from \"states/store\";\n\nimport WaveView from \"./waveView\";\n\ninterface PropsFromState {\n  status: LoadingStatus;\n  sections: Sections;\n  measures: Measures;\n  audioUrl: string;\n}\n\ninterface PropsFromDispatch {\n  hotReloaded: typeof hotReloaded;\n  updateWaveform: typeof updateWaveform;\n}\n\ntype AllProps = PropsFromState & PropsFromDispatch;\n\nclass WaveContainer extends Component<AllProps> {\n  constructor(props: AllProps) {\n    super(props);\n\n    if (process.env.NODE_ENV !== \"production\" && props.audioUrl) {\n      Log.info(\"Hot reload with url=\" + props.audioUrl, WaveContainer.name);\n      this.props.hotReloaded();\n    }\n  }\n\n  componentDidUpdate(prevProps: AllProps) {\n    if (\n      prevProps.sections !== this.props.sections ||\n      prevProps.measures !== this.props.measures\n    ) {\n      this.props.updateWaveform({\n        sections: this.props.sections,\n        measures: this.props.measures\n      });\n    }\n  }\n\n  render() {\n    Log.info(\"render\", WaveContainer.name);\n\n    return (\n      <div>\n        {this.props.status !== LoadingStatus.INITIALIZED && (\n          <CircularProgress />\n        )}\n        <WaveView />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = ({ project, analysis }: ApplicationState) => {\n  return {\n    status: project.status,\n    sections: analysis.sections,\n    measures: analysis.measures,\n    audioUrl: project.audioUrl\n  };\n};\n\nconst mapDispatchToProps = {\n  hotReloaded,\n  updateWaveform: updateWaveform\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WaveContainer);\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M339.063,60.817H228.938c-7.628,0-13.834,6.206-13.834,13.834v99.816l0,0c-4.47-2.616-9.666-4.123-15.208-4.123 c-16.658,0-30.21,13.552-30.21,30.209s13.552,30.209,30.21,30.209c16.657,0,30.209-13.552,30.209-30.209v-86.423h107.95v60.338 c-4.47-2.616-9.666-4.123-15.208-4.123c-16.657,0-30.209,13.552-30.209,30.209s13.552,30.209,30.209,30.209 s30.209-13.552,30.209-30.209V74.81l0,0C353.056,67.093,346.778,60.817,339.063,60.817z M199.896,215.759 c-8.387,0-15.209-6.822-15.209-15.208s6.822-15.208,15.209-15.208c8.385,0,15.208,6.822,15.208,15.208 S208.282,215.759,199.896,215.759z M322.848,215.759c-8.385,0-15.208-6.822-15.208-15.208s6.822-15.208,15.208-15.208 c8.386,0,15.208,6.822,15.208,15.208S331.232,215.759,322.848,215.759z M338.055,99.127H230.105V75.818h107.95v23.309H338.055z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M254.433,317.548h-97.159c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5h97.159c4.143,0,7.5-3.358,7.5-7.5 S258.577,317.548,254.433,317.548z\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M254.433,355.124h-97.159c-4.143,0-7.5,3.358-7.5,7.5c0,4.142,3.357,7.5,7.5,7.5h97.159c4.143,0,7.5-3.358,7.5-7.5 C261.934,358.482,258.577,355.124,254.433,355.124z\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M254.433,392.698h-97.159c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5h97.159c4.143,0,7.5-3.358,7.5-7.5 S258.577,392.698,254.433,392.698z\"\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M387.082,317.548h-97.16c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5h97.16c4.143,0,7.5-3.358,7.5-7.5 S391.226,317.548,387.082,317.548z\"\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M329.632,274.728c0-4.142-3.357-7.5-7.5-7.5h-97.16c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5h97.16 C326.274,282.228,329.632,278.87,329.632,274.728z\"\n});\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M387.082,355.124h-97.16c-4.143,0-7.5,3.358-7.5,7.5c0,4.142,3.357,7.5,7.5,7.5h97.16c4.143,0,7.5-3.358,7.5-7.5 C394.583,358.482,391.226,355.124,387.082,355.124z\"\n});\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M254.433,430.273h-97.159c-4.143,0-7.5,3.358-7.5,7.5c0,4.142,3.357,7.5,7.5,7.5h97.159c4.143,0,7.5-3.358,7.5-7.5 C261.934,433.631,258.577,430.273,254.433,430.273z\"\n});\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M444.04,0H289.236c-4.143,0-7.5,3.358-7.5,7.5s3.357,7.5,7.5,7.5H444.04c4.444,0,8.061,3.616,8.061,8.06v215.437 c0,4.142,3.357,7.5,7.5,7.5s7.5-3.358,7.5-7.5V23.061C467.102,10.346,456.757,0,444.04,0z\"\n});\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M459.602,266c-4.143,0-7.5,3.358-7.5,7.5v119.197c-4.693,0-151.358,0-162.179,0c-4.143,0-7.5,3.358-7.5,7.5 s3.357,7.5,7.5,7.5h59.335c-0.939,2.51-1.457,5.226-1.457,8.06v14.514h-57.878c-4.143,0-7.5,3.358-7.5,7.5 c0,4.142,3.357,7.5,7.5,7.5H347.8v51.725H122.344c-4.444,0-8.061-3.616-8.061-8.06V23.061c0-4.444,3.616-8.06,8.061-8.06h131.889 c4.143,0,7.5-3.358,7.5-7.5s-3.357-7.5-7.5-7.5H67.959l0,0C55.243,0,44.898,10.346,44.898,23.061v465.877 c0,12.716,10.346,23.061,23.061,23.061l0,0h287.341c0.041,0,0.08-0.005,0.12-0.006c2.005-0.033,3.861-0.87,5.184-2.191 l104.301-104.3c1.333-1.332,2.196-3.245,2.196-5.303V273.502C467.102,269.358,463.744,266,459.602,266z M100.736,496.999H67.959 c-4.444,0-8.06-3.616-8.06-8.06V23.061c0-4.444,3.615-8.06,8.06-8.06h32.777c-0.901,2.496-1.453,5.115-1.453,8.06v465.877 C99.283,491.82,99.815,494.448,100.736,496.999z M362.801,486.391v-70.632c0-4.444,3.615-8.06,8.06-8.06c7.587,0,62.354,0,70.633,0 C433.153,416.039,371.141,478.051,362.801,486.391z\"\n});\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref18 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref19 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref20 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref21 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref22 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref23 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref24 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref25 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref26 = /*#__PURE__*/React.createElement(\"g\", null);\n\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    style: {\n      enableBackground: \"new 0 0 512 512\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#EADCD6\"\n    },\n    d: \"M107.736,489.624V23.576c0-8.598,6.969-15.567,15.567-15.567H68.896 c-8.598,0-15.567,6.969-15.567,15.567v466.047c0,8.598,6.969,15.567,15.567,15.567h54.405 C114.704,505.191,107.736,498.221,107.736,489.624z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#DDCDC7\"\n    },\n    d: \"M73.331,489.624V23.576c0-8.598,6.969-15.567,15.566-15.567H68.896 c-8.598,0-15.566,6.969-15.566,15.567v466.047c0,8.598,6.969,15.567,15.566,15.567h20.001 C80.301,505.191,73.331,498.221,73.331,489.624z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#EADCD6\"\n    },\n    d: \"M444.015,8.01H122.202c-8.598,0-15.567,6.969-15.567,15.567v466.047 c0,8.598,6.969,15.567,15.567,15.567h233.041l104.339-104.339c0-3.762,0-370.62,0-377.275C459.582,14.98,452.612,8.01,444.015,8.01z \"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#DDCDC7\"\n    },\n    d: \"M127.051,489.624V23.577c0-8.598,6.969-15.567,15.567-15.567h-20.415 c-8.597,0-15.566,6.969-15.566,15.567v466.047c0,8.598,6.969,15.567,15.566,15.567h20.415 C134.02,505.191,127.051,498.221,127.051,489.624z\"\n  }), /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#F8BF00\"\n    },\n    d: \"M353.931,107.32H230.98V75.342c0-3.498,2.836-6.333,6.333-6.333h110.125 c3.586,0,6.492,2.907,6.492,6.492v31.819H353.931z\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    style: {\n      fill: \"#F8BF00\"\n    },\n    cx: 201.212,\n    cy: 201.242,\n    r: 22.708\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    style: {\n      fill: \"#F8BF00\"\n    },\n    cx: 331.22,\n    cy: 201.242,\n    r: 22.708\n  })), /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#EFA603\"\n    },\n    d: \"M257.315,69.008h-20.001c-3.498,0-6.333,2.836-6.333,6.333v31.977h20.001V75.342 C250.981,71.844,253.817,69.008,257.315,69.008z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#EFA603\"\n    },\n    d: \"M198.503,201.242c0-8.952,5.181-16.691,12.708-20.389c-3.018-1.483-6.411-2.319-10.001-2.319 c-12.542,0-22.708,10.167-22.708,22.708c0,12.542,10.167,22.708,22.708,22.708c3.589,0,6.982-0.836,10.001-2.319 C203.685,217.933,198.503,210.195,198.503,201.242z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#EFA603\"\n    },\n    d: \"M328.516,201.242c0-8.952,5.181-16.691,12.708-20.389c-3.018-1.483-6.411-2.319-10.001-2.319 c-12.542,0-22.708,10.167-22.708,22.708c0,12.542,10.167,22.708,22.708,22.708c3.589,0,6.982-0.836,10.001-2.319 C333.697,217.933,328.516,210.195,328.516,201.242z\"\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#DDCDC7\"\n    },\n    d: \"M459.582,400.852h-88.772c-8.598,0-15.567,6.969-15.567,15.567v88.772L459.582,400.852z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#C9BCB8\"\n    },\n    d: \"M375.245,416.418c0-8.598,6.969-15.567,15.567-15.567H370.81c-8.598,0-15.567,6.969-15.567,15.567 v88.772l20.001-20.001V416.418z\"\n  }), _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17, _ref18, _ref19, _ref20, _ref21, _ref22, _ref23, _ref24, _ref25, _ref26);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.807dd646.svg\";\nexport { ForwardRef as ReactComponent };","import {\n  createStyles,\n  InputBase,\n  Theme,\n  WithStyles,\n  withStyles\n} from \"@material-ui/core\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Paper from \"@material-ui/core/Paper\";\nimport MenuIcon from \"@material-ui/icons/OpenInBrowser\";\nimport PersistenceApi from \"api/persistenceApi\";\nimport React from \"react\";\n\nexport enum FileType {\n  AUDIO = \"audio/*\",\n  ZIP = \".zip\"\n}\n\nconst toString = (type: FileType) => {\n  switch (type) {\n    case FileType.AUDIO:\n      return \"Audio File\";\n    case FileType.ZIP:\n      return \"Project Zip File\";\n  }\n};\n\ninterface Props extends WithStyles<typeof stylesForFileInput> {\n  id: string;\n  fileType: FileType;\n  callback: (file: File, fileUrl: string) => void;\n}\n\ninterface State {\n  display: string;\n}\n\nconst stylesForFileInput = (theme: Theme) =>\n  createStyles({\n    root: {\n      padding: \"4px 0px\",\n      display: \"flex\",\n      alignItems: \"center\",\n      width: \"100%\"\n    },\n    input: {\n      marginLeft: theme.spacing(1),\n      flex: 1\n    },\n    iconButton: {\n      padding: 10\n    }\n  });\n\nclass FileInput extends React.Component<Props, State> {\n  state: State = {\n    display: \"\"\n  };\n\n  fileInput: React.RefObject<HTMLInputElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.fileInput = React.createRef();\n  }\n\n  handleChange = (fileList: FileList | null) => {\n    if (fileList === null) return;\n\n    const file = fileList[0];\n    const fileURL = PersistenceApi.getLocalFileUrl(file);\n\n    this.setState({ display: file.name });\n    this.props.callback(file, fileURL);\n  };\n\n  render() {\n    return (\n      <>\n        <Paper component=\"form\" className={this.props.classes.root}>\n          <InputBase\n            className={this.props.classes.input}\n            placeholder={\"Choose \" + toString(this.props.fileType) + \" ...\"}\n            inputProps={{\n              \"aria-label\": \"Choose \" + toString(this.props.fileType)\n            }}\n            value={this.state.display}\n            readOnly={true}\n            onClick={() => this.fileInput.current?.click()}\n          />\n          <IconButton\n            aria-label=\"menu\"\n            onClick={() => this.fileInput.current?.click()}\n            className={this.props.classes.iconButton}\n          >\n            <MenuIcon />{\" \"}\n          </IconButton>\n        </Paper>\n        <input\n          hidden={true}\n          id={this.props.id}\n          type=\"file\"\n          accept={this.props.fileType}\n          ref={this.fileInput}\n          onChange={(e) => this.handleChange(e.target.files)}\n        ></input>\n      </>\n    );\n  }\n}\n\nexport default withStyles(stylesForFileInput, { withTheme: true })(FileInput);\n","import { createStyles, Grid, Theme } from \"@material-ui/core\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Button from \"@material-ui/core/Button\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport { WithStyles, withStyles } from \"@material-ui/core/styles\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport AlbumIcon from \"@material-ui/icons/Album\";\nimport HomeIcon from \"@material-ui/icons/Home\";\nimport MusicVideoIcon from \"@material-ui/icons/MusicVideo\";\nimport PrintIcon from \"@material-ui/icons/Print\";\nimport RadioIcon from \"@material-ui/icons/Radio\";\nimport Log from \"components/log/log\";\nimport Toggle from \"components/toggle/toggle\";\nimport VersionInfo from \"components/versionInfo/versionInfo\";\nimport DefaultPage from \"pages/default/defaultPage\";\nimport DrumPage from \"pages/drum/drumPage\";\nimport GuitarPage from \"pages/guitar/guitarPage\";\nimport HarmonyPage from \"pages/harmony/harmonyPage\";\nimport PrintPage from \"pages/print/printPage\";\nimport StructurePage from \"pages/structure/structurePage\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { DialogType, openedDialog } from \"states/dialog/dialogsSlice\";\nimport { LoadingStatus, Page, switchedPage } from \"states/project/projectSlice\";\nimport { ApplicationState } from \"states/store\";\n\nimport { ReactComponent as Logo } from \"./logo.svg\";\n\ninterface PropsFromState {\n  currentPage: Page;\n  status: LoadingStatus;\n  title: string;\n}\n\ninterface PropsFromDispatch {\n  switchedPage: typeof switchedPage;\n  openedDialog: typeof openedDialog;\n}\n\ninterface Props extends WithStyles<typeof stylesForApp> {\n  theme: Theme;\n}\n\ntype AllProps = Props & PropsFromState & PropsFromDispatch;\n\nclass App extends React.Component<AllProps> {\n  render() {\n    Log.info(\"render\", App.name);\n    return (\n      <>\n        <div className={this.props.classes.root}>\n          <AppBar color=\"inherit\" className={this.props.classes.appBar}>\n            <Toolbar>\n              <Logo className={this.props.classes.logo}></Logo>\n              <Typography color=\"textPrimary\" variant=\"h4\" noWrap>\n                Transcribe\n              </Typography>\n              <Typography\n                color=\"textPrimary\"\n                variant=\"caption\"\n                noWrap\n                className={this.props.classes.title}\n              >\n                [{this.props.title !== \"\" ? this.props.title : \"no file loaded\"}\n                ]\n              </Typography>\n              <Button\n                onClick={() => this.props.openedDialog(DialogType.NEW)}\n                disabled={this.props.status === LoadingStatus.INITIALIZING}\n              >\n                New\n              </Button>\n              <Button\n                onClick={() => this.props.openedDialog(DialogType.OPEN)}\n                disabled={this.props.status === LoadingStatus.INITIALIZING}\n              >\n                Open\n              </Button>\n              <Button\n                onClick={() => this.props.openedDialog(DialogType.SAVE)}\n                disabled={this.props.status !== LoadingStatus.INITIALIZED}\n              >\n                Save\n              </Button>\n            </Toolbar>\n          </AppBar>\n          <Drawer\n            className={this.props.classes.drawer}\n            variant=\"permanent\"\n            classes={{\n              paper: this.props.classes.drawerPaper\n            }}\n          >\n            <div className={this.props.classes.toolbar} />\n            <List className={this.props.classes.menuItem}>\n              <ListItem\n                button\n                key=\"Structure\"\n                onClick={() => this.props.switchedPage(Page.STRUCTURE)}\n                disabled={this.props.status !== LoadingStatus.INITIALIZED}\n              >\n                <ListItemIcon>\n                  <HomeIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Structure\" />\n              </ListItem>\n              <ListItem\n                button\n                key=\"Harmony\"\n                onClick={() => this.props.switchedPage(Page.HARMONY)}\n                disabled={this.props.status !== LoadingStatus.INITIALIZED}\n              >\n                <ListItemIcon>\n                  <MusicVideoIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Harmony\" />\n              </ListItem>\n              <ListItem\n                button\n                key=\"Guitar\"\n                onClick={() => this.props.switchedPage(Page.GUITAR)}\n                disabled={this.props.status !== LoadingStatus.INITIALIZED}\n              >\n                <ListItemIcon>\n                  <RadioIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Guitar\" />\n              </ListItem>\n              <ListItem\n                button\n                key=\"Drum\"\n                onClick={() => this.props.switchedPage(Page.DRUM)}\n                disabled={this.props.status !== LoadingStatus.INITIALIZED}\n              >\n                <ListItemIcon>\n                  <AlbumIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Drum\" />\n              </ListItem>\n              <ListItem\n                button\n                key=\"Print\"\n                onClick={() => this.props.switchedPage(Page.PRINT)}\n                disabled={this.props.status !== LoadingStatus.INITIALIZED}\n              >\n                <ListItemIcon>\n                  <PrintIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Print\" />\n              </ListItem>\n            </List>\n          </Drawer>\n          <main className={this.props.classes.content}>\n            <div className={this.props.classes.toolbar} />\n            <Toggle show={this.props.currentPage === Page.DEFAULT}>\n              <DefaultPage />\n            </Toggle>\n            <Toggle show={this.props.currentPage === Page.STRUCTURE}>\n              <StructurePage />\n            </Toggle>\n            <Toggle show={this.props.currentPage === Page.HARMONY}>\n              <HarmonyPage />\n            </Toggle>\n            <Toggle show={this.props.currentPage === Page.GUITAR}>\n              <GuitarPage />\n            </Toggle>\n            <Toggle show={this.props.currentPage === Page.DRUM}>\n              <DrumPage />\n            </Toggle>\n            <Toggle show={this.props.currentPage === Page.PRINT}>\n              <PrintPage />\n            </Toggle>\n            <Grid\n              container\n              direction=\"column\"\n              justifyContent=\"flex-end\"\n              alignItems=\"flex-end\"\n              className={this.props.classes.footer}\n            >\n              <Grid item>\n                App version:{\" \"}\n                <VersionInfo\n                  version={process.env.REACT_APP_VERSION ?? \"\"}\n                  hash={process.env.REACT_APP_VERSION_HASH ?? \"\"}\n                  description={process.env.REACT_APP_VERSION_DESCRIPTION ?? \"\"}\n                />\n              </Grid>\n            </Grid>\n          </main>\n        </div>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = ({ project }: ApplicationState) => {\n  return {\n    currentPage: project.currentPage,\n    status: project.status,\n    title: project.title\n  };\n};\n\nconst mapDispatchToProps = {\n  switchedPage,\n  openedDialog\n};\n\nconst drawerWidth = 190;\n\nconst stylesForApp = (theme: Theme) =>\n  createStyles({\n    root: {\n      display: \"flex\",\n      backgroundColor: theme.palette.background.default\n    },\n    drawer: {\n      width: drawerWidth,\n      flexShrink: 0\n    },\n    drawerPaper: {\n      width: drawerWidth,\n      backgroundColor: \"#202a2f\"\n    },\n    content: {\n      flexGrow: 1,\n      padding: theme.spacing(3)\n    },\n    title: {\n      flexGrow: 1,\n      marginLeft: \"50px\"\n    },\n    toolbar: {\n      ...theme.mixins.toolbar\n    },\n    menuItem: {\n      color: \"#abb1b7\"\n    },\n    logo: {\n      height: theme.logo.height,\n      marginRight: theme.logo.marginRight\n    },\n    footer: {\n      marginTop: \"20px\"\n    },\n    appBar: {\n      zIndex: theme.zIndex.drawer + 1\n    }\n  });\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withStyles(stylesForApp, { withTheme: true })(App));\n","import {\n  DialogActions,\n  DialogContent,\n  DialogContentText\n} from \"@material-ui/core\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport React, { Component } from \"react\";\n\nexport interface DialogAction {\n  label: string;\n  onClick: () => void;\n  disabled?: boolean;\n}\n\ninterface ModalDialogProps {\n  title: string;\n  subTitle?: string;\n  onCancel: () => void;\n  actions?: DialogAction[];\n}\n\nclass ModalDialog extends Component<ModalDialogProps> {\n  render(): JSX.Element {\n    return (\n      <Dialog\n        onClose={this.props.onCancel}\n        open={true}\n        fullWidth={true}\n        maxWidth={\"sm\"}\n      >\n        <DialogTitle>{this.props.title}</DialogTitle>\n        <DialogContent>\n          <DialogContentText>{this.props.subTitle}</DialogContentText>\n          {this.props.children}\n        </DialogContent>\n        <DialogActions>\n          {this.props.actions?.map((value) => (\n            <Button\n              key={value.label}\n              onClick={value.onClick}\n              color=\"primary\"\n              disabled={value.disabled ?? false}\n            >\n              {value.label}\n            </Button>\n          ))}\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n\nexport default ModalDialog;\n","import { configureStore, createAction } from \"@reduxjs/toolkit\";\nimport { AnyAction, combineReducers, Reducer } from \"redux\";\n\nimport analysisReducer, { AnalysisState } from \"./analysis/analysisSlice\";\nimport audioReducer, { AudioState } from \"./audio/audioSlice\";\nimport dialogReducer, { DialogState } from \"./dialog/dialogsSlice\";\nimport AudioMiddleware from \"./middleware/audioMiddleware\";\nimport projectReducer, { ProjectState } from \"./project/projectSlice\";\n\n/** The top-level application state object. */\nexport interface ApplicationState {\n  analysis: AnalysisState;\n  audio: AudioState;\n  dialog: DialogState;\n  project: ProjectState;\n}\n\nexport interface PersistedState {\n  analysis: AnalysisState;\n  project: ProjectState;\n}\n\nexport const restoredPersistedState = createAction<PersistedState>(\n  \"restoredPersistedState\"\n);\n\nexport const sliceReducer = combineReducers({\n  analysis: analysisReducer,\n  audio: audioReducer,\n  dialog: dialogReducer,\n  project: projectReducer\n});\n\nexport const createRootReducer: Reducer<ApplicationState, AnyAction> = (\n  state,\n  action\n) => {\n  state = sliceReducer(state, action);\n\n  if (restoredPersistedState.match(action)) {\n    return state;\n  }\n\n  return state;\n};\n\nconst createAppStore = () => {\n  const store = configureStore({\n    reducer: createRootReducer,\n    preloadedState: undefined,\n    middleware: [new AudioMiddleware().createMiddleware]\n  });\n\n  if (process.env.NODE_ENV !== \"production\" && module.hot) {\n    module.hot.accept(\"./store\", () => store.replaceReducer(createRootReducer));\n  }\n  return store;\n};\n\nexport default createAppStore();\n","import {\n  createStyles,\n  FormLabel,\n  Theme,\n  WithStyles,\n  withStyles\n} from \"@material-ui/core\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport TextField from \"@material-ui/core/TextField\";\nimport PersistenceApi from \"api/persistenceApi\";\nimport FileInput, { FileType } from \"components/fileInput/fileInput\";\nimport MeasureSelect from \"components/measureSelect/measureSelect\";\nimport ModalDialog, { DialogAction } from \"components/modalDialog/modalDialog\";\nimport SectionSelect from \"components/sectionSelect/sectionSelect\";\nimport { SectionType } from \"model/model\";\nimport React, { Component, FunctionComponent, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  addedSection,\n  initialAnalysisState\n} from \"states/analysis/analysisSlice\";\nimport { closedDialog, DialogType } from \"states/dialog/dialogsSlice\";\nimport { switchAudioFile } from \"states/middleware/audioMiddleware\";\nimport {\n  createdProject,\n  initialProjectState,\n  Page,\n  switchedPage\n} from \"states/project/projectSlice\";\nimport store, { ApplicationState } from \"states/store\";\nimport ArrayUtil from \"util/ArrayUtil\";\n\ninterface PropsFromState {\n  type: DialogType;\n  audioUrl: string;\n  maxMeasure: number;\n}\n\ninterface PropsFromDispatch {\n  switchedPage: typeof switchedPage;\n  closedDialog: typeof closedDialog;\n  createdProject: typeof createdProject;\n  addedSection: typeof addedSection;\n  switchAudioFile: typeof switchAudioFile;\n}\n\ntype AllProps = PropsFromState & PropsFromDispatch;\n\nclass DialogManagement extends Component<AllProps> {\n  render() {\n    switch (this.props.type) {\n      case DialogType.NONE:\n        return null;\n      case DialogType.NEW:\n        return (\n          <NewDialog\n            onCancel={() => this.props.closedDialog()}\n            onSubmit={(title: string, audioUrl: string) => {\n              this.props.createdProject({\n                analysis: initialAnalysisState,\n                project: { ...initialProjectState, audioUrl, title }\n              });\n              this.props.switchedPage(Page.STRUCTURE);\n              this.props.closedDialog();\n            }}\n          ></NewDialog>\n        );\n      case DialogType.OPEN:\n        return (\n          <OpenDialog\n            onCancel={() => this.props.closedDialog()}\n            onSubmit={(zip: File, zipUrl: string) => {\n              PersistenceApi.open(zip).then(({ audioBlob, state }) => {\n                const audioUrl = PersistenceApi.getLocalFileUrl(audioBlob);\n                PersistenceApi.revokeLocalFile(zipUrl);\n\n                this.props.createdProject({\n                  analysis: state.analysis,\n                  project: { ...state.project, audioUrl }\n                });\n                this.props.switchedPage(Page.STRUCTURE);\n                this.props.closedDialog();\n              });\n            }}\n          ></OpenDialog>\n        );\n      case DialogType.SAVE:\n        return (\n          <ModalDialog\n            title=\"Save Transcription\"\n            subTitle=\"Please click on 'save' to generate a transcription.zip file. It contains the transcription and the source audio file.\"\n            onCancel={() => this.props.closedDialog()}\n            actions={[\n              {\n                label: \"Cancel\",\n                onClick: () => this.props.closedDialog()\n              },\n              {\n                label: \"Save\",\n                onClick: () => {\n                  PersistenceApi.save(\"transcription.zip\", {\n                    audioFileUrl: this.props.audioUrl,\n                    state: store.getState()\n                  });\n                  this.props.closedDialog();\n                }\n              }\n            ]}\n          ></ModalDialog>\n        );\n      case DialogType.ADD_SECTION:\n        return (\n          <AddSectionDialog\n            maxMeasure={this.props.maxMeasure}\n            onCancel={() => this.props.closedDialog()}\n            onSubmit={(sectionType, start, end) => {\n              this.props.addedSection({\n                measures: ArrayUtil.range(start, end),\n                type: sectionType\n              });\n              this.props.closedDialog();\n            }}\n          ></AddSectionDialog>\n        );\n      default:\n        throw Error();\n    }\n  }\n}\n\nconst NewDialog: FunctionComponent<{\n  onSubmit: (title: string, fileUrl: string) => void;\n  onCancel: () => void;\n}> = (props) => {\n  const [fileUrl, setFileUrl] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const actions: () => DialogAction[] = () => {\n    return [\n      {\n        label: \"Cancel\",\n        onClick: () => props.onCancel()\n      },\n      {\n        label: \"Create\",\n        onClick: () => props.onSubmit(title, fileUrl),\n        disabled: fileUrl === \"\" || title === \"\"\n      }\n    ];\n  };\n\n  const handleTitleChange = (event: React.ChangeEvent<HTMLInputElement>) =>\n    setTitle(event.target.value);\n\n  return (\n    <ModalDialog\n      title=\"Create new Transcription\"\n      subTitle=\"Please add a project title and select an audio file from your hard disk below.\"\n      actions={actions()}\n      onCancel={props.onCancel}\n    >\n      <FormControl fullWidth>\n        <TextField\n          id=\"title\"\n          label=\"Project title\"\n          margin=\"normal\"\n          InputProps={{\n            readOnly: false\n          }}\n          variant=\"outlined\"\n          onChange={handleTitleChange}\n        />\n        <FileInput\n          fileType={FileType.AUDIO}\n          id=\"audio_file\"\n          callback={(file, fileUrl) => {\n            setFileUrl(fileUrl);\n          }}\n        ></FileInput>\n      </FormControl>\n    </ModalDialog>\n  );\n};\n\nconst OpenDialog: FunctionComponent<{\n  onSubmit: (file: File, fileUrl: string) => void;\n  onCancel: () => void;\n}> = (props) => {\n  const [fileUrl, setFileUrl] = useState(\"\");\n  const [file, setFile] = useState<File>();\n  const actions: () => DialogAction[] = () => {\n    return [\n      {\n        label: \"Cancel\",\n        onClick: () => props.onCancel()\n      },\n      {\n        label: \"Open\",\n        onClick: () => {\n          if (!file) throw Error(\"file undefined\");\n\n          props.onSubmit(file, fileUrl);\n        },\n        disabled: fileUrl === \"\"\n      }\n    ];\n  };\n\n  return (\n    <ModalDialog\n      title=\"Open Transcription\"\n      subTitle=\"Please select a project zip file from your hard disk below.\"\n      onCancel={props.onCancel}\n      actions={actions()}\n    >\n      <FormControl fullWidth>\n        <FileInput\n          fileType={FileType.ZIP}\n          id=\"zip_file\"\n          callback={(file, fileUrl) => {\n            setFileUrl(fileUrl);\n            setFile(file);\n          }}\n        ></FileInput>\n      </FormControl>\n    </ModalDialog>\n  );\n};\n\nconst addSectionDialogStyles = (theme: Theme) =>\n  createStyles({\n    formControl: {\n      marginBottom: theme.formControl.marginBottom\n    }\n  });\n\ninterface AddSectionDialogProps\n  extends WithStyles<typeof addSectionDialogStyles> {\n  maxMeasure: number;\n  onSubmit: (sectionType: SectionType, start: number, end: number) => void;\n  onCancel: () => void;\n}\n\nconst AddSectionDialog = withStyles(addSectionDialogStyles)(\n  (props: AddSectionDialogProps) => {\n    const [sectionType, setSectionType] = useState(SectionType.INTRO);\n    const [start, setStart] = useState(0);\n    const [end, setEnd] = useState(0);\n    const actions: () => DialogAction[] = () => {\n      return [\n        {\n          label: \"Cancel\",\n          onClick: () => props.onCancel()\n        },\n        {\n          label: \"Add\",\n          onClick: () => props.onSubmit(sectionType, start, end),\n          disabled: sectionType === SectionType.UNDEFINED || start > end\n        }\n      ];\n    };\n\n    return (\n      <ModalDialog\n        title=\"Add new Section\"\n        subTitle=\"Please define section and add it to the song structure.\"\n        actions={actions()}\n        onCancel={props.onCancel}\n      >\n        <FormControl fullWidth className={props.classes.formControl}>\n          <FormLabel component=\"legend\">Section Type</FormLabel>\n          <SectionSelect\n            value={sectionType}\n            onChange={(sectionType) => setSectionType(sectionType)}\n          ></SectionSelect>\n        </FormControl>\n        <FormControl fullWidth className={props.classes.formControl}>\n          <FormLabel component=\"legend\">First Measure</FormLabel>\n          <MeasureSelect\n            value={start}\n            min={0}\n            max={props.maxMeasure}\n            onChange={(value) => setStart(value)}\n          />\n        </FormControl>\n        <FormControl fullWidth className={props.classes.formControl}>\n          <FormLabel component=\"legend\">Last Measure</FormLabel>\n          <MeasureSelect\n            value={end}\n            min={0}\n            max={props.maxMeasure}\n            onChange={(value) => setEnd(value)}\n          />\n        </FormControl>\n      </ModalDialog>\n    );\n  }\n);\n\nconst mapStateToProps = ({ dialog, project, analysis }: ApplicationState) => {\n  return {\n    type: dialog.currentDialog,\n    audioUrl: project.audioUrl,\n    maxMeasure: analysis.measures.allIds.length - 1\n  };\n};\n\nconst mapDispatchToProps = {\n  closedDialog,\n  switchedPage,\n  createdProject,\n  addedSection,\n  switchAudioFile: switchAudioFile\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DialogManagement);\n","import \"typeface-roboto\";\n\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { ThemeProvider } from \"@material-ui/core/styles\";\nimport React from \"react\";\nimport { render } from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { AUDIO_DOM_ELEMENT } from \"states/middleware/peaksConfig\";\n\nimport App from \"./components/app/app\";\nimport DialogManagement from \"./components/dialogManagement/dialogManagement\";\nimport store from \"./states/store\";\nimport theme from \"./styles/theme\";\n\nconst renderApp = () =>\n  render(\n    <Provider store={store}>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <MediaElement />\n        <DialogManagement />\n        <App />\n      </ThemeProvider>\n    </Provider>,\n    document.getElementById(\"root\")\n  );\n\n/** Enable logger in dev mode */\nif (process.env.NODE_ENV !== \"production\") {\n  localStorage.setItem(\"debug\", \"transcribe:*\");\n}\n\n/** Enable hot reload while development */\nif (process.env.NODE_ENV !== \"production\" && module.hot) {\n  module.hot.accept(\"./components/app/app\", renderApp);\n}\n\nconst MediaElement = () => {\n  return (\n    <audio id={AUDIO_DOM_ELEMENT} controls hidden>\n      Your browser does not support the audio element.\n    </audio>\n  );\n};\n\nrenderApp();\n"],"sourceRoot":""}